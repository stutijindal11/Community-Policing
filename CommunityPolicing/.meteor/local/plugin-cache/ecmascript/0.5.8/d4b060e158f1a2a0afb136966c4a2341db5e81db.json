{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/packages/anbuselvan:meteor-toggle-switch/vendor/css-toggle-switch/bower_components/foundation-sites/js/foundation.accordionMenu.js","filenameRelative":"/packages/anbuselvan:meteor-toggle-switch/vendor/css-toggle-switch/bower_components/foundation-sites/js/foundation.accordionMenu.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/packages/anbuselvan:meteor-toggle-switch/vendor/css-toggle-switch/bower_components/foundation-sites/js/foundation.accordionMenu.js.map","sourceFileName":"/packages/anbuselvan:meteor-toggle-switch/vendor/css-toggle-switch/bower_components/foundation-sites/js/foundation.accordionMenu.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"foundation.accordionMenu"},"ignored":false,"code":"/**\n * AccordionMenu module.\n * @module foundation.accordionMenu\n * @requires foundation.util.keyboard\n * @requires foundation.util.motion\n * @requires foundation.util.nest\n */\n!function ($) {\n  'use strict';\n\n  /**\n   * Creates a new instance of an accordion menu.\n   * @class\n   * @fires AccordionMenu#init\n   * @param {jQuery} element - jQuery object to make into an accordion menu.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n\n  function AccordionMenu(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, AccordionMenu.defaults, this.$element.data(), options);\n\n    Foundation.Nest.Feather(this.$element, 'accordion');\n\n    this._init();\n\n    Foundation.registerPlugin(this);\n    Foundation.Keyboard.register('AccordionMenu', {\n      'ENTER': 'toggle',\n      'SPACE': 'toggle',\n      'ARROW_RIGHT': 'open',\n      'ARROW_UP': 'up',\n      'ARROW_DOWN': 'down',\n      'ARROW_LEFT': 'close',\n      'ESCAPE': 'closeAll',\n      'TAB': 'down',\n      'SHIFT_TAB': 'up'\n    });\n  }\n\n  AccordionMenu.defaults = {\n    /**\n     * Amount of time to animate the opening of a submenu in ms.\n     * @option\n     * @example 250\n     */\n    slideSpeed: 250,\n    /**\n     * Allow the menu to have multiple open panes.\n     * @option\n     * @example true\n     */\n    multiOpen: true\n  };\n\n  /**\n   * Initializes the accordion menu by hiding all nested menus.\n   * @private\n   */\n  AccordionMenu.prototype._init = function () {\n    this.$element.find('[data-submenu]').not('.is-active').slideUp(0); //.find('a').css('padding-left', '1rem');\n    this.$element.attr({\n      'role': 'tablist',\n      'aria-multiselectable': this.options.multiOpen\n    });\n\n    this.$menuLinks = this.$element.find('.has-submenu');\n    this.$menuLinks.each(function () {\n      var linkId = this.id || Foundation.GetYoDigits(6, 'acc-menu-link'),\n          $elem = $(this),\n          $sub = $elem.children('[data-submenu]'),\n          subId = $sub[0].id || Foundation.GetYoDigits(6, 'acc-menu'),\n          isActive = $sub.hasClass('is-active');\n      $elem.attr({\n        'aria-controls': subId,\n        'aria-expanded': isActive,\n        'aria-selected': false,\n        'role': 'tab',\n        'id': linkId\n      });\n      $sub.attr({\n        'aria-labelledby': linkId,\n        'aria-hidden': !isActive,\n        'role': 'tabpanel',\n        'id': subId\n      });\n    });\n    var initPanes = this.$element.find('.is-active');\n    if (initPanes.length) {\n      var _this = this;\n      initPanes.each(function () {\n        _this.down($(this));\n      });\n    }\n    this._events();\n  };\n\n  /**\n   * Adds event handlers for items within the menu.\n   * @private\n   */\n  AccordionMenu.prototype._events = function () {\n    var _this = this;\n\n    this.$element.find('li').each(function () {\n      var $submenu = $(this).children('[data-submenu]');\n\n      if ($submenu.length) {\n        $(this).children('a').off('click.zf.accordionmenu').on('click.zf.accordionmenu', function (e) {\n          e.preventDefault();\n\n          _this.toggle($submenu);\n        });\n      }\n    }).on('keydown.zf.accordionmenu', function (e) {\n      var $element = $(this),\n          $elements = $element.parent('ul').children('li'),\n          $prevElement,\n          $nextElement,\n          $target = $element.children('[data-submenu]');\n\n      $elements.each(function (i) {\n        if ($(this).is($element)) {\n          $prevElement = $elements.eq(Math.max(0, i - 1));\n          $nextElement = $elements.eq(Math.min(i + 1, $elements.length - 1));\n\n          if ($(this).children('[data-submenu]:visible').length) {\n            // has open sub menu\n            $nextElement = $element.find('li:first-child');\n          }\n          if ($(this).is(':first-child')) {\n            // is first element of sub menu\n            $prevElement = $element.parents('li').first();\n          } else if ($prevElement.children('[data-submenu]:visible').length) {\n            // if previous element has open sub menu\n            $prevElement = $prevElement.find('li:last-child');\n          }\n          if ($(this).is(':last-child')) {\n            // is last element of sub menu\n            $nextElement = $element.parents('li').first().next('li');\n          }\n\n          return;\n        }\n      });\n      Foundation.Keyboard.handleKey(e, _this, {\n        open: function () {\n          function open() {\n            if ($target.is(':hidden')) {\n              _this.down($target);\n              $target.find('li').first().focus();\n            }\n          }\n\n          return open;\n        }(),\n        close: function () {\n          function close() {\n            if ($target.length && !$target.is(':hidden')) {\n              // close active sub of this item\n              _this.up($target);\n            } else if ($element.parent('[data-submenu]').length) {\n              // close currently open sub\n              _this.up($element.parent('[data-submenu]'));\n              $element.parents('li').first().focus();\n            }\n          }\n\n          return close;\n        }(),\n        up: function () {\n          function up() {\n            $prevElement.focus();\n          }\n\n          return up;\n        }(),\n        down: function () {\n          function down() {\n            $nextElement.focus();\n          }\n\n          return down;\n        }(),\n        toggle: function () {\n          function toggle() {\n            if ($element.children('[data-submenu]').length) {\n              _this.toggle($element.children('[data-submenu]'));\n            }\n          }\n\n          return toggle;\n        }(),\n        closeAll: function () {\n          function closeAll() {\n            _this.hideAll();\n          }\n\n          return closeAll;\n        }(),\n        handled: function () {\n          function handled() {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n          }\n\n          return handled;\n        }()\n      });\n    }); //.attr('tabindex', 0);\n  };\n  /**\n   * Closes all panes of the menu.\n   * @function\n   */\n  AccordionMenu.prototype.hideAll = function () {\n    this.$element.find('[data-submenu]').slideUp(this.options.slideSpeed);\n  };\n  /**\n   * Toggles the open/close state of a submenu.\n   * @function\n   * @param {jQuery} $target - the submenu to toggle\n   */\n  AccordionMenu.prototype.toggle = function ($target) {\n    if (!$target.is(':hidden')) {\n      this.up($target);\n    } else {\n      this.down($target);\n    }\n  };\n  /**\n   * Opens the sub-menu defined by `$target`.\n   * @param {jQuery} $target - Sub-menu to open.\n   * @fires AccordionMenu#down\n   */\n  AccordionMenu.prototype.down = function ($target) {\n    var _this = this;\n    console.log($target);\n    if (!this.options.multiOpen) {\n      this.up(this.$element.find('.is-active').not($target.parentsUntil(this.$element)));\n    }\n\n    $target.addClass('is-active').attr({ 'aria-hidden': false }).parent('.has-submenu').attr({ 'aria-expanded': true, 'aria-selected': true });\n\n    Foundation.Move(this.options.slideSpeed, $target, function () {\n      $target.slideDown(_this.options.slideSpeed);\n    });\n    /**\n     * Fires when the menu is done collapsing up.\n     * @event AccordionMenu#down\n     */\n    this.$element.trigger('down.zf.accordionMenu', [$target]);\n  };\n\n  /**\n   * Closes the sub-menu defined by `$target`. All sub-menus inside the target will be closed as well.\n   * @param {jQuery} $target - Sub-menu to close.\n   * @fires AccordionMenu#up\n   */\n  AccordionMenu.prototype.up = function ($target) {\n    var _this = this;\n    Foundation.Move(this.options.slideSpeed, $target, function () {\n      $target.slideUp(_this.options.slideSpeed);\n    });\n    $target.attr('aria-hidden', true).find('[data-submenu]').slideUp(0).attr('aria-hidden', true).end().parent('.has-submenu').attr({ 'aria-expanded': false, 'aria-selected': false });\n    // $target.slideUp(this.options.slideSpeed, function() {\n    //   $target.find('[data-submenu]').slideUp(0).attr('aria-hidden', true);\n    // }).attr('aria-hidden', true).parent('.has-submenu').attr({'aria-expanded': false, 'aria-selected': false});\n\n    /**\n     * Fires when the menu is done collapsing up.\n     * @event AccordionMenu#up\n     */\n    this.$element.trigger('up.zf.accordionMenu', [$target]);\n  };\n\n  /**\n   * Destroys an instance of accordion menu.\n   * @fires AccordionMenu#destroyed\n   */\n  AccordionMenu.prototype.destroy = function () {\n    this.$element.find('[data-submenu]').slideDown(0).css('display', '');\n    this.$element.find('a').off('click.zf.accordionMenu');\n\n    Foundation.Nest.Burn(this.$element, 'accordion');\n    Foundation.unregisterPlugin(this);\n  };\n\n  Foundation.plugin(AccordionMenu, 'AccordionMenu');\n}(jQuery, window.Foundation);","ast":null,"map":{"version":3,"sources":["/packages/anbuselvan:meteor-toggle-switch/vendor/css-toggle-switch/bower_components/foundation-sites/js/foundation.accordionMenu.js"],"names":[],"mappings":";;;;;;;AAOA,CAAC,UAAS,CAAT,EAAY;AACX;;;;;;;;;;AASA,WAAS,aAAT,CAAuB,OAAvB,EAAgC,OAAhC,EAAyC;AACvC,SAAK,QAAL,GAAgB,OAAhB;AACA,SAAK,OAAL,GAAe,EAAE,MAAF,CAAS,EAAT,EAAa,cAAc,QAA3B,EAAqC,KAAK,QAAL,CAAc,IAAd,EAArC,EAA2D,OAA3D,CAAf;;AAEA,eAAW,IAAX,CAAgB,OAAhB,CAAwB,KAAK,QAA7B,EAAuC,WAAvC;;AAEA,SAAK,KAAL;;AAEA,eAAW,cAAX,CAA0B,IAA1B;AACA,eAAW,QAAX,CAAoB,QAApB,CAA6B,eAA7B,EAA8C;AAC5C,eAAS,QADmC;AAE5C,eAAS,QAFmC;AAG5C,qBAAe,MAH6B;AAI5C,kBAAY,IAJgC;AAK5C,oBAAc,MAL8B;AAM5C,oBAAc,OAN8B;AAO5C,gBAAU,UAPkC;AAQ5C,aAAO,MARqC;AAS5C,mBAAa;AAT+B,KAA9C;AAWD;;AAED,gBAAc,QAAd,GAAyB;;;;;;AAMvB,gBAAY,GANW;;;;;;AAYvB,eAAW;AAZY,GAAzB;;;;;;AAmBA,gBAAc,SAAd,CAAwB,KAAxB,GAAgC,YAAW;AACzC,SAAK,QAAL,CAAc,IAAd,CAAmB,gBAAnB,EAAqC,GAArC,CAAyC,YAAzC,EAAuD,OAAvD,CAA+D,CAA/D,E;AACA,SAAK,QAAL,CAAc,IAAd,CAAmB;AACjB,cAAQ,SADS;AAEjB,8BAAwB,KAAK,OAAL,CAAa;AAFpB,KAAnB;;AAKA,SAAK,UAAL,GAAkB,KAAK,QAAL,CAAc,IAAd,CAAmB,cAAnB,CAAlB;AACA,SAAK,UAAL,CAAgB,IAAhB,CAAqB,YAAU;AAC7B,UAAI,SAAS,KAAK,EAAL,IAAW,WAAW,WAAX,CAAuB,CAAvB,EAA0B,eAA1B,CAAxB;AAAA,UACI,QAAQ,EAAE,IAAF,CADZ;AAAA,UAEI,OAAO,MAAM,QAAN,CAAe,gBAAf,CAFX;AAAA,UAGI,QAAQ,KAAK,CAAL,EAAQ,EAAR,IAAc,WAAW,WAAX,CAAuB,CAAvB,EAA0B,UAA1B,CAH1B;AAAA,UAII,WAAW,KAAK,QAAL,CAAc,WAAd,CAJf;AAKA,YAAM,IAAN,CAAW;AACT,yBAAiB,KADR;AAET,yBAAiB,QAFR;AAGT,yBAAiB,KAHR;AAIT,gBAAQ,KAJC;AAKT,cAAM;AALG,OAAX;AAOA,WAAK,IAAL,CAAU;AACR,2BAAmB,MADX;AAER,uBAAe,CAAC,QAFR;AAGR,gBAAQ,UAHA;AAIR,cAAM;AAJE,OAAV;AAMD,KAnBD;AAoBA,QAAI,YAAY,KAAK,QAAL,CAAc,IAAd,CAAmB,YAAnB,CAAhB;AACA,QAAG,UAAU,MAAb,EAAoB;AAClB,UAAI,QAAQ,IAAZ;AACA,gBAAU,IAAV,CAAe,YAAU;AACvB,cAAM,IAAN,CAAW,EAAE,IAAF,CAAX;AACD,OAFD;AAGD;AACD,SAAK,OAAL;AACD,GApCD;;;;;;AA0CA,gBAAc,SAAd,CAAwB,OAAxB,GAAkC,YAAW;AAC3C,QAAI,QAAQ,IAAZ;;AAEA,SAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB,EAAyB,IAAzB,CAA8B,YAAW;AACvC,UAAI,WAAW,EAAE,IAAF,EAAQ,QAAR,CAAiB,gBAAjB,CAAf;;AAEA,UAAI,SAAS,MAAb,EAAqB;AACnB,UAAE,IAAF,EAAQ,QAAR,CAAiB,GAAjB,EAAsB,GAAtB,CAA0B,wBAA1B,EAAoD,EAApD,CAAuD,wBAAvD,EAAiF,UAAS,CAAT,EAAY;AAC3F,YAAE,cAAF;;AAEA,gBAAM,MAAN,CAAa,QAAb;AACD,SAJD;AAKD;AACF,KAVD,EAUG,EAVH,CAUM,0BAVN,EAUkC,UAAS,CAAT,EAAW;AAC3C,UAAI,WAAW,EAAE,IAAF,CAAf;AAAA,UACI,YAAY,SAAS,MAAT,CAAgB,IAAhB,EAAsB,QAAtB,CAA+B,IAA/B,CADhB;AAAA,UAEI,YAFJ;AAAA,UAGI,YAHJ;AAAA,UAII,UAAU,SAAS,QAAT,CAAkB,gBAAlB,CAJd;;AAMA,gBAAU,IAAV,CAAe,UAAS,CAAT,EAAY;AACzB,YAAI,EAAE,IAAF,EAAQ,EAAR,CAAW,QAAX,CAAJ,EAA0B;AACxB,yBAAe,UAAU,EAAV,CAAa,KAAK,GAAL,CAAS,CAAT,EAAY,IAAE,CAAd,CAAb,CAAf;AACA,yBAAe,UAAU,EAAV,CAAa,KAAK,GAAL,CAAS,IAAE,CAAX,EAAc,UAAU,MAAV,GAAiB,CAA/B,CAAb,CAAf;;AAEA,cAAI,EAAE,IAAF,EAAQ,QAAR,CAAiB,wBAAjB,EAA2C,MAA/C,EAAuD;;AACrD,2BAAe,SAAS,IAAT,CAAc,gBAAd,CAAf;AACD;AACD,cAAI,EAAE,IAAF,EAAQ,EAAR,CAAW,cAAX,CAAJ,EAAgC;;AAC9B,2BAAe,SAAS,OAAT,CAAiB,IAAjB,EAAuB,KAAvB,EAAf;AACD,WAFD,MAEO,IAAI,aAAa,QAAb,CAAsB,wBAAtB,EAAgD,MAApD,EAA4D;;AACjE,2BAAe,aAAa,IAAb,CAAkB,eAAlB,CAAf;AACD;AACD,cAAI,EAAE,IAAF,EAAQ,EAAR,CAAW,aAAX,CAAJ,EAA+B;;AAC7B,2BAAe,SAAS,OAAT,CAAiB,IAAjB,EAAuB,KAAvB,GAA+B,IAA/B,CAAoC,IAApC,CAAf;AACD;;AAED;AACD;AACF,OAnBD;AAoBA,iBAAW,QAAX,CAAoB,SAApB,CAA8B,CAA9B,EAAiC,KAAjC,EAAwC;AACtC;AAAM,0BAAW;AACf,gBAAI,QAAQ,EAAR,CAAW,SAAX,CAAJ,EAA2B;AACzB,oBAAM,IAAN,CAAW,OAAX;AACA,sBAAQ,IAAR,CAAa,IAAb,EAAmB,KAAnB,GAA2B,KAA3B;AACD;AACF;;AALD;AAAA,WADsC;AAOtC;AAAO,2BAAW;AAChB,gBAAI,QAAQ,MAAR,IAAkB,CAAC,QAAQ,EAAR,CAAW,SAAX,CAAvB,EAA8C;;AAC5C,oBAAM,EAAN,CAAS,OAAT;AACD,aAFD,MAEO,IAAI,SAAS,MAAT,CAAgB,gBAAhB,EAAkC,MAAtC,EAA8C;;AACnD,oBAAM,EAAN,CAAS,SAAS,MAAT,CAAgB,gBAAhB,CAAT;AACA,uBAAS,OAAT,CAAiB,IAAjB,EAAuB,KAAvB,GAA+B,KAA/B;AACD;AACF;;AAPD;AAAA,WAPsC;AAetC;AAAI,wBAAW;AACb,yBAAa,KAAb;AACD;;AAFD;AAAA,WAfsC;AAkBtC;AAAM,0BAAW;AACf,yBAAa,KAAb;AACD;;AAFD;AAAA,WAlBsC;AAqBtC;AAAQ,4BAAW;AACjB,gBAAI,SAAS,QAAT,CAAkB,gBAAlB,EAAoC,MAAxC,EAAgD;AAC9C,oBAAM,MAAN,CAAa,SAAS,QAAT,CAAkB,gBAAlB,CAAb;AACD;AACF;;AAJD;AAAA,WArBsC;AA0BtC;AAAU,8BAAW;AACnB,kBAAM,OAAN;AACD;;AAFD;AAAA,WA1BsC;AA6BtC;AAAS,6BAAW;AAClB,cAAE,cAAF;AACA,cAAE,wBAAF;AACD;;AAHD;AAAA;AA7BsC,OAAxC;AAkCD,KAvED,E;AAwED,GA3ED;;;;;AAgFA,gBAAc,SAAd,CAAwB,OAAxB,GAAkC,YAAU;AAC1C,SAAK,QAAL,CAAc,IAAd,CAAmB,gBAAnB,EAAqC,OAArC,CAA6C,KAAK,OAAL,CAAa,UAA1D;AACD,GAFD;;;;;;AAQA,gBAAc,SAAd,CAAwB,MAAxB,GAAiC,UAAS,OAAT,EAAiB;AAChD,QAAI,CAAC,QAAQ,EAAR,CAAW,SAAX,CAAL,EAA4B;AAC1B,WAAK,EAAL,CAAQ,OAAR;AACD,KAFD,MAGK;AACH,WAAK,IAAL,CAAU,OAAV;AACD;AACF,GAPD;;;;;;AAaA,gBAAc,SAAd,CAAwB,IAAxB,GAA+B,UAAS,OAAT,EAAkB;AAC/C,QAAI,QAAQ,IAAZ;AACA,YAAQ,GAAR,CAAY,OAAZ;AACA,QAAG,CAAC,KAAK,OAAL,CAAa,SAAjB,EAA2B;AACzB,WAAK,EAAL,CAAQ,KAAK,QAAL,CAAc,IAAd,CAAmB,YAAnB,EAAiC,GAAjC,CAAqC,QAAQ,YAAR,CAAqB,KAAK,QAA1B,CAArC,CAAR;AACD;;AAED,YAAQ,QAAR,CAAiB,WAAjB,EAA8B,IAA9B,CAAmC,EAAC,eAAe,KAAhB,EAAnC,EACG,MADH,CACU,cADV,EAC0B,IAD1B,CAC+B,EAAC,iBAAiB,IAAlB,EAAwB,iBAAiB,IAAzC,EAD/B;;AAGE,eAAW,IAAX,CAAgB,KAAK,OAAL,CAAa,UAA7B,EAAyC,OAAzC,EAAkD,YAAU;AAC1D,cAAQ,SAAR,CAAkB,MAAM,OAAN,CAAc,UAAhC;AACD,KAFD;;;;;AAOF,SAAK,QAAL,CAAc,OAAd,CAAsB,uBAAtB,EAA+C,CAAC,OAAD,CAA/C;AACD,GAlBD;;;;;;;AAyBA,gBAAc,SAAd,CAAwB,EAAxB,GAA6B,UAAS,OAAT,EAAkB;AAC7C,QAAI,QAAQ,IAAZ;AACA,eAAW,IAAX,CAAgB,KAAK,OAAL,CAAa,UAA7B,EAAyC,OAAzC,EAAkD,YAAU;AAC1D,cAAQ,OAAR,CAAgB,MAAM,OAAN,CAAc,UAA9B;AACD,KAFD;AAGA,YAAQ,IAAR,CAAa,aAAb,EAA4B,IAA5B,EACQ,IADR,CACa,gBADb,EAC+B,OAD/B,CACuC,CADvC,EAC0C,IAD1C,CAC+C,aAD/C,EAC8D,IAD9D,EACoE,GADpE,GAEQ,MAFR,CAEe,cAFf,EAGQ,IAHR,CAGa,EAAC,iBAAiB,KAAlB,EAAyB,iBAAiB,KAA1C,EAHb;;;;;;;;;AAYA,SAAK,QAAL,CAAc,OAAd,CAAsB,qBAAtB,EAA6C,CAAC,OAAD,CAA7C;AACD,GAlBD;;;;;;AAwBA,gBAAc,SAAd,CAAwB,OAAxB,GAAkC,YAAU;AAC1C,SAAK,QAAL,CAAc,IAAd,CAAmB,gBAAnB,EAAqC,SAArC,CAA+C,CAA/C,EAAkD,GAAlD,CAAsD,SAAtD,EAAiE,EAAjE;AACA,SAAK,QAAL,CAAc,IAAd,CAAmB,GAAnB,EAAwB,GAAxB,CAA4B,wBAA5B;;AAEA,eAAW,IAAX,CAAgB,IAAhB,CAAqB,KAAK,QAA1B,EAAoC,WAApC;AACA,eAAW,gBAAX,CAA4B,IAA5B;AACD,GAND;;AAQA,aAAW,MAAX,CAAkB,aAAlB,EAAiC,eAAjC;AACD,CA5PA,CA4PC,MA5PD,EA4PS,OAAO,UA5PhB,CAAD","file":"/packages/anbuselvan:meteor-toggle-switch/vendor/css-toggle-switch/bower_components/foundation-sites/js/foundation.accordionMenu.js.map","sourcesContent":["/**\n * AccordionMenu module.\n * @module foundation.accordionMenu\n * @requires foundation.util.keyboard\n * @requires foundation.util.motion\n * @requires foundation.util.nest\n */\n!function($) {\n  'use strict';\n\n  /**\n   * Creates a new instance of an accordion menu.\n   * @class\n   * @fires AccordionMenu#init\n   * @param {jQuery} element - jQuery object to make into an accordion menu.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n  function AccordionMenu(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, AccordionMenu.defaults, this.$element.data(), options);\n\n    Foundation.Nest.Feather(this.$element, 'accordion');\n\n    this._init();\n\n    Foundation.registerPlugin(this);\n    Foundation.Keyboard.register('AccordionMenu', {\n      'ENTER': 'toggle',\n      'SPACE': 'toggle',\n      'ARROW_RIGHT': 'open',\n      'ARROW_UP': 'up',\n      'ARROW_DOWN': 'down',\n      'ARROW_LEFT': 'close',\n      'ESCAPE': 'closeAll',\n      'TAB': 'down',\n      'SHIFT_TAB': 'up'\n    });\n  }\n\n  AccordionMenu.defaults = {\n    /**\n     * Amount of time to animate the opening of a submenu in ms.\n     * @option\n     * @example 250\n     */\n    slideSpeed: 250,\n    /**\n     * Allow the menu to have multiple open panes.\n     * @option\n     * @example true\n     */\n    multiOpen: true\n  };\n\n  /**\n   * Initializes the accordion menu by hiding all nested menus.\n   * @private\n   */\n  AccordionMenu.prototype._init = function() {\n    this.$element.find('[data-submenu]').not('.is-active').slideUp(0);//.find('a').css('padding-left', '1rem');\n    this.$element.attr({\n      'role': 'tablist',\n      'aria-multiselectable': this.options.multiOpen\n    });\n\n    this.$menuLinks = this.$element.find('.has-submenu');\n    this.$menuLinks.each(function(){\n      var linkId = this.id || Foundation.GetYoDigits(6, 'acc-menu-link'),\n          $elem = $(this),\n          $sub = $elem.children('[data-submenu]'),\n          subId = $sub[0].id || Foundation.GetYoDigits(6, 'acc-menu'),\n          isActive = $sub.hasClass('is-active');\n      $elem.attr({\n        'aria-controls': subId,\n        'aria-expanded': isActive,\n        'aria-selected': false,\n        'role': 'tab',\n        'id': linkId\n      });\n      $sub.attr({\n        'aria-labelledby': linkId,\n        'aria-hidden': !isActive,\n        'role': 'tabpanel',\n        'id': subId\n      });\n    });\n    var initPanes = this.$element.find('.is-active');\n    if(initPanes.length){\n      var _this = this;\n      initPanes.each(function(){\n        _this.down($(this));\n      });\n    }\n    this._events();\n  };\n\n  /**\n   * Adds event handlers for items within the menu.\n   * @private\n   */\n  AccordionMenu.prototype._events = function() {\n    var _this = this;\n\n    this.$element.find('li').each(function() {\n      var $submenu = $(this).children('[data-submenu]');\n\n      if ($submenu.length) {\n        $(this).children('a').off('click.zf.accordionmenu').on('click.zf.accordionmenu', function(e) {\n          e.preventDefault();\n\n          _this.toggle($submenu);\n        });\n      }\n    }).on('keydown.zf.accordionmenu', function(e){\n      var $element = $(this),\n          $elements = $element.parent('ul').children('li'),\n          $prevElement,\n          $nextElement,\n          $target = $element.children('[data-submenu]');\n\n      $elements.each(function(i) {\n        if ($(this).is($element)) {\n          $prevElement = $elements.eq(Math.max(0, i-1));\n          $nextElement = $elements.eq(Math.min(i+1, $elements.length-1));\n\n          if ($(this).children('[data-submenu]:visible').length) { // has open sub menu\n            $nextElement = $element.find('li:first-child');\n          }\n          if ($(this).is(':first-child')) { // is first element of sub menu\n            $prevElement = $element.parents('li').first();\n          } else if ($prevElement.children('[data-submenu]:visible').length) { // if previous element has open sub menu\n            $prevElement = $prevElement.find('li:last-child');\n          }\n          if ($(this).is(':last-child')) { // is last element of sub menu\n            $nextElement = $element.parents('li').first().next('li');\n          }\n\n          return;\n        }\n      });\n      Foundation.Keyboard.handleKey(e, _this, {\n        open: function() {\n          if ($target.is(':hidden')) {\n            _this.down($target);\n            $target.find('li').first().focus();\n          }\n        },\n        close: function() {\n          if ($target.length && !$target.is(':hidden')) { // close active sub of this item\n            _this.up($target);\n          } else if ($element.parent('[data-submenu]').length) { // close currently open sub\n            _this.up($element.parent('[data-submenu]'));\n            $element.parents('li').first().focus();\n          }\n        },\n        up: function() {\n          $prevElement.focus();\n        },\n        down: function() {\n          $nextElement.focus();\n        },\n        toggle: function() {\n          if ($element.children('[data-submenu]').length) {\n            _this.toggle($element.children('[data-submenu]'));\n          }\n        },\n        closeAll: function() {\n          _this.hideAll();\n        },\n        handled: function() {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n      });\n    });//.attr('tabindex', 0);\n  };\n  /**\n   * Closes all panes of the menu.\n   * @function\n   */\n  AccordionMenu.prototype.hideAll = function(){\n    this.$element.find('[data-submenu]').slideUp(this.options.slideSpeed);\n  };\n  /**\n   * Toggles the open/close state of a submenu.\n   * @function\n   * @param {jQuery} $target - the submenu to toggle\n   */\n  AccordionMenu.prototype.toggle = function($target){\n    if (!$target.is(':hidden')) {\n      this.up($target);\n    }\n    else {\n      this.down($target);\n    }\n  };\n  /**\n   * Opens the sub-menu defined by `$target`.\n   * @param {jQuery} $target - Sub-menu to open.\n   * @fires AccordionMenu#down\n   */\n  AccordionMenu.prototype.down = function($target) {\n    var _this = this;\n    console.log($target);\n    if(!this.options.multiOpen){\n      this.up(this.$element.find('.is-active').not($target.parentsUntil(this.$element)));\n    }\n\n    $target.addClass('is-active').attr({'aria-hidden': false})\n      .parent('.has-submenu').attr({'aria-expanded': true, 'aria-selected': true});\n\n      Foundation.Move(this.options.slideSpeed, $target, function(){\n        $target.slideDown(_this.options.slideSpeed);\n      });\n    /**\n     * Fires when the menu is done collapsing up.\n     * @event AccordionMenu#down\n     */\n    this.$element.trigger('down.zf.accordionMenu', [$target]);\n  };\n\n  /**\n   * Closes the sub-menu defined by `$target`. All sub-menus inside the target will be closed as well.\n   * @param {jQuery} $target - Sub-menu to close.\n   * @fires AccordionMenu#up\n   */\n  AccordionMenu.prototype.up = function($target) {\n    var _this = this;\n    Foundation.Move(this.options.slideSpeed, $target, function(){\n      $target.slideUp(_this.options.slideSpeed);\n    });\n    $target.attr('aria-hidden', true)\n           .find('[data-submenu]').slideUp(0).attr('aria-hidden', true).end()\n           .parent('.has-submenu')\n           .attr({'aria-expanded': false, 'aria-selected': false});\n    // $target.slideUp(this.options.slideSpeed, function() {\n    //   $target.find('[data-submenu]').slideUp(0).attr('aria-hidden', true);\n    // }).attr('aria-hidden', true).parent('.has-submenu').attr({'aria-expanded': false, 'aria-selected': false});\n\n    /**\n     * Fires when the menu is done collapsing up.\n     * @event AccordionMenu#up\n     */\n    this.$element.trigger('up.zf.accordionMenu', [$target]);\n  };\n\n  /**\n   * Destroys an instance of accordion menu.\n   * @fires AccordionMenu#destroyed\n   */\n  AccordionMenu.prototype.destroy = function(){\n    this.$element.find('[data-submenu]').slideDown(0).css('display', '');\n    this.$element.find('a').off('click.zf.accordionMenu');\n\n    Foundation.Nest.Burn(this.$element, 'accordion');\n    Foundation.unregisterPlugin(this);\n  };\n\n  Foundation.plugin(AccordionMenu, 'AccordionMenu');\n}(jQuery, window.Foundation);\n"]},"hash":"d4b060e158f1a2a0afb136966c4a2341db5e81db"}
