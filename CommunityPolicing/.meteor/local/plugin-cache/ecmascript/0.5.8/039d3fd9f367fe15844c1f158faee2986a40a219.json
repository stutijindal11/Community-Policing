{"metadata":{"usedHelpers":["typeof"],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/packages/anbuselvan:meteor-toggle-switch/vendor/css-toggle-switch/bower_components/foundation-sites/dist/foundation.js","filenameRelative":"/packages/anbuselvan:meteor-toggle-switch/vendor/css-toggle-switch/bower_components/foundation-sites/dist/foundation.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/packages/anbuselvan:meteor-toggle-switch/vendor/css-toggle-switch/bower_components/foundation-sites/dist/foundation.js.map","sourceFileName":"/packages/anbuselvan:meteor-toggle-switch/vendor/css-toggle-switch/bower_components/foundation-sites/dist/foundation.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"foundation"},"ignored":false,"code":"var _typeof;module.import('babel-runtime/helpers/typeof',{\"default\":function(v){_typeof=v}});\n!function ($) {\n\n  \"use strict\";\n\n  var FOUNDATION_VERSION = '6.0.1';\n\n  // Global Foundation object\n  // This is attached to the window, or used as a module for AMD/Browserify\n  var Foundation = {\n    version: FOUNDATION_VERSION,\n\n    /**\n     * Stores initialized plugins.\n     */\n    _plugins: {},\n\n    /**\n     * Stores generated unique ids for plugin instances\n     */\n    _uuids: [],\n    /**\n     * Stores currently active plugins.\n     */\n    _activePlugins: {},\n\n    /**\n     * Returns a boolean for RTL support\n     */\n    rtl: function rtl() {\n      return $('html').attr('dir') === 'rtl';\n    },\n    /**\n     * Defines a Foundation plugin, adding it to the `Foundation` namespace and the list of plugins to initialize when reflowing.\n     * @param {Object} plugin - The constructor of the plugin.\n     */\n    plugin: function plugin(_plugin, name) {\n      // Object key to use when adding to global Foundation object\n      // Examples: Foundation.Reveal, Foundation.OffCanvas\n      var className = name || functionName(_plugin);\n      // Object key to use when storing the plugin, also used to create the identifying data attribute for the plugin\n      // Examples: data-reveal, data-off-canvas\n      var attrName = hyphenate(className);\n\n      // Add to the Foundation object and the plugins list (for reflowing)\n      this._plugins[attrName] = this[className] = _plugin;\n    },\n    /**\n     * @function\n     * Creates a pointer to an instance of a Plugin within the Foundation._activePlugins object.\n     * Sets the `[data-pluginName=\"uniqueIdHere\"]`, allowing easy access to any plugin's internal methods.\n     * Also fires the initialization event for each plugin, consolidating repeditive code.\n     * @param {Object} plugin - an instance of a plugin, usually `this` in context.\n     * @fires Plugin#init\n     */\n    registerPlugin: function registerPlugin(plugin) {\n      var pluginName = functionName(plugin.constructor).toLowerCase();\n\n      plugin.uuid = this.GetYoDigits(6, pluginName);\n      plugin.$element.attr('data-' + pluginName, plugin.uuid)\n      /**\n       * Fires when the plugin has initialized.\n       * @event Plugin#init\n       */\n      .trigger('init.zf.' + pluginName);\n\n      this._activePlugins[plugin.uuid] = plugin;\n\n      return;\n    },\n    /**\n     * @function\n     * Removes the pointer for an instance of a Plugin from the Foundation._activePlugins obj.\n     * Also fires the destroyed event for the plugin, consolidating repeditive code.\n     * @param {Object} plugin - an instance of a plugin, usually `this` in context.\n     * @fires Plugin#destroyed\n     */\n    unregisterPlugin: function unregisterPlugin(plugin) {\n      var pluginName = functionName(plugin.constructor).toLowerCase();\n\n      delete this._activePlugins[plugin.uuid];\n      plugin.$element.removeAttr('data-' + pluginName)\n      /**\n       * Fires when the plugin has been destroyed.\n       * @event Plugin#destroyed\n       */\n      .trigger('destroyed.zf.' + pluginName);\n\n      return;\n    },\n\n    /**\n     * @function\n     * Causes one or more active plugins to re-initialize, resetting event listeners, recalculating positions, etc.\n     * @param {String} plugins - optional string of an individual plugin key, attained by calling `$(element).data('pluginName')`, or string of a plugin class i.e. `'dropdown'`\n     * @default If no argument is passed, reflow all currently active plugins.\n     */\n    _reflow: function _reflow(plugins) {\n      var actvPlugins = Object.keys(this._activePlugins);\n      var _this = this;\n\n      if (!plugins) {\n        actvPlugins.forEach(function (p) {\n          _this._activePlugins[p]._init();\n        });\n      } else if (typeof plugins === 'string') {\n        var namespace = plugins.split('-')[1];\n\n        if (namespace) {\n\n          this._activePlugins[plugins]._init();\n        } else {\n          namespace = new RegExp(plugins, 'i');\n\n          actvPlugins.filter(function (p) {\n            return namespace.test(p);\n          }).forEach(function (p) {\n            _this._activePlugins[p]._init();\n          });\n        }\n      }\n    },\n\n    /**\n     * returns a random base-36 uid with namespacing\n     * @function\n     * @param {Number} length - number of random base-36 digits desired. Increase for more random strings.\n     * @param {String} namespace - name of plugin to be incorporated in uid, optional.\n     * @default {String} '' - if no plugin name is provided, nothing is appended to the uid.\n     * @returns {String} - unique id\n     */\n    GetYoDigits: function GetYoDigits(length, namespace) {\n      length = length || 6;\n      return Math.round(Math.pow(36, length + 1) - Math.random() * Math.pow(36, length)).toString(36).slice(1) + (namespace ? '-' + namespace : '');\n    },\n    /**\n     * Initialize plugins on any elements within `elem` (and `elem` itself) that aren't already initialized.\n     * @param {Object} elem - jQuery object containing the element to check inside. Also checks the element itself, unless it's the `document` object.\n     * @param {String|Array} plugins - A list of plugins to initialize. Leave this out to initialize everything.\n     */\n    reflow: function reflow(elem, plugins) {\n      // If plugins is undefined, just grab everything\n      if (typeof plugins === 'undefined') {\n        plugins = Object.keys(this._plugins);\n      }\n      // If plugins is a string, convert it to an array with one item\n      else if (typeof plugins === 'string') {\n          plugins = [plugins];\n        }\n\n      var _this = this;\n\n      // Iterate through each plugin\n      $.each(plugins, function (i, name) {\n        // Get the current plugin\n        var plugin = _this._plugins[name];\n\n        // Localize the search to all elements inside elem, as well as elem itself, unless elem === document\n        var $elem = $(elem).find('[data-' + name + ']').addBack('*');\n\n        // For each plugin found, initialize it\n        $elem.each(function () {\n          // Don't double-dip on plugins\n          if ($(this).attr('zf-plugin')) {\n            console.warn(\"Tried to initialize \" + name + \" on an element that already has a Foundation plugin.\");\n            return;\n          }\n          $(this).data('zf-plugin', new plugin($(this)));\n        });\n      });\n    },\n    getFnName: functionName,\n    transitionend: function transitionend($elem) {\n      var transitions = {\n        'transition': 'transitionend',\n        'WebkitTransition': 'webkitTransitionEnd',\n        'MozTransition': 'transitionend',\n        'OTransition': 'otransitionend'\n      };\n      var elem = document.createElement('div'),\n          end;\n\n      for (var t in transitions) {\n        if (typeof elem.style[t] !== 'undefined') {\n          end = transitions[t];\n        }\n      }\n      if (end) {\n        return end;\n      } else {\n        end = setTimeout(function () {\n          $elem.triggerHandler('transitionend', [$elem]);\n        }, 1);\n        return 'transitionend';\n      }\n    }\n  };\n\n  Foundation.util = {\n    /**\n     * Function for applying a debounce effect to a function call.\n     * @function\n     * @param {Function} func - Function to be called at end of timeout.\n     * @param {Number} delay - Time in ms to delay the call of `func`.\n     * @returns function\n     */\n    throttle: function throttle(func, delay) {\n      var timer = null;\n\n      return function () {\n        var context = this,\n            args = arguments;\n\n        if (timer === null) {\n          timer = setTimeout(function () {\n            func.apply(context, args);\n            timer = null;\n          }, delay);\n        }\n      };\n    }\n  };\n\n  // TODO: consider not making this a jQuery function\n  // TODO: need way to reflow vs. re-initialize\n  /**\n   * The Foundation jQuery method.\n   * @param {String|Array} method - An action to perform on the current jQuery object.\n   */\n  var foundation = function foundation(method) {\n    var type = typeof method === 'undefined' ? 'undefined' : _typeof(method),\n        $meta = $('meta.foundation-mq'),\n        $noJS = $('.no-js');\n\n    if (!$meta.length) {\n      $('<meta class=\"foundation-mq\">').appendTo(document.head);\n    }\n    if ($noJS.length) {\n      $noJS.removeClass('no-js');\n    }\n\n    if (type === 'undefined') {\n      //needs to initialize the Foundation object, or an individual plugin.\n      Foundation.MediaQuery._init();\n      Foundation.reflow(this);\n    } else if (type === 'string') {\n      //an individual method to invoke on a plugin or group of plugins\n      var args = Array.prototype.slice.call(arguments, 1); //collect all the arguments, if necessary\n      var plugClass = this.data('zfPlugin'); //determine the class of plugin\n\n      if (plugClass !== undefined && plugClass[method] !== undefined) {\n        //make sure both the class and method exist\n        if (this.length === 1) {\n          //if there's only one, call it directly.\n          plugClass[method].apply(plugClass, args);\n        } else {\n          this.each(function (i, el) {\n            //otherwise loop through the jQuery collection and invoke the method on each\n            plugClass[method].apply($(el).data('zfPlugin'), args);\n          });\n        }\n      } else {\n        //error for no class or no method\n        throw new ReferenceError(\"We're sorry, '\" + method + \"' is not an available method for \" + (plugClass ? functionName(plugClass) : 'this element') + '.');\n      }\n    } else {\n      //error for invalid argument type\n      throw new TypeError(\"We're sorry, '\" + type + \"' is not a valid parameter. You must use a string representing the method you wish to invoke.\");\n    }\n    return this;\n  };\n\n  window.Foundation = Foundation;\n  $.fn.foundation = foundation;\n\n  // Polyfill for requestAnimationFrame\n  (function () {\n    if (!Date.now || !window.Date.now) window.Date.now = Date.now = function () {\n      return new Date().getTime();\n    };\n\n    var vendors = ['webkit', 'moz'];\n    for (var i = 0; i < vendors.length && !window.requestAnimationFrame; ++i) {\n      var vp = vendors[i];\n      window.requestAnimationFrame = window[vp + 'RequestAnimationFrame'];\n      window.cancelAnimationFrame = window[vp + 'CancelAnimationFrame'] || window[vp + 'CancelRequestAnimationFrame'];\n    }\n    if (/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent) || !window.requestAnimationFrame || !window.cancelAnimationFrame) {\n      var lastTime = 0;\n      window.requestAnimationFrame = function (callback) {\n        var now = Date.now();\n        var nextTime = Math.max(lastTime + 16, now);\n        return setTimeout(function () {\n          callback(lastTime = nextTime);\n        }, nextTime - now);\n      };\n      window.cancelAnimationFrame = clearTimeout;\n    }\n    /**\n     * Polyfill for performance.now, required by rAF\n     */\n    if (!window.performance || !window.performance.now) {\n      window.performance = {\n        start: Date.now(),\n        now: function now() {\n          return Date.now() - this.start;\n        }\n      };\n    }\n  })();\n  if (!Function.prototype.bind) {\n    Function.prototype.bind = function (oThis) {\n      if (typeof this !== 'function') {\n        // closest thing possible to the ECMAScript 5\n        // internal IsCallable function\n        throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\n      }\n\n      var aArgs = Array.prototype.slice.call(arguments, 1),\n          fToBind = this,\n          fNOP = function fNOP() {},\n          fBound = function fBound() {\n        return fToBind.apply(this instanceof fNOP ? this : oThis, aArgs.concat(Array.prototype.slice.call(arguments)));\n      };\n\n      if (this.prototype) {\n        // native functions don't have a prototype\n        fNOP.prototype = this.prototype;\n      }\n      fBound.prototype = new fNOP();\n\n      return fBound;\n    };\n  }\n  // Polyfill to get the name of a function in IE9\n  function functionName(fn) {\n    if (Function.prototype.name === undefined) {\n      var funcNameRegex = /function\\s([^(]{1,})\\(/;\n      var results = funcNameRegex.exec(fn.toString());\n      return results && results.length > 1 ? results[1].trim() : \"\";\n    } else if (fn.prototype === undefined) {\n      return fn.constructor.name;\n    } else {\n      return fn.prototype.constructor.name;\n    }\n  }\n\n  // Convert PascalCase to kebab-case\n  // Thank you: http://stackoverflow.com/a/8955580\n  function hyphenate(str) {\n    return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n  }\n}(jQuery);\n\n!function (Foundation, window) {\n  /**\n   * Compares the dimensions of an element to a container and determines collision events with container.\n   * @function\n   * @param {jQuery} element - jQuery object to test for collisions.\n   * @param {jQuery} parent - jQuery object to use as bounding container.\n   * @param {Boolean} lrOnly - set to true to check left and right values only.\n   * @param {Boolean} tbOnly - set to true to check top and bottom values only.\n   * @default if no parent object passed, detects collisions with `window`.\n   * @returns {Boolean} - true if collision free, false if a collision in any direction.\n   */\n  var ImNotTouchingYou = function ImNotTouchingYou(element, parent, lrOnly, tbOnly) {\n    var eleDims = GetDimensions(element),\n        top,\n        bottom,\n        left,\n        right;\n\n    if (parent) {\n      var parDims = GetDimensions(parent);\n\n      bottom = eleDims.offset.top + eleDims.height <= parDims.height + parDims.offset.top;\n      top = eleDims.offset.top >= parDims.offset.top;\n      left = eleDims.offset.left >= parDims.offset.left;\n      right = eleDims.offset.left + eleDims.width <= parDims.width;\n    } else {\n      bottom = eleDims.offset.top + eleDims.height <= eleDims.windowDims.height + eleDims.windowDims.offset.top;\n      top = eleDims.offset.top >= eleDims.windowDims.offset.top;\n      left = eleDims.offset.left >= eleDims.windowDims.offset.left;\n      right = eleDims.offset.left + eleDims.width <= eleDims.windowDims.width;\n    }\n    var allDirs = [bottom, top, left, right];\n\n    if (lrOnly) {\n      return left === right === true;\n    }\n    if (tbOnly) {\n      return top === bottom === true;\n    }\n\n    return allDirs.indexOf(false) === -1;\n  };\n\n  /**\n   * Uses native methods to return an object of dimension values.\n   * @function\n   * @param {jQuery || HTML} element - jQuery object or DOM element for which to get the dimensions. Can be any element other that document or window.\n   * @returns {Object} - nested object of integer pixel values\n   * TODO - if element is window, return only those values.\n   */\n  var GetDimensions = function GetDimensions(elem, test) {\n    elem = elem.length ? elem[0] : elem;\n\n    if (elem === window || elem === document) {\n      throw new Error(\"I'm sorry, Dave. I'm afraid I can't do that.\");\n    }\n\n    var rect = elem.getBoundingClientRect(),\n        parRect = elem.parentNode.getBoundingClientRect(),\n        winRect = document.body.getBoundingClientRect(),\n        winY = window.pageYOffset,\n        winX = window.pageXOffset;\n\n    return {\n      width: rect.width,\n      height: rect.height,\n      offset: {\n        top: rect.top + winY,\n        left: rect.left + winX\n      },\n      parentDims: {\n        width: parRect.width,\n        height: parRect.height,\n        offset: {\n          top: parRect.top + winY,\n          left: parRect.left + winX\n        }\n      },\n      windowDims: {\n        width: winRect.width,\n        height: winRect.height,\n        offset: {\n          top: winY,\n          left: winX\n        }\n      }\n    };\n  };\n  /**\n   * Returns an object of top and left integer pixel values for dynamically rendered elements,\n   * such as: Tooltip, Reveal, and Dropdown\n   * @function\n   * @param {jQuery} element - jQuery object for the element being positioned.\n   * @param {jQuery} anchor - jQuery object for the element's anchor point.\n   * @param {String} position - a string relating to the desired position of the element, relative to it's anchor\n   * @param {Number} vOffset - integer pixel value of desired vertical separation between anchor and element.\n   * @param {Number} hOffset - integer pixel value of desired horizontal separation between anchor and element.\n   * @param {Boolean} isOverflow - if a collision event is detected, sets to true to default the element to full width - any desired offset.\n   * TODO alter/rewrite to work with `em` values as well/instead of pixels\n   */\n  var GetOffsets = function GetOffsets(element, anchor, position, vOffset, hOffset, isOverflow) {\n    var $eleDims = GetDimensions(element),\n\n    // var $eleDims = GetDimensions(element),\n    $anchorDims = anchor ? GetDimensions(anchor) : null;\n    // $anchorDims = anchor ? GetDimensions(anchor) : null;\n    switch (position) {\n      case 'top':\n        return {\n          left: $anchorDims.offset.left,\n          top: $anchorDims.offset.top - ($eleDims.height + vOffset)\n        };\n        break;\n      case 'left':\n        return {\n          left: $anchorDims.offset.left - ($eleDims.width + hOffset),\n          top: $anchorDims.offset.top\n        };\n        break;\n      case 'right':\n        return {\n          left: $anchorDims.offset.left + $anchorDims.width + hOffset,\n          top: $anchorDims.offset.top\n        };\n        break;\n      case 'center top':\n        return {\n          left: $anchorDims.offset.left + $anchorDims.width / 2 - $eleDims.width / 2,\n          top: $anchorDims.offset.top - ($eleDims.height + vOffset)\n        };\n        break;\n      case 'center bottom':\n        return {\n          left: isOverflow ? hOffset : $anchorDims.offset.left + $anchorDims.width / 2 - $eleDims.width / 2,\n          top: $anchorDims.offset.top + $anchorDims.height + vOffset\n        };\n        break;\n      case 'center left':\n        return {\n          left: $anchorDims.offset.left - ($eleDims.width + hOffset),\n          top: $anchorDims.offset.top + $anchorDims.height / 2 - $eleDims.height / 2\n        };\n        break;\n      case 'center right':\n        return {\n          left: $anchorDims.offset.left + $anchorDims.width + hOffset + 1,\n          top: $anchorDims.offset.top + $anchorDims.height / 2 - $eleDims.height / 2\n        };\n        break;\n      case 'center':\n        return {\n          left: $eleDims.windowDims.offset.left + $eleDims.windowDims.width / 2 - $eleDims.width / 2,\n          top: $eleDims.windowDims.offset.top + $eleDims.windowDims.height / 2 - $eleDims.height / 2\n        };\n        break;\n      case 'reveal':\n        return {\n          left: ($eleDims.windowDims.width - $eleDims.width) / 2,\n          top: $eleDims.windowDims.offset.top + vOffset\n        };\n      case 'reveal full':\n        return {\n          left: $eleDims.windowDims.offset.left,\n          top: $eleDims.windowDims.offset.top\n        };\n        break;\n      default:\n        return {\n          left: $anchorDims.offset.left,\n          top: $anchorDims.offset.top + $anchorDims.height + vOffset\n        };\n    }\n  };\n  Foundation.Box = {\n    ImNotTouchingYou: ImNotTouchingYou,\n    GetDimensions: GetDimensions,\n    GetOffsets: GetOffsets\n  };\n}(window.Foundation, window);\n\n/*******************************************\n *                                         *\n * This util was created by Marius Olbertz *\n * Please thank Marius on GitHub /owlbertz *\n * or the web http://www.mariusolbertz.de/ *\n *                                         *\n ******************************************/\n!function ($, Foundation) {\n  'use strict';\n\n  Foundation.Keyboard = {};\n\n  var keyCodes = {\n    9: 'TAB',\n    13: 'ENTER',\n    27: 'ESCAPE',\n    32: 'SPACE',\n    37: 'ARROW_LEFT',\n    38: 'ARROW_UP',\n    39: 'ARROW_RIGHT',\n    40: 'ARROW_DOWN'\n  };\n\n  // constants for easier comparing Can be used like Foundation.parseKey(event) === Foundation.keys.SPACE\n  var keys = function (kcs) {\n    var k = {};\n    for (var kc in kcs) {\n      k[kcs[kc]] = kcs[kc];\n    }return k;\n  }(keyCodes);\n\n  Foundation.Keyboard.keys = keys;\n\n  /**\n   * Parses the (keyboard) event and returns a String that represents its key\n   * Can be used like Foundation.parseKey(event) === Foundation.keys.SPACE\n   * @param {Event} event - the event generated by the event handler\n   * @return String key - String that represents the key pressed\n   */\n  var parseKey = function parseKey(event) {\n    var key = keyCodes[event.which || event.keyCode] || String.fromCharCode(event.which).toUpperCase();\n    if (event.shiftKey) key = 'SHIFT_' + key;\n    if (event.ctrlKey) key = 'CTRL_' + key;\n    if (event.altKey) key = 'ALT_' + key;\n    return key;\n  };\n  Foundation.Keyboard.parseKey = parseKey;\n\n  // plain commands per component go here, ltr and rtl are merged based on orientation\n  var commands = {};\n\n  /**\n   * Handles the given (keyboard) event\n   * @param {Event} event - the event generated by the event handler\n   * @param {Object} component - Foundation component, e.g. Slider or Reveal\n   * @param {Objects} functions - collection of functions that are to be executed\n   */\n  var handleKey = function handleKey(event, component, functions) {\n    var commandList = commands[Foundation.getFnName(component)],\n        keyCode = parseKey(event),\n        cmds,\n        command,\n        fn;\n    if (!commandList) return console.warn('Component not defined!');\n\n    if (typeof commandList.ltr === 'undefined') {\n      // this component does not differentiate between ltr and rtl\n      cmds = commandList; // use plain list\n    } else {\n        // merge ltr and rtl: if document is rtl, rtl overwrites ltr and vice versa\n        if (Foundation.rtl()) cmds = $.extend({}, commandList.ltr, commandList.rtl);else cmds = $.extend({}, commandList.rtl, commandList.ltr);\n      }\n    command = cmds[keyCode];\n\n    fn = functions[command];\n    if (fn && typeof fn === 'function') {\n      // execute function with context of the component if exists\n      fn.apply(component);\n      if (functions.handled || typeof functions.handled === 'function') {\n        // execute function when event was handled\n        functions.handled.apply(component);\n      }\n    } else {\n      if (functions.unhandled || typeof functions.unhandled === 'function') {\n        // execute function when event was not handled\n        functions.unhandled.apply(component);\n      }\n    }\n  };\n  Foundation.Keyboard.handleKey = handleKey;\n\n  /**\n   * Finds all focusable elements within the given `$element`\n   * @param {jQuery} $element - jQuery object to search within\n   * @return {jQuery} $focusable - all focusable elements within `$element`\n   */\n  var findFocusable = function findFocusable($element) {\n    return $element.find('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]').filter(function () {\n      if (!$(this).is(':visible') || $(this).attr('tabindex') < 0) {\n        return false;\n      } //only have visible elements and those that have a tabindex greater or equal 0\n      return true;\n    });\n  };\n  Foundation.Keyboard.findFocusable = findFocusable;\n\n  /**\n   * Returns the component name name\n   * @param {Object} component - Foundation component, e.g. Slider or Reveal\n   * @return String componentName\n   */\n\n  var register = function register(componentName, cmds) {\n    commands[componentName] = cmds;\n  };\n  Foundation.Keyboard.register = register;\n}(jQuery, window.Foundation);\n\n!function ($, Foundation) {\n\n  // Default set of media queries\n  var defaultQueries = {\n    'default': 'only screen',\n    landscape: 'only screen and (orientation: landscape)',\n    portrait: 'only screen and (orientation: portrait)',\n    retina: 'only screen and (-webkit-min-device-pixel-ratio: 2),' + 'only screen and (min--moz-device-pixel-ratio: 2),' + 'only screen and (-o-min-device-pixel-ratio: 2/1),' + 'only screen and (min-device-pixel-ratio: 2),' + 'only screen and (min-resolution: 192dpi),' + 'only screen and (min-resolution: 2dppx)'\n  };\n\n  var MediaQuery = {\n    queries: [],\n    current: '',\n\n    /**\n     * Checks if the screen is at least as wide as a breakpoint.\n     * @function\n     * @param {String} size - Name of the breakpoint to check.\n     * @returns {Boolean} `true` if the breakpoint matches, `false` if it's smaller.\n     */\n    atLeast: function atLeast(size) {\n      var query = this.get(size);\n\n      if (query) {\n        return window.matchMedia(query).matches;\n      }\n\n      return false;\n    },\n\n    /**\n     * Gets the media query of a breakpoint.\n     * @function\n     * @param {String} size - Name of the breakpoint to get.\n     * @returns {String|null} - The media query of the breakpoint, or `null` if the breakpoint doesn't exist.\n     */\n    get: function get(size) {\n      for (var i in this.queries) {\n        var query = this.queries[i];\n        if (size === query.name) return query.value;\n      }\n\n      return null;\n    },\n\n    /**\n     * Initializes the media query helper, by extracting the breakpoint list from the CSS and activating the breakpoint watcher.\n     * @function\n     * @private\n     */\n    _init: function _init() {\n      var self = this;\n      var extractedStyles = $('.foundation-mq').css('font-family');\n      var namedQueries;\n\n      namedQueries = parseStyleToObject(extractedStyles);\n\n      for (var key in namedQueries) {\n        self.queries.push({\n          name: key,\n          value: 'only screen and (min-width: ' + namedQueries[key] + ')'\n        });\n      }\n\n      this.current = this._getCurrentSize();\n\n      this._watcher();\n\n      // Extend default queries\n      // namedQueries = $.extend(defaultQueries, namedQueries);\n    },\n\n    /**\n     * Gets the current breakpoint name by testing every breakpoint and returning the last one to match (the biggest one).\n     * @function\n     * @private\n     * @returns {String} Name of the current breakpoint.\n     */\n    _getCurrentSize: function _getCurrentSize() {\n      var matched;\n\n      for (var i in this.queries) {\n        var query = this.queries[i];\n\n        if (window.matchMedia(query.value).matches) {\n          matched = query;\n        }\n      }\n\n      if ((typeof matched === 'undefined' ? 'undefined' : _typeof(matched)) === 'object') {\n        return matched.name;\n      } else {\n        return matched;\n      }\n    },\n\n    /**\n     * Activates the breakpoint watcher, which fires an event on the window whenever the breakpoint changes.\n     * @function\n     * @private\n     */\n    _watcher: function _watcher() {\n      var _this = this;\n\n      $(window).on('resize.zf.mediaquery', function () {\n        var newSize = _this._getCurrentSize();\n\n        if (newSize !== _this.current) {\n          // Broadcast the media query change on the window\n          $(window).trigger('changed.zf.mediaquery', [newSize, _this.current]);\n\n          // Change the current media query\n          _this.current = newSize;\n        }\n      });\n    }\n  };\n\n  Foundation.MediaQuery = MediaQuery;\n\n  // matchMedia() polyfill - Test a CSS media type/query in JS.\n  // Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas, David Knight. Dual MIT/BSD license\n  window.matchMedia || (window.matchMedia = function () {\n    'use strict';\n\n    // For browsers that support matchMedium api such as IE 9 and webkit\n\n    var styleMedia = window.styleMedia || window.media;\n\n    // For those that don't support matchMedium\n    if (!styleMedia) {\n      var style = document.createElement('style'),\n          script = document.getElementsByTagName('script')[0],\n          info = null;\n\n      style.type = 'text/css';\n      style.id = 'matchmediajs-test';\n\n      script.parentNode.insertBefore(style, script);\n\n      // 'style.currentStyle' is used by IE <= 8 and 'window.getComputedStyle' for all other browsers\n      info = 'getComputedStyle' in window && window.getComputedStyle(style, null) || style.currentStyle;\n\n      styleMedia = {\n        matchMedium: function matchMedium(media) {\n          var text = '@media ' + media + '{ #matchmediajs-test { width: 1px; } }';\n\n          // 'style.styleSheet' is used by IE <= 8 and 'style.textContent' for all other browsers\n          if (style.styleSheet) {\n            style.styleSheet.cssText = text;\n          } else {\n            style.textContent = text;\n          }\n\n          // Test if media query is true or false\n          return info.width === '1px';\n        }\n      };\n    }\n\n    return function (media) {\n      return {\n        matches: styleMedia.matchMedium(media || 'all'),\n        media: media || 'all'\n      };\n    };\n  }());\n\n  // Thank you: https://github.com/sindresorhus/query-string\n  function parseStyleToObject(str) {\n    var styleObject = {};\n\n    if (typeof str !== 'string') {\n      return styleObject;\n    }\n\n    str = str.trim().slice(1, -1); // browsers re-quote string style values\n\n    if (!str) {\n      return styleObject;\n    }\n\n    styleObject = str.split('&').reduce(function (ret, param) {\n      var parts = param.replace(/\\+/g, ' ').split('=');\n      var key = parts[0];\n      var val = parts[1];\n      key = decodeURIComponent(key);\n\n      // missing `=` should be `null`:\n      // http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n      val = val === undefined ? null : decodeURIComponent(val);\n\n      if (!ret.hasOwnProperty(key)) {\n        ret[key] = val;\n      } else if (Array.isArray(ret[key])) {\n        ret[key].push(val);\n      } else {\n        ret[key] = [ret[key], val];\n      }\n      return ret;\n    }, {});\n\n    return styleObject;\n  }\n}(jQuery, Foundation);\n\n/**\n * Motion module.\n * @module foundation.motion\n */\n!function ($, Foundation) {\n\n  var initClasses = ['mui-enter', 'mui-leave'];\n  var activeClasses = ['mui-enter-active', 'mui-leave-active'];\n\n  function animate(isIn, element, animation, cb) {\n    element = $(element).eq(0);\n\n    if (!element.length) return;\n\n    var initClass = isIn ? initClasses[0] : initClasses[1];\n    var activeClass = isIn ? activeClasses[0] : activeClasses[1];\n\n    // Set up the animation\n    reset();\n    element.addClass(animation).css('transition', 'none');\n    //  .addClass(initClass);\n    // if(isIn) element.show();\n    requestAnimationFrame(function () {\n      element.addClass(initClass);\n      if (isIn) element.show();\n    });\n    // Start the animation\n    requestAnimationFrame(function () {\n      element[0].offsetWidth;\n      element.css('transition', '');\n      element.addClass(activeClass);\n    });\n    // Move(500, element, function(){\n    //   // element[0].offsetWidth;\n    //   element.css('transition', '');\n    //   element.addClass(activeClass);\n    // });\n\n    // Clean up the animation when it finishes\n    element.one(Foundation.transitionend(element), finish); //.one('finished.zf.animate', finish);\n\n    // Hides the element (for out animations), resets the element, and runs a callback\n    function finish() {\n      if (!isIn) element.hide();\n      reset();\n      if (cb) cb.apply(element);\n    }\n\n    // Resets transitions and removes motion-specific classes\n    function reset() {\n      element[0].style.transitionDuration = 0;\n      element.removeClass(initClass + ' ' + activeClass + ' ' + animation);\n    }\n  }\n\n  var Motion = {\n    animateIn: function animateIn(element, animation, /*duration,*/cb) {\n      animate(true, element, animation, cb);\n    },\n\n    animateOut: function animateOut(element, animation, /*duration,*/cb) {\n      animate(false, element, animation, cb);\n    }\n  };\n\n  var Move = function Move(duration, elem, fn) {\n    var anim,\n        prog,\n        start = null;\n    // console.log('called');\n\n    function move(ts) {\n      if (!start) start = window.performance.now();\n      // console.log(start, ts);\n      prog = ts - start;\n      fn.apply(elem);\n\n      if (prog < duration) {\n        anim = window.requestAnimationFrame(move, elem);\n      } else {\n        window.cancelAnimationFrame(anim);\n        elem.trigger('finished.zf.animate', [elem]).triggerHandler('finished.zf.animate', [elem]);\n      }\n    }\n    anim = window.requestAnimationFrame(move);\n  };\n\n  Foundation.Move = Move;\n  Foundation.Motion = Motion;\n}(jQuery, Foundation);\n\n!function ($, Foundation) {\n  'use strict';\n\n  Foundation.Nest = {\n    Feather: function Feather(menu, type) {\n      menu.attr('role', 'menubar');\n      type = type || 'zf';\n      var items = menu.find('li').attr({ 'role': 'menuitem' }),\n          subMenuClass = 'is-' + type + '-submenu',\n          subItemClass = subMenuClass + '-item',\n          hasSubClass = 'is-' + type + '-submenu-parent';\n\n      items.each(function () {\n        var $item = $(this),\n            $sub = $item.children('ul');\n        if ($sub.length) {\n          $item.addClass('has-submenu ' + hasSubClass);\n          $sub.addClass('submenu ' + subMenuClass).attr('data-submenu', '');\n        }\n        if ($item.parent('[data-submenu]').length) {\n          $item.addClass('is-submenu-item ' + subItemClass);\n        }\n      });\n      return;\n    },\n    Burn: function Burn(menu, type) {\n      var items = menu.find('li').removeAttr('tabindex'),\n          subMenuClass = 'is-' + type + '-submenu',\n          subItemClass = subMenuClass + '-item',\n          hasSubClass = 'is-' + type + '-submenu-parent';\n\n      // menu.find('.is-active').removeClass('is-active');\n      menu.find('*')\n      // menu.find('.' + subMenuClass + ', .' + subItemClass + ', .is-active, .has-submenu, .is-submenu-item, .submenu, [data-submenu]')\n      .removeClass(subMenuClass + ' ' + subItemClass + ' ' + hasSubClass + ' has-submenu is-submenu-item submenu is-active').removeAttr('data-submenu').css('display', '');\n\n      // console.log(      menu.find('.' + subMenuClass + ', .' + subItemClass + ', .has-submenu, .is-submenu-item, .submenu, [data-submenu]')\n      //           .removeClass(subMenuClass + ' ' + subItemClass + ' has-submenu is-submenu-item submenu')\n      //           .removeAttr('data-submenu'));\n      // items.each(function(){\n      //   var $item = $(this),\n      //       $sub = $item.children('ul');\n      //   if($item.parent('[data-submenu]').length){\n      //     $item.removeClass('is-submenu-item ' + subItemClass);\n      //   }\n      //   if($sub.length){\n      //     $item.removeClass('has-submenu');\n      //     $sub.removeClass('submenu ' + subMenuClass).removeAttr('data-submenu');\n      //   }\n      // });\n    }\n  };\n}(jQuery, window.Foundation);\n\n!function ($, Foundation) {\n  'use strict';\n\n  var Timer = function Timer(elem, options, cb) {\n    var _this = this,\n        duration = options.duration,\n        //options is an object for easily adding features later.\n    nameSpace = Object.keys(elem.data())[0] || 'timer',\n        remain = -1,\n        start,\n        timer;\n\n    this.restart = function () {\n      remain = -1;\n      clearTimeout(timer);\n      this.start();\n    };\n\n    this.start = function () {\n      // if(!elem.data('paused')){ return false; }//maybe implement this sanity check if used for other things.\n      clearTimeout(timer);\n      remain = remain <= 0 ? duration : remain;\n      elem.data('paused', false);\n      start = Date.now();\n      timer = setTimeout(function () {\n        if (options.infinite) {\n          _this.restart(); //rerun the timer.\n        }\n        cb();\n      }, remain);\n      elem.trigger('timerstart.zf.' + nameSpace);\n    };\n\n    this.pause = function () {\n      //if(elem.data('paused')){ return false; }//maybe implement this sanity check if used for other things.\n      clearTimeout(timer);\n      elem.data('paused', true);\n      var end = Date.now();\n      remain = remain - (end - start);\n      elem.trigger('timerpaused.zf.' + nameSpace);\n    };\n  };\n  /**\n   * Runs a callback function when images are fully loaded.\n   * @param {Object} images - Image(s) to check if loaded.\n   * @param {Func} callback - Function to execute when image is fully loaded.\n   */\n  var onImagesLoaded = function onImagesLoaded(images, callback) {\n    var self = this,\n        unloaded = images.length;\n\n    if (unloaded === 0) {\n      callback();\n    }\n\n    var singleImageLoaded = function singleImageLoaded() {\n      unloaded--;\n      if (unloaded === 0) {\n        callback();\n      }\n    };\n\n    images.each(function () {\n      if (this.complete) {\n        singleImageLoaded();\n      } else if (typeof this.naturalWidth !== 'undefined' && this.naturalWidth > 0) {\n        singleImageLoaded();\n      } else {\n        $(this).one('load', function () {\n          singleImageLoaded();\n        });\n      }\n    });\n  };\n\n  Foundation.Timer = Timer;\n  Foundation.onImagesLoaded = onImagesLoaded;\n}(jQuery, window.Foundation);\n\n//**************************************************\n//**Work inspired by multiple jquery swipe plugins**\n//**Done by Yohai Ararat ***************************\n//**************************************************\n(function ($) {\n\n  $.spotSwipe = {\n    version: '1.0.0',\n    enabled: 'ontouchstart' in document.documentElement,\n    preventDefault: true,\n    moveThreshold: 75,\n    timeThreshold: 200\n  };\n\n  var startPosX,\n      startPosY,\n      startTime,\n      elapsedTime,\n      isMoving = false;\n\n  function onTouchEnd() {\n    //  alert(this);\n    this.removeEventListener('touchmove', onTouchMove);\n    this.removeEventListener('touchend', onTouchEnd);\n    isMoving = false;\n  }\n\n  function onTouchMove(e) {\n    if ($.spotSwipe.preventDefault) {\n      e.preventDefault();\n    }\n    if (isMoving) {\n      var x = e.touches[0].pageX;\n      var y = e.touches[0].pageY;\n      var dx = startPosX - x;\n      var dy = startPosY - y;\n      var dir;\n      elapsedTime = new Date().getTime() - startTime;\n      if (Math.abs(dx) >= $.spotSwipe.moveThreshold && elapsedTime <= $.spotSwipe.timeThreshold) {\n        dir = dx > 0 ? 'left' : 'right';\n      } else if (Math.abs(dy) >= $.spotSwipe.moveThreshold && elapsedTime <= $.spotSwipe.timeThreshold) {\n        dir = dy > 0 ? 'down' : 'up';\n      }\n      if (dir) {\n        onTouchEnd.call(this);\n        $(this).trigger('swipe', dir).trigger('swipe' + dir);\n      }\n    }\n  }\n\n  function onTouchStart(e) {\n    if (e.touches.length == 1) {\n      startPosX = e.touches[0].pageX;\n      startPosY = e.touches[0].pageY;\n      isMoving = true;\n      startTime = new Date().getTime();\n      this.addEventListener('touchmove', onTouchMove, false);\n      this.addEventListener('touchend', onTouchEnd, false);\n    }\n  }\n\n  function init() {\n    this.addEventListener && this.addEventListener('touchstart', onTouchStart, false);\n  }\n\n  function teardown() {\n    this.removeEventListener('touchstart', onTouchStart);\n  }\n\n  $.event.special.swipe = { setup: init };\n\n  $.each(['left', 'up', 'down', 'right'], function () {\n    $.event.special['swipe' + this] = { setup: function setup() {\n        $(this).on('swipe', $.noop);\n      } };\n  });\n})(jQuery);\n/****************************************************\n * Method for adding psuedo drag events to elements *\n ***************************************************/\n!function ($) {\n  $.fn.addTouch = function () {\n    this.each(function (i, el) {\n      $(el).bind('touchstart touchmove touchend touchcancel', function () {\n        //we pass the original event object because the jQuery event\n        //object is normalized to w3c specs and does not provide the TouchList\n        handleTouch(event);\n      });\n    });\n\n    var handleTouch = function handleTouch(event) {\n      var touches = event.changedTouches,\n          first = touches[0],\n          eventTypes = {\n        touchstart: 'mousedown',\n        touchmove: 'mousemove',\n        touchend: 'mouseup'\n      },\n          type = eventTypes[event.type];\n\n      var simulatedEvent = document.createEvent('MouseEvent');\n      simulatedEvent.initMouseEvent(type, true, true, window, 1, first.screenX, first.screenY, first.clientX, first.clientY, false, false, false, false, 0 /*left*/, null);\n      first.target.dispatchEvent(simulatedEvent);\n    };\n  };\n}(jQuery);\n\n//**********************************\n//**From the jQuery Mobile Library**\n//**need to recreate functionality**\n//**and try to improve if possible**\n//**********************************\n\n/* Removing the jQuery function ****\n************************************\n\n(function( $, window, undefined ) {\n\n\tvar $document = $( document ),\n\t\t// supportTouch = $.mobile.support.touch,\n\t\ttouchStartEvent = 'touchstart'//supportTouch ? \"touchstart\" : \"mousedown\",\n\t\ttouchStopEvent = 'touchend'//supportTouch ? \"touchend\" : \"mouseup\",\n\t\ttouchMoveEvent = 'touchmove'//supportTouch ? \"touchmove\" : \"mousemove\";\n\n\t// setup new event shortcuts\n\t$.each( ( \"touchstart touchmove touchend \" +\n\t\t\"swipe swipeleft swiperight\" ).split( \" \" ), function( i, name ) {\n\n\t\t$.fn[ name ] = function( fn ) {\n\t\t\treturn fn ? this.bind( name, fn ) : this.trigger( name );\n\t\t};\n\n\t\t// jQuery < 1.8\n\t\tif ( $.attrFn ) {\n\t\t\t$.attrFn[ name ] = true;\n\t\t}\n\t});\n\n\tfunction triggerCustomEvent( obj, eventType, event, bubble ) {\n\t\tvar originalType = event.type;\n\t\tevent.type = eventType;\n\t\tif ( bubble ) {\n\t\t\t$.event.trigger( event, undefined, obj );\n\t\t} else {\n\t\t\t$.event.dispatch.call( obj, event );\n\t\t}\n\t\tevent.type = originalType;\n\t}\n\n\t// also handles taphold\n\n\t// Also handles swipeleft, swiperight\n\t$.event.special.swipe = {\n\n\t\t// More than this horizontal displacement, and we will suppress scrolling.\n\t\tscrollSupressionThreshold: 30,\n\n\t\t// More time than this, and it isn't a swipe.\n\t\tdurationThreshold: 1000,\n\n\t\t// Swipe horizontal displacement must be more than this.\n\t\thorizontalDistanceThreshold: window.devicePixelRatio >= 2 ? 15 : 30,\n\n\t\t// Swipe vertical displacement must be less than this.\n\t\tverticalDistanceThreshold: window.devicePixelRatio >= 2 ? 15 : 30,\n\n\t\tgetLocation: function ( event ) {\n\t\t\tvar winPageX = window.pageXOffset,\n\t\t\t\twinPageY = window.pageYOffset,\n\t\t\t\tx = event.clientX,\n\t\t\t\ty = event.clientY;\n\n\t\t\tif ( event.pageY === 0 && Math.floor( y ) > Math.floor( event.pageY ) ||\n\t\t\t\tevent.pageX === 0 && Math.floor( x ) > Math.floor( event.pageX ) ) {\n\n\t\t\t\t// iOS4 clientX/clientY have the value that should have been\n\t\t\t\t// in pageX/pageY. While pageX/page/ have the value 0\n\t\t\t\tx = x - winPageX;\n\t\t\t\ty = y - winPageY;\n\t\t\t} else if ( y < ( event.pageY - winPageY) || x < ( event.pageX - winPageX ) ) {\n\n\t\t\t\t// Some Android browsers have totally bogus values for clientX/Y\n\t\t\t\t// when scrolling/zooming a page. Detectable since clientX/clientY\n\t\t\t\t// should never be smaller than pageX/pageY minus page scroll\n\t\t\t\tx = event.pageX - winPageX;\n\t\t\t\ty = event.pageY - winPageY;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tx: x,\n\t\t\t\ty: y\n\t\t\t};\n\t\t},\n\n\t\tstart: function( event ) {\n\t\t\tvar data = event.originalEvent.touches ?\n\t\t\t\t\tevent.originalEvent.touches[ 0 ] : event,\n\t\t\t\tlocation = $.event.special.swipe.getLocation( data );\n\t\t\treturn {\n\t\t\t\t\t\ttime: ( new Date() ).getTime(),\n\t\t\t\t\t\tcoords: [ location.x, location.y ],\n\t\t\t\t\t\torigin: $( event.target )\n\t\t\t\t\t};\n\t\t},\n\n\t\tstop: function( event ) {\n\t\t\tvar data = event.originalEvent.touches ?\n\t\t\t\t\tevent.originalEvent.touches[ 0 ] : event,\n\t\t\t\tlocation = $.event.special.swipe.getLocation( data );\n\t\t\treturn {\n\t\t\t\t\t\ttime: ( new Date() ).getTime(),\n\t\t\t\t\t\tcoords: [ location.x, location.y ]\n\t\t\t\t\t};\n\t\t},\n\n\t\thandleSwipe: function( start, stop, thisObject, origTarget ) {\n\t\t\tif ( stop.time - start.time < $.event.special.swipe.durationThreshold &&\n\t\t\t\tMath.abs( start.coords[ 0 ] - stop.coords[ 0 ] ) > $.event.special.swipe.horizontalDistanceThreshold &&\n\t\t\t\tMath.abs( start.coords[ 1 ] - stop.coords[ 1 ] ) < $.event.special.swipe.verticalDistanceThreshold ) {\n\t\t\t\tvar direction = start.coords[0] > stop.coords[ 0 ] ? \"swipeleft\" : \"swiperight\";\n\n\t\t\t\ttriggerCustomEvent( thisObject, \"swipe\", $.Event( \"swipe\", { target: origTarget, swipestart: start, swipestop: stop }), true );\n\t\t\t\ttriggerCustomEvent( thisObject, direction,$.Event( direction, { target: origTarget, swipestart: start, swipestop: stop } ), true );\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\n\t\t},\n\n\t\t// This serves as a flag to ensure that at most one swipe event event is\n\t\t// in work at any given time\n\t\teventInProgress: false,\n\n\t\tsetup: function() {\n\t\t\tvar events,\n\t\t\t\tthisObject = this,\n\t\t\t\t$this = $( thisObject ),\n\t\t\t\tcontext = {};\n\n\t\t\t// Retrieve the events data for this element and add the swipe context\n\t\t\tevents = $.data( this, \"mobile-events\" );\n\t\t\tif ( !events ) {\n\t\t\t\tevents = { length: 0 };\n\t\t\t\t$.data( this, \"mobile-events\", events );\n\t\t\t}\n\t\t\tevents.length++;\n\t\t\tevents.swipe = context;\n\n\t\t\tcontext.start = function( event ) {\n\n\t\t\t\t// Bail if we're already working on a swipe event\n\t\t\t\tif ( $.event.special.swipe.eventInProgress ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t$.event.special.swipe.eventInProgress = true;\n\n\t\t\t\tvar stop,\n\t\t\t\t\tstart = $.event.special.swipe.start( event ),\n\t\t\t\t\torigTarget = event.target,\n\t\t\t\t\temitted = false;\n\n\t\t\t\tcontext.move = function( event ) {\n\t\t\t\t\tif ( !start || event.isDefaultPrevented() ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tstop = $.event.special.swipe.stop( event );\n\t\t\t\t\tif ( !emitted ) {\n\t\t\t\t\t\temitted = $.event.special.swipe.handleSwipe( start, stop, thisObject, origTarget );\n\t\t\t\t\t\tif ( emitted ) {\n\n\t\t\t\t\t\t\t// Reset the context to make way for the next swipe event\n\t\t\t\t\t\t\t$.event.special.swipe.eventInProgress = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// prevent scrolling\n\t\t\t\t\tif ( Math.abs( start.coords[ 0 ] - stop.coords[ 0 ] ) > $.event.special.swipe.scrollSupressionThreshold ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tcontext.stop = function() {\n\t\t\t\t\t\temitted = true;\n\n\t\t\t\t\t\t// Reset the context to make way for the next swipe event\n\t\t\t\t\t\t$.event.special.swipe.eventInProgress = false;\n\t\t\t\t\t\t$document.off( touchMoveEvent, context.move );\n\t\t\t\t\t\tcontext.move = null;\n\t\t\t\t};\n\n\t\t\t\t$document.on( touchMoveEvent, context.move )\n\t\t\t\t\t.one( touchStopEvent, context.stop );\n\t\t\t};\n\t\t\t$this.on( touchStartEvent, context.start );\n\t\t},\n\n\t\tteardown: function() {\n\t\t\tvar events, context;\n\n\t\t\tevents = $.data( this, \"mobile-events\" );\n\t\t\tif ( events ) {\n\t\t\t\tcontext = events.swipe;\n\t\t\t\tdelete events.swipe;\n\t\t\t\tevents.length--;\n\t\t\t\tif ( events.length === 0 ) {\n\t\t\t\t\t$.removeData( this, \"mobile-events\" );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( context ) {\n\t\t\t\tif ( context.start ) {\n\t\t\t\t\t$( this ).off( touchStartEvent, context.start );\n\t\t\t\t}\n\t\t\t\tif ( context.move ) {\n\t\t\t\t\t$document.off( touchMoveEvent, context.move );\n\t\t\t\t}\n\t\t\t\tif ( context.stop ) {\n\t\t\t\t\t$document.off( touchStopEvent, context.stop );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t$.each({\n\t\tswipeleft: \"swipe.left\",\n\t\tswiperight: \"swipe.right\"\n\t}, function( event, sourceEvent ) {\n\n\t\t$.event.special[ event ] = {\n\t\t\tsetup: function() {\n\t\t\t\t$( this ).bind( sourceEvent, $.noop );\n\t\t\t},\n\t\t\tteardown: function() {\n\t\t\t\t$( this ).unbind( sourceEvent );\n\t\t\t}\n\t\t};\n\t});\n})( jQuery, this );\n*/\n\n!function (Foundation, $) {\n  'use strict';\n  // Elements with [data-open] will reveal a plugin that supports it when clicked.\n\n  $(document).on('click.zf.trigger', '[data-open]', function () {\n    var id = $(this).data('open');\n    $('#' + id).triggerHandler('open.zf.trigger', [$(this)]);\n  });\n\n  // Elements with [data-close] will close a plugin that supports it when clicked.\n  // If used without a value on [data-close], the event will bubble, allowing it to close a parent component.\n  $(document).on('click.zf.trigger', '[data-close]', function () {\n    var id = $(this).data('close');\n    if (id) {\n      $('#' + id).triggerHandler('close.zf.trigger', [$(this)]);\n    } else {\n      $(this).trigger('close.zf.trigger');\n    }\n  });\n\n  // Elements with [data-toggle] will toggle a plugin that supports it when clicked.\n  $(document).on('click.zf.trigger', '[data-toggle]', function () {\n    var id = $(this).data('toggle');\n    $('#' + id).triggerHandler('toggle.zf.trigger', [$(this)]);\n  });\n\n  // Elements with [data-closable] will respond to close.zf.trigger events.\n  $(document).on('close.zf.trigger', '[data-closable]', function () {\n    var animation = $(this).data('closable') || 'fade-out';\n    if (Foundation.Motion) {\n      Foundation.Motion.animateOut($(this), animation, function () {\n        $(this).trigger('closed.zf');\n      });\n    } else {\n      $(this).fadeOut().trigger('closed.zf');\n    }\n  });\n\n  var MutationObserver = function () {\n    var prefixes = ['WebKit', 'Moz', 'O', 'Ms', ''];\n    for (var i = 0; i < prefixes.length; i++) {\n      if (prefixes[i] + 'MutationObserver' in window) {\n        return window[prefixes[i] + 'MutationObserver'];\n      }\n    }\n    return false;\n  }();\n\n  var checkListeners = function checkListeners() {\n    eventsListener();\n    resizeListener();\n    scrollListener();\n    closemeListener();\n  };\n  /**\n  * Fires once after all other scripts have loaded\n  * @function\n  * @private\n  */\n  $(window).load(function () {\n    checkListeners();\n  });\n\n  //******** only fires this function once on load, if there's something to watch ********\n  var closemeListener = function closemeListener(pluginName) {\n    var yetiBoxes = $('[data-yeti-box]'),\n        plugNames = ['dropdown', 'tooltip', 'reveal'];\n\n    if (pluginName) {\n      if (typeof pluginName === 'string') {\n        plugNames.push(pluginName);\n      } else if ((typeof pluginName === 'undefined' ? 'undefined' : _typeof(pluginName)) === 'object' && typeof pluginName[0] === 'string') {\n        plugNames.concat(pluginName);\n      } else {\n        console.error('Plugin names must be strings');\n      }\n    }\n    if (yetiBoxes.length) {\n      var listeners = plugNames.map(function (name) {\n        return 'closeme.zf.' + name;\n      }).join(' ');\n\n      $(window).off(listeners).on(listeners, function (e, pluginId) {\n        var plugin = e.namespace.split('.')[0];\n        var plugins = $('[data-' + plugin + ']').not('[data-yeti-box=\"' + pluginId + '\"]');\n\n        plugins.each(function () {\n          var _this = $(this);\n\n          _this.triggerHandler('close.zf.trigger', [_this]);\n        });\n      });\n    }\n  };\n  var resizeListener = function resizeListener(debounce) {\n    var timer,\n        $nodes = $('[data-resize]');\n    if ($nodes.length) {\n      $(window).off('resize.zf.trigger').on('resize.zf.trigger', function (e) {\n        if (timer) {\n          clearTimeout(timer);\n        }\n\n        timer = setTimeout(function () {\n\n          if (!MutationObserver) {\n            //fallback for IE 9\n            $nodes.each(function () {\n              $(this).triggerHandler('resizeme.zf.trigger');\n            });\n          }\n          //trigger all listening elements and signal a resize event\n          $nodes.attr('data-events', \"resize\");\n        }, debounce || 10); //default time to emit resize event\n      });\n    }\n  };\n  var scrollListener = function scrollListener(debounce) {\n    var timer,\n        $nodes = $('[data-scroll]');\n    if ($nodes.length) {\n      $(window).off('scroll.zf.trigger').on('scroll.zf.trigger', function (e) {\n        if (timer) {\n          clearTimeout(timer);\n        }\n\n        timer = setTimeout(function () {\n\n          if (!MutationObserver) {\n            //fallback for IE 9\n            $nodes.each(function () {\n              $(this).triggerHandler('scrollme.zf.trigger');\n            });\n          }\n          //trigger all listening elements and signal a scroll event\n          $nodes.attr('data-events', \"scroll\");\n        }, debounce || 10); //default time to emit scroll event\n      });\n    }\n  };\n  // function domMutationObserver(debounce) {\n  //   // !!! This is coming soon and needs more work; not active  !!! //\n  //   var timer,\n  //   nodes = document.querySelectorAll('[data-mutate]');\n  //   //\n  //   if (nodes.length) {\n  //     // var MutationObserver = (function () {\n  //     //   var prefixes = ['WebKit', 'Moz', 'O', 'Ms', ''];\n  //     //   for (var i=0; i < prefixes.length; i++) {\n  //     //     if (prefixes[i] + 'MutationObserver' in window) {\n  //     //       return window[prefixes[i] + 'MutationObserver'];\n  //     //     }\n  //     //   }\n  //     //   return false;\n  //     // }());\n  //\n  //\n  //     //for the body, we need to listen for all changes effecting the style and class attributes\n  //     var bodyObserver = new MutationObserver(bodyMutation);\n  //     bodyObserver.observe(document.body, { attributes: true, childList: true, characterData: false, subtree:true, attributeFilter:[\"style\", \"class\"]});\n  //\n  //\n  //     //body callback\n  //     function bodyMutation(mutate) {\n  //       //trigger all listening elements and signal a mutation event\n  //       if (timer) { clearTimeout(timer); }\n  //\n  //       timer = setTimeout(function() {\n  //         bodyObserver.disconnect();\n  //         $('[data-mutate]').attr('data-events',\"mutate\");\n  //       }, debounce || 150);\n  //     }\n  //   }\n  // }\n  var eventsListener = function eventsListener() {\n    if (!MutationObserver) {\n      return false;\n    }\n    var nodes = document.querySelectorAll('[data-resize], [data-scroll], [data-mutate]');\n\n    //element callback\n    var listeningElementsMutation = function listeningElementsMutation(mutationRecordsList) {\n      var $target = $(mutationRecordsList[0].target);\n      //trigger the event handler for the element depending on type\n      switch ($target.attr(\"data-events\")) {\n\n        case \"resize\":\n          $target.triggerHandler('resizeme.zf.trigger', [$target]);\n          break;\n\n        case \"scroll\":\n          $target.triggerHandler('scrollme.zf.trigger', [$target, window.pageYOffset]);\n          break;\n\n        // case \"mutate\" :\n        // console.log('mutate', $target);\n        // $target.triggerHandler('mutate.zf.trigger');\n        //\n        // //make sure we don't get stuck in an infinite loop from sloppy codeing\n        // if ($target.index('[data-mutate]') == $(\"[data-mutate]\").length-1) {\n        //   domMutationObserver();\n        // }\n        // break;\n\n        default:\n          return false;\n        //nothing\n      }\n    };\n\n    if (nodes.length) {\n      //for each element that needs to listen for resizing, scrolling, (or coming soon mutation) add a single observer\n      for (var i = 0; i <= nodes.length - 1; i++) {\n        var elementObserver = new MutationObserver(listeningElementsMutation);\n        elementObserver.observe(nodes[i], { attributes: true, childList: false, characterData: false, subtree: false, attributeFilter: [\"data-events\"] });\n      }\n    }\n  };\n  // ------------------------------------\n\n  // [PH]\n  // Foundation.CheckWatchers = checkWatchers;\n  Foundation.IHearYou = checkListeners;\n  // Foundation.ISeeYou = scrollListener;\n  // Foundation.IFeelYou = closemeListener;\n}(window.Foundation, window.jQuery);\n\n!function (Foundation, $) {\n  'use strict';\n\n  /**\n   * Creates a new instance of Abide.\n   * @class\n   * @fires Abide#init\n   * @param {Object} element - jQuery object to add the trigger to.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n\n  function Abide(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, Abide.defaults, this.$element.data(), options);\n    this.$window = $(window);\n    this.name = 'Abide';\n    this.attr = 'data-abide';\n\n    this._init();\n    this._events();\n\n    Foundation.registerPlugin(this);\n  }\n\n  /**\n   * Default settings for plugin\n   */\n  Abide.defaults = {\n    validateOn: 'fieldChange', // options: fieldChange, manual, submit\n    labelErrorClass: 'is-invalid-label',\n    inputErrorClass: 'is-invalid-input',\n    formErrorSelector: '.form-error',\n    formErrorClass: 'is-visible',\n    patterns: {\n      alpha: /^[a-zA-Z]+$/,\n      alpha_numeric: /^[a-zA-Z0-9]+$/,\n      integer: /^[-+]?\\d+$/,\n      number: /^[-+]?\\d*(?:[\\.\\,]\\d+)?$/,\n\n      // amex, visa, diners\n      card: /^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\\d{3})\\d{11})$/,\n      cvv: /^([0-9]){3,4}$/,\n\n      // http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#valid-e-mail-address\n      email: /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/,\n\n      url: /^(https?|ftp|file|ssh):\\/\\/(((([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-zA-Z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-zA-Z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-zA-Z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(\\#((([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/,\n      // abc.de\n      domain: /^([a-zA-Z0-9]([a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,8}$/,\n\n      datetime: /^([0-2][0-9]{3})\\-([0-1][0-9])\\-([0-3][0-9])T([0-5][0-9])\\:([0-5][0-9])\\:([0-5][0-9])(Z|([\\-\\+]([0-1][0-9])\\:00))$/,\n      // YYYY-MM-DD\n      date: /(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,\n      // HH:MM:SS\n      time: /^(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,\n      dateISO: /^\\d{4}[\\/\\-]\\d{1,2}[\\/\\-]\\d{1,2}$/,\n      // MM/DD/YYYY\n      month_day_year: /^(0[1-9]|1[012])[- \\/.](0[1-9]|[12][0-9]|3[01])[- \\/.]\\d{4}$/,\n      // DD/MM/YYYY\n      day_month_year: /^(0[1-9]|[12][0-9]|3[01])[- \\/.](0[1-9]|1[012])[- \\/.]\\d{4}$/,\n\n      // #FFF or #FFFFFF\n      color: /^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/\n    },\n    validators: {\n      equalTo: function equalTo(el, required, parent) {\n        var from = document.getElementById(el.getAttribute(this.add_namespace('data-equalto'))).value,\n            to = el.value,\n            valid = from === to;\n\n        return valid;\n      }\n    }\n  };\n\n  /**\n   * Initializes the Abide plugin and calls functions to get Abide functioning on load.\n   * @private\n   */\n  Abide.prototype._init = function () {};\n\n  /**\n   * Initializes events for Abide.\n   * @private\n   */\n  Abide.prototype._events = function () {\n    var self = this;\n    this.$element.off('.abide').on('reset.fndtn.abide', function (e) {\n      self.resetForm($(this));\n    }).on('submit.fndtn.abide', function (e) {\n      e.preventDefault();\n      self.validateForm(self.$element);\n    }).find('input, textarea, select').off('.abide').on('blur.fndtn.abide change.fndtn.abide', function (e) {\n      if (self.options.validateOn === 'fieldChange') {\n        self.validateInput($(e.target), self.$element);\n      }\n      // self.validateForm(self.$element);\n    }).on('keydown.fndtn.abide', function (e) {\n      // if (settings.live_validate === true && e.which != 9) {\n      //   clearTimeout(self.timer);\n      //   self.timer = setTimeout(function () {\n      //     self.validate([this], e);\n      //   }.bind(this), settings.timeout);\n      // }\n      // self.validateForm(self.$element);\n    });\n  },\n  /**\n   * Calls necessary functions to update Abide upon DOM change\n   * @private\n   */\n  Abide.prototype._reflow = function () {\n    var self = this;\n  };\n  /**\n   * Checks whether or not a form element has the required attribute and if it's checked or not\n   * @param {Object} element - jQuery object to check for required attribute\n   * @returns {Boolean} Boolean value depends on whether or not attribute is checked or empty\n   */\n  Abide.prototype.requiredCheck = function ($el) {\n    switch ($el[0].type) {\n      case 'text':\n        if ($el.attr('required') && !$el.val()) {\n          // requirement check does not pass\n          return false;\n        } else {\n          return true;\n        }\n        break;\n      case 'checkbox':\n        if ($el.attr('required') && !$el.is(':checked')) {\n          return false;\n        } else {\n          return true;\n        }\n        break;\n      case 'radio':\n        if ($el.attr('required') && !$el.is(':checked')) {\n          return false;\n        } else {\n          return true;\n        }\n        break;\n      default:\n        if ($el.attr('required') && (!$el.val() || !$el.val().length || $el.is(':empty'))) {\n          return false;\n        } else {\n          return true;\n        }\n    }\n  };\n  /**\n   * Checks whether or not a form element has the required attribute and if it's checked or not\n   * @param {Object} element - jQuery object to check for required attribute\n   * @returns {Boolean} Boolean value depends on whether or not attribute is checked or empty\n   */\n  Abide.prototype.findLabel = function ($el) {\n    if ($el.next('label').length) {\n      return $el.next('label');\n    } else {\n      return $el.closest('label');\n    }\n  };\n  /**\n   * Adds the CSS error class as specified by the Abide settings to the label, input, and the form\n   * @param {Object} element - jQuery object to add the class to\n   */\n  Abide.prototype.addErrorClasses = function ($el) {\n    var self = this,\n        $label = self.findLabel($el),\n        $formError = $el.next(self.options.formErrorSelector) || $el.find(self.options.formErrorSelector);\n\n    // label\n    if ($label) {\n      $label.addClass(self.options.labelErrorClass);\n    }\n    // form error\n    if ($formError) {\n      $formError.addClass(self.options.formErrorClass);\n    }\n    // input\n    $el.addClass(self.options.inputErrorClass);\n  };\n  /**\n   * Removes CSS error class as specified by the Abide settings from the label, input, and the form\n   * @param {Object} element - jQuery object to remove the class from\n   */\n  Abide.prototype.removeErrorClasses = function ($el) {\n    var self = this,\n        $label = self.findLabel($el),\n        $formError = $el.next(self.options.formErrorSelector) || $el.find(self.options.formErrorSelector);\n    // label\n    if ($label && $label.hasClass(self.options.labelErrorClass)) {\n      $label.removeClass(self.options.labelErrorClass);\n    }\n    // form error\n    if ($formError && $formError.hasClass(self.options.formErrorClass)) {\n      $formError.removeClass(self.options.formErrorClass);\n    }\n    // input\n    if ($el.hasClass(self.options.inputErrorClass)) {\n      $el.removeClass(self.options.inputErrorClass);\n    }\n  };\n  /**\n   * Goes through a form to find inputs and proceeds to validate them in ways specific to their type\n   * @fires Abide#invalid\n   * @fires Abide#valid\n   * @param {Object} element - jQuery object to validate, should be an HTML input\n   * @param {Object} form - jQuery object of the entire form to find the various input elements\n   */\n  Abide.prototype.validateInput = function ($el, $form) {\n    var self = this,\n        textInput = $form.find('input[type=\"text\"]'),\n        checkInput = $form.find('input[type=\"checkbox\"]'),\n        label,\n        radioGroupName;\n\n    if ($el[0].type === 'text') {\n      if (!self.requiredCheck($el) || !self.validateText($el)) {\n        self.addErrorClasses($el);\n        $el.trigger('invalid.fndtn.abide', $el[0]);\n      } else {\n        self.removeErrorClasses($el);\n        $el.trigger('valid.fndtn.abide', $el[0]);\n      }\n    } else if ($el[0].type === 'radio') {\n      radioGroupName = $el.attr('name');\n      label = $el.siblings('label');\n\n      if (self.validateRadio(radioGroupName)) {\n        $(label).each(function () {\n          if ($(this).hasClass(self.options.labelErrorClass)) {\n            $(this).removeClass(self.options.labelErrorClass);\n          }\n        });\n        $el.trigger('valid.fndtn.abide', $el[0]);\n      } else {\n        $(label).each(function () {\n          $(this).addClass(self.options.labelErrorClass);\n        });\n        $el.trigger('invalid.fndtn.abide', $el[0]);\n      };\n    } else if ($el[0].type === 'checkbox') {\n      if (!self.requiredCheck($el)) {\n        self.addErrorClasses($el);\n        $el.trigger('invalid.fndtn.abide', $el[0]);\n      } else {\n        self.removeErrorClasses($el);\n        $el.trigger('valid.fndtn.abide', $el[0]);\n      }\n    } else {\n      if (!self.requiredCheck($el) || !self.validateText($el)) {\n        self.addErrorClasses($el);\n        $el.trigger('invalid.fndtn.abide', $el[0]);\n      } else {\n        self.removeErrorClasses($el);\n        $el.trigger('valid.fndtn.abide', $el[0]);\n      }\n    }\n  };\n  /**\n   * Goes through a form and if there are any invalid inputs, it will display the form error element\n   * @param {Object} element - jQuery object to validate, should be a form HTML element\n   */\n  Abide.prototype.validateForm = function ($form) {\n    var self = this,\n        inputs = $form.find('input'),\n        inputCount = $form.find('input').length,\n        counter = 0;\n\n    while (counter < inputCount) {\n      self.validateInput($(inputs[counter]), $form);\n      counter++;\n    }\n\n    // what are all the things that can go wrong with a form?\n    if ($form.find('.form-error.is-visible').length || $form.find('.is-invalid-label').length) {\n      $form.find('[data-abide-error]').css('display', 'block');\n    } else {\n      $form.find('[data-abide-error]').css('display', 'none');\n    }\n  };\n  /**\n   * Determines whether or a not a text input is valid based on the patterns specified in the attribute\n   * @param {Object} element - jQuery object to validate, should be a text input HTML element\n   * @returns {Boolean} Boolean value depends on whether or not the input value matches the pattern specified\n   */\n  Abide.prototype.validateText = function ($el) {\n    var self = this,\n        valid = false,\n        patternLib = this.options.patterns,\n        inputText = $($el).val(),\n\n    // maybe have a different way of parsing this bc people might use type\n    pattern = $($el).attr('pattern');\n\n    // if there's no value, then return true\n    // since required check has already been done\n    if (inputText.length === 0) {\n      return true;\n    } else {\n      if (inputText.match(patternLib[pattern])) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  };\n  /**\n   * Determines whether or a not a radio input is valid based on whether or not it is required and selected\n   * @param {String} group - A string that specifies the name of a radio button group\n   * @returns {Boolean} Boolean value depends on whether or not at least one radio input has been selected (if it's required)\n   */\n  Abide.prototype.validateRadio = function (group) {\n    var self = this,\n        labels = $(':radio[name=\"' + group + '\"]').siblings('label'),\n        counter = 0;\n    // go through each radio button\n    $(':radio[name=\"' + group + '\"]').each(function () {\n      // put them through the required checkpoint\n      if (!self.requiredCheck($(this))) {\n        // if at least one doesn't pass, add a tally to the counter\n        counter++;\n      }\n      // if at least one is checked\n      // reset the counter\n      if ($(this).is(':checked')) {\n        counter = 0;\n      }\n    });\n\n    if (counter > 0) {\n      return false;\n    } else {\n      return true;\n    }\n  };\n  Abide.prototype.matchValidation = function (val, validation) {};\n  /**\n   * Resets form inputs and styles\n   * @param {Object} $form - A jQuery object that should be an HTML form element\n   */\n  Abide.prototype.resetForm = function ($form) {\n    var self = this;\n    var invalidAttr = 'data-invalid';\n    // remove data attributes\n    $('[' + self.invalidAttr + ']', $form).removeAttr(invalidAttr);\n    // remove styles\n    $('.' + self.options.labelErrorClass, $form).not('small').removeClass(self.options.labelErrorClass);\n    $('.' + self.options.inputErrorClass, $form).not('small').removeClass(self.options.inputErrorClass);\n    $('.form-error.is-visible').removeClass('is-visible');\n    $form.find('[data-abide-error]').css('display', 'none');\n    $(':input', $form).not(':button, :submit, :reset, :hidden, [data-abide-ignore]').val('').removeAttr(invalidAttr);\n  };\n  Abide.prototype.destroy = function () {\n    //TODO this...\n  };\n\n  Foundation.plugin(Abide, 'Abide');\n\n  // Exports for AMD/Browserify\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') module.exports = Abide;\n  if (typeof define === 'function') define(['foundation'], function () {\n    return Abide;\n  });\n}(Foundation, jQuery);\n\n/**\n * Accordion module.\n * @module foundation.accordion\n * @requires foundation.util.keyboard\n * @requires foundation.util.motion\n */\n!function ($, Foundation) {\n  'use strict';\n\n  /**\n   * Creates a new instance of an accordion.\n   * @class\n   * @fires Accordion#init\n   * @param {jQuery} element - jQuery object to make into an accordion.\n   */\n\n  function Accordion(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, Accordion.defaults, this.$element.data(), options);\n\n    this._init();\n\n    Foundation.registerPlugin(this);\n    Foundation.Keyboard.register('Accordion', {\n      'ENTER': 'toggle',\n      'SPACE': 'toggle',\n      'ARROW_DOWN': 'next',\n      'ARROW_UP': 'previous'\n    });\n  }\n\n  Accordion.defaults = {\n    /**\n     * Amount of time to animate the opening of an accordion pane.\n     * @option\n     * @example 250\n     */\n    slideSpeed: 250,\n    /**\n     * Allow the accordion to have multiple open panes.\n     * @option\n     * @example false\n     */\n    multiExpand: false,\n    /**\n     * Allow the accordion to close all panes.\n     * @option\n     * @example false\n     */\n    allowAllClosed: false\n  };\n\n  /**\n   * Initializes the accordion by animating the preset active pane(s).\n   * @private\n   */\n  Accordion.prototype._init = function () {\n    this.$element.attr('role', 'tablist');\n    this.$tabs = this.$element.children('li');\n    this.$tabs.each(function (idx, el) {\n\n      var $el = $(el),\n          $content = $el.find('[data-tab-content]'),\n          id = $content[0].id || Foundation.GetYoDigits(6, 'accordion'),\n          linkId = el.id || id + '-label';\n\n      $el.find('a:first').attr({\n        'aria-controls': id,\n        'role': 'tab',\n        'id': linkId,\n        'aria-expanded': false,\n        'aria-selected': false\n      });\n      $content.attr({ 'role': 'tabpanel', 'aria-labelledby': linkId, 'aria-hidden': true, 'id': id });\n    });\n    var $initActive = this.$element.find('.is-active').children('[data-tab-content]');\n    if ($initActive.length) {\n      this.down($initActive, true);\n    }\n    this._events();\n  };\n\n  /**\n   * Adds event handlers for items within the accordion.\n   * @private\n   */\n  Accordion.prototype._events = function () {\n    var _this = this;\n\n    this.$tabs.each(function () {\n      var $elem = $(this);\n      var $tabContent = $elem.children('[data-tab-content]');\n      if ($tabContent.length) {\n        $elem.children('a').off('click.zf.accordion keydown.zf.accordion').on('click.zf.accordion', function (e) {\n          // $(this).children('a').on('click.zf.accordion', function(e) {\n          e.preventDefault();\n          if ($elem.hasClass('is-active')) {\n            if (_this.options.allowAllClosed || $elem.siblings().hasClass('is-active')) {\n              _this.up($tabContent);\n            }\n          } else {\n            _this.down($tabContent);\n          }\n        }).on('keydown.zf.accordion', function (e) {\n          Foundation.Keyboard.handleKey(e, _this, {\n            toggle: function toggle() {\n              _this.toggle($tabContent);\n            },\n            next: function next() {\n              $elem.next().find('a').focus().trigger('click.zf.accordion');\n            },\n            previous: function previous() {\n              $elem.prev().find('a').focus().trigger('click.zf.accordion');\n            },\n            handled: function handled() {\n              e.preventDefault();\n              e.stopPropagation();\n            }\n          });\n        });\n      }\n    });\n  };\n  /**\n   * Toggles the selected content pane's open/close state.\n   * @param {jQuery} $target - jQuery object of the pane to toggle.\n   * @function\n   */\n  Accordion.prototype.toggle = function ($target) {\n    if ($target.parent().hasClass('is-active')) {\n      if (this.options.allowAllClosed || $target.parent().siblings().hasClass('is-active')) {\n        this.up($target);\n      } else {\n        return;\n      }\n    } else {\n      this.down($target);\n    }\n  };\n  /**\n   * Opens the accordion tab defined by `$target`.\n   * @param {jQuery} $target - Accordion pane to open.\n   * @param {Boolean} firstTime - flag to determine if reflow should happen.\n   * @fires Accordion#down\n   * @function\n   */\n  Accordion.prototype.down = function ($target, firstTime) {\n    var _this = this;\n    if (!this.options.multiExpand && !firstTime) {\n      var $currentActive = this.$element.find('.is-active').children('[data-tab-content]');\n      if ($currentActive.length) {\n        this.up($currentActive);\n      }\n    }\n\n    $target.attr('aria-hidden', false).parent('[data-tab-content]').addBack().parent().addClass('is-active');\n\n    Foundation.Move(_this.options.slideSpeed, $target, function () {\n      $target.slideDown(_this.options.slideSpeed);\n    });\n\n    if (!firstTime) {\n      Foundation._reflow(this.$element.attr('data-accordion'));\n    }\n    $('#' + $target.attr('aria-labelledby')).attr({\n      'aria-expanded': true,\n      'aria-selected': true\n    });\n    /**\n     * Fires when the tab is done opening.\n     * @event Accordion#down\n     */\n    this.$element.trigger('down.zf.accordion', [$target]);\n  };\n\n  /**\n   * Closes the tab defined by `$target`.\n   * @param {jQuery} $target - Accordion tab to close.\n   * @fires Accordion#up\n   * @function\n   */\n  Accordion.prototype.up = function ($target) {\n    var $aunts = $target.parent().siblings(),\n        _this = this;\n    var canClose = this.options.multiExpand ? $aunts.hasClass('is-active') : $target.parent().hasClass('is-active');\n\n    if (!this.options.allowAllClosed && !canClose) {\n      return;\n    }\n\n    Foundation.Move(this.options.slideSpeed, $target, function () {\n      $target.slideUp(_this.options.slideSpeed);\n    });\n\n    $target.attr('aria-hidden', true).parent().removeClass('is-active');\n\n    $('#' + $target.attr('aria-labelledby')).attr({\n      'aria-expanded': false,\n      'aria-selected': false\n    });\n\n    /**\n     * Fires when the tab is done collapsing up.\n     * @event Accordion#up\n     */\n    this.$element.trigger('up.zf.accordion', [$target]);\n  };\n\n  /**\n   * Destroys an instance of an accordion.\n   * @fires Accordion#destroyed\n   * @function\n   */\n  Accordion.prototype.destroy = function () {\n    this.$element.find('[data-tab-content]').slideUp(0).css('display', '');\n    this.$element.find('a').off('.zf.accordion');\n\n    Foundation.unregisterPlugin(this);\n  };\n\n  Foundation.plugin(Accordion, 'Accordion');\n}(jQuery, window.Foundation);\n\n/**\n * AccordionMenu module.\n * @module foundation.accordionMenu\n * @requires foundation.util.keyboard\n * @requires foundation.util.motion\n * @requires foundation.util.nest\n */\n!function ($) {\n  'use strict';\n\n  /**\n   * Creates a new instance of an accordion menu.\n   * @class\n   * @fires AccordionMenu#init\n   * @param {jQuery} element - jQuery object to make into an accordion menu.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n\n  function AccordionMenu(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, AccordionMenu.defaults, this.$element.data(), options);\n\n    Foundation.Nest.Feather(this.$element, 'accordion');\n\n    this._init();\n\n    Foundation.registerPlugin(this);\n    Foundation.Keyboard.register('AccordionMenu', {\n      'ENTER': 'toggle',\n      'SPACE': 'toggle',\n      'ARROW_RIGHT': 'open',\n      'ARROW_UP': 'up',\n      'ARROW_DOWN': 'down',\n      'ARROW_LEFT': 'close',\n      'ESCAPE': 'closeAll',\n      'TAB': 'down',\n      'SHIFT_TAB': 'up'\n    });\n  }\n\n  AccordionMenu.defaults = {\n    /**\n     * Amount of time to animate the opening of a submenu in ms.\n     * @option\n     * @example 250\n     */\n    slideSpeed: 250,\n    /**\n     * Allow the menu to have multiple open panes.\n     * @option\n     * @example true\n     */\n    multiOpen: true\n  };\n\n  /**\n   * Initializes the accordion menu by hiding all nested menus.\n   * @private\n   */\n  AccordionMenu.prototype._init = function () {\n    this.$element.find('[data-submenu]').not('.is-active').slideUp(0); //.find('a').css('padding-left', '1rem');\n    this.$element.attr({\n      'role': 'tablist',\n      'aria-multiselectable': this.options.multiOpen\n    });\n\n    this.$menuLinks = this.$element.find('.has-submenu');\n    this.$menuLinks.each(function () {\n      var linkId = this.id || Foundation.GetYoDigits(6, 'acc-menu-link'),\n          $elem = $(this),\n          $sub = $elem.children('[data-submenu]'),\n          subId = $sub[0].id || Foundation.GetYoDigits(6, 'acc-menu'),\n          isActive = $sub.hasClass('is-active');\n      $elem.attr({\n        'aria-controls': subId,\n        'aria-expanded': isActive,\n        'aria-selected': false,\n        'role': 'tab',\n        'id': linkId\n      });\n      $sub.attr({\n        'aria-labelledby': linkId,\n        'aria-hidden': !isActive,\n        'role': 'tabpanel',\n        'id': subId\n      });\n    });\n    var initPanes = this.$element.find('.is-active');\n    if (initPanes.length) {\n      var _this = this;\n      initPanes.each(function () {\n        _this.down($(this));\n      });\n    }\n    this._events();\n  };\n\n  /**\n   * Adds event handlers for items within the menu.\n   * @private\n   */\n  AccordionMenu.prototype._events = function () {\n    var _this = this;\n\n    this.$element.find('li').each(function () {\n      var $submenu = $(this).children('[data-submenu]');\n\n      if ($submenu.length) {\n        $(this).children('a').off('click.zf.accordionmenu').on('click.zf.accordionmenu', function (e) {\n          e.preventDefault();\n\n          _this.toggle($submenu);\n        });\n      }\n    }).on('keydown.zf.accordionmenu', function (e) {\n      var $element = $(this),\n          $elements = $element.parent('ul').children('li'),\n          $prevElement,\n          $nextElement,\n          $target = $element.children('[data-submenu]');\n\n      $elements.each(function (i) {\n        if ($(this).is($element)) {\n          $prevElement = $elements.eq(Math.max(0, i - 1));\n          $nextElement = $elements.eq(Math.min(i + 1, $elements.length - 1));\n\n          if ($(this).children('[data-submenu]:visible').length) {\n            // has open sub menu\n            $nextElement = $element.find('li:first-child');\n          }\n          if ($(this).is(':first-child')) {\n            // is first element of sub menu\n            $prevElement = $element.parents('li').first();\n          } else if ($prevElement.children('[data-submenu]:visible').length) {\n            // if previous element has open sub menu\n            $prevElement = $prevElement.find('li:last-child');\n          }\n          if ($(this).is(':last-child')) {\n            // is last element of sub menu\n            $nextElement = $element.parents('li').first().next('li');\n          }\n\n          return;\n        }\n      });\n      Foundation.Keyboard.handleKey(e, _this, {\n        open: function open() {\n          if ($target.is(':hidden')) {\n            _this.down($target);\n            $target.find('li').first().focus();\n          }\n        },\n        close: function close() {\n          if ($target.length && !$target.is(':hidden')) {\n            // close active sub of this item\n            _this.up($target);\n          } else if ($element.parent('[data-submenu]').length) {\n            // close currently open sub\n            _this.up($element.parent('[data-submenu]'));\n            $element.parents('li').first().focus();\n          }\n        },\n        up: function up() {\n          $prevElement.focus();\n        },\n        down: function down() {\n          $nextElement.focus();\n        },\n        toggle: function toggle() {\n          if ($element.children('[data-submenu]').length) {\n            _this.toggle($element.children('[data-submenu]'));\n          }\n        },\n        closeAll: function closeAll() {\n          _this.hideAll();\n        },\n        handled: function handled() {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n      });\n    }); //.attr('tabindex', 0);\n  };\n  /**\n   * Closes all panes of the menu.\n   * @function\n   */\n  AccordionMenu.prototype.hideAll = function () {\n    this.$element.find('[data-submenu]').slideUp(this.options.slideSpeed);\n  };\n  /**\n   * Toggles the open/close state of a submenu.\n   * @function\n   * @param {jQuery} $target - the submenu to toggle\n   */\n  AccordionMenu.prototype.toggle = function ($target) {\n    if (!$target.is(':hidden')) {\n      this.up($target);\n    } else {\n      this.down($target);\n    }\n  };\n  /**\n   * Opens the sub-menu defined by `$target`.\n   * @param {jQuery} $target - Sub-menu to open.\n   * @fires AccordionMenu#down\n   */\n  AccordionMenu.prototype.down = function ($target) {\n    var _this = this;\n    console.log($target);\n    if (!this.options.multiOpen) {\n      this.up(this.$element.find('.is-active').not($target.parentsUntil(this.$element)));\n    }\n\n    $target.addClass('is-active').attr({ 'aria-hidden': false }).parent('.has-submenu').attr({ 'aria-expanded': true, 'aria-selected': true });\n\n    Foundation.Move(this.options.slideSpeed, $target, function () {\n      $target.slideDown(_this.options.slideSpeed);\n    });\n    /**\n     * Fires when the menu is done collapsing up.\n     * @event AccordionMenu#down\n     */\n    this.$element.trigger('down.zf.accordionMenu', [$target]);\n  };\n\n  /**\n   * Closes the sub-menu defined by `$target`. All sub-menus inside the target will be closed as well.\n   * @param {jQuery} $target - Sub-menu to close.\n   * @fires AccordionMenu#up\n   */\n  AccordionMenu.prototype.up = function ($target) {\n    var _this = this;\n    Foundation.Move(this.options.slideSpeed, $target, function () {\n      $target.slideUp(_this.options.slideSpeed);\n    });\n    $target.attr('aria-hidden', true).find('[data-submenu]').slideUp(0).attr('aria-hidden', true).end().parent('.has-submenu').attr({ 'aria-expanded': false, 'aria-selected': false });\n    // $target.slideUp(this.options.slideSpeed, function() {\n    //   $target.find('[data-submenu]').slideUp(0).attr('aria-hidden', true);\n    // }).attr('aria-hidden', true).parent('.has-submenu').attr({'aria-expanded': false, 'aria-selected': false});\n\n    /**\n     * Fires when the menu is done collapsing up.\n     * @event AccordionMenu#up\n     */\n    this.$element.trigger('up.zf.accordionMenu', [$target]);\n  };\n\n  /**\n   * Destroys an instance of accordion menu.\n   * @fires AccordionMenu#destroyed\n   */\n  AccordionMenu.prototype.destroy = function () {\n    this.$element.find('[data-submenu]').slideDown(0).css('display', '');\n    this.$element.find('a').off('click.zf.accordionMenu');\n\n    Foundation.Nest.Burn(this.$element, 'accordion');\n    Foundation.unregisterPlugin(this);\n  };\n\n  Foundation.plugin(AccordionMenu, 'AccordionMenu');\n}(jQuery, window.Foundation);\n\n/**\n * Drilldown module.\n * @module foundation.drilldown\n * @requires foundation.util.keyboard\n * @requires foundation.util.motion\n * @requires foundation.util.nest\n */\n!function ($, Foundation) {\n  'use strict';\n\n  /**\n   * Creates a new instance of a drilldown menu.\n   * @class\n   * @param {jQuery} element - jQuery object to make into an accordion menu.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n\n  function Drilldown(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, Drilldown.defaults, this.$element.data(), options);\n\n    Foundation.Nest.Feather(this.$element, 'drilldown');\n\n    this._init();\n\n    Foundation.registerPlugin(this);\n    Foundation.Keyboard.register('Drilldown', {\n      'ENTER': 'open',\n      'SPACE': 'open',\n      'ARROW_RIGHT': 'next',\n      'ARROW_UP': 'up',\n      'ARROW_DOWN': 'down',\n      'ARROW_LEFT': 'previous',\n      'ESCAPE': 'close',\n      'TAB': 'down',\n      'SHIFT_TAB': 'up'\n    });\n  }\n  Drilldown.defaults = {\n    /**\n     * Markup used for JS generated back button. Prepended to submenu lists and deleted on `destroy` method.\n     * @option\n     * @example '<li><a>Back</a></li>'\n     */\n    backButton: '<li class=\"js-drilldown-back\" tabindex=\"0\"><a>Back</a></li>',\n    /**\n     * Markup used to wrap drilldown menu. Use a class name for independent styling, or the JS applied class: `is-drilldown`.\n     * @option\n     * @example '<div></div>'\n     */\n    wrapper: '<div></div>',\n    /**\n     * Allow the menu to return to root list on body click.\n     * @option\n     * @example false\n     */\n    closeOnClick: false\n  };\n  /**\n   * Initializes the drilldown by creating jQuery collections of elements\n   * @private\n   */\n  // holdOpen: false\n  Drilldown.prototype._init = function () {\n    this.$submenuAnchors = this.$element.find('li.has-submenu');\n    this.$submenus = this.$submenuAnchors.children('[data-submenu]').addClass('is-drilldown-sub') /*.wrap($(this.options.wrapper).addClass('is-drilldown-sub'))*/;\n    // this.$rootElems = this.$element.children('[data-submenu]')/*.addClass('first-sub')*/;\n    this.$menuItems = this.$element.find('li').not('.js-drilldown-back').attr('role', 'menuitem');\n    // this.$submenus;\n\n    this._prepareMenu();\n    // this._getMaxDims();\n    this._keyboardEvents();\n  };\n  /**\n   * prepares drilldown menu by setting attributes to links and elements\n   * sets a min height to prevent content jumping\n   * wraps the element if not already wrapped\n   * @private\n   * @function\n   */\n  Drilldown.prototype._prepareMenu = function () {\n    var _this = this;\n    // if(!this.options.holdOpen){\n    //   this._menuLinkEvents();\n    // }\n    this.$submenuAnchors.each(function () {\n      var $sub = $(this);\n      $sub.find('a')[0].removeAttribute('href');\n      $sub.children('[data-submenu]').attr({\n        'aria-hidden': true,\n        'tabindex': 0,\n        'role': 'menu'\n      });\n      _this._events($sub);\n    });\n    this.$submenus.each(function () {\n      var $menu = $(this),\n          $back = $menu.find('.js-drilldown-back');\n      if (!$back.length) {\n        $menu.prepend(_this.options.backButton);\n        _this._back($menu);\n      }\n    });\n    if (!this.$element.parent().hasClass('is-drilldown')) {\n      this.$wrapper = $(this.options.wrapper).addClass('is-drilldown').css(this._getMaxDims());\n      this.$element.wrap(this.$wrapper);\n    }\n  };\n  /**\n   * Adds event handlers to elements in the menu.\n   * @function\n   * @private\n   * @param {jQuery} $elem - the current menu item to add handlers to.\n   */\n  Drilldown.prototype._events = function ($elem) {\n    var _this = this;\n\n    $elem.off('click.zf.drilldown').on('click.zf.drilldown', function (e) {\n      e.stopImmediatePropagation();\n      e.preventDefault();\n\n      if (e.target !== e.currentTarget.firstElementChild) {\n        return false;\n      }\n      _this._show($elem);\n\n      if (_this.options.closeOnClick) {\n        var $body = $('body').not(_this.$wrapper);\n        $body.off('.zf.drilldown').on('click.zf.drilldown', function (e) {\n          e.preventDefault();\n          _this._hideAll();\n          $body.off('.zf.drilldown');\n        });\n      }\n    });\n  };\n  /**\n   * Adds keydown event listener to `li`'s in the menu.\n   * @private\n   */\n  Drilldown.prototype._keyboardEvents = function () {\n    var _this = this;\n    this.$menuItems.add(this.$element.find('.js-drilldown-back')).on('keydown.zf.drilldown', function (e) {\n      var $element = $(this),\n          $elements = $element.parent('ul').children('li'),\n          $prevElement,\n          $nextElement;\n\n      $elements.each(function (i) {\n        if ($(this).is($element)) {\n          $prevElement = $elements.eq(Math.max(0, i - 1));\n          $nextElement = $elements.eq(Math.min(i + 1, $elements.length - 1));\n          return;\n        }\n      });\n      Foundation.Keyboard.handleKey(e, _this, {\n        next: function next() {\n          if ($element.is(_this.$submenuAnchors)) {\n            _this._show($element);\n            $element.on(Foundation.transitionend($element), function () {\n              $element.find('ul li').filter(_this.$menuItems).first().focus();\n            });\n          }\n        },\n        previous: function previous() {\n          _this._hide($element.parent('ul'));\n          $element.parent('ul').on(Foundation.transitionend($element), function () {\n            setTimeout(function () {\n              $element.parent('ul').parent('li').focus();\n            }, 1);\n          });\n        },\n        up: function up() {\n          $prevElement.focus();\n        },\n        down: function down() {\n          $nextElement.focus();\n        },\n        close: function close() {\n          _this._back();\n          //_this.$menuItems.first().focus(); // focus to first element\n        },\n        open: function open() {\n          if (!$element.is(_this.$menuItems)) {\n            // not menu item means back button\n            _this._hide($element.parent('ul'));\n            setTimeout(function () {\n              $element.parent('ul').parent('li').focus();\n            }, 1);\n          } else if ($element.is(_this.$submenuAnchors)) {\n            _this._show($element);\n            setTimeout(function () {\n              $element.find('ul li').filter(_this.$menuItems).first().focus();\n            }, 1);\n          }\n        },\n        handled: function handled() {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n      });\n    }); // end keyboardAccess\n  };\n\n  /**\n   * Closes all open elements, and returns to root menu.\n   * @function\n   * @fires Drilldown#closed\n   */\n  Drilldown.prototype._hideAll = function () {\n    var $elem = this.$element.find('.is-drilldown-sub.is-active').addClass('is-closing');\n    $elem.one(Foundation.transitionend($elem), function (e) {\n      $elem.removeClass('is-active is-closing');\n    });\n    /**\n     * Fires when the menu is fully closed.\n     * @event Drilldown#closed\n     */\n    this.$element.trigger('closed.zf.drilldown');\n  };\n  /**\n   * Adds event listener for each `back` button, and closes open menus.\n   * @function\n   * @fires Drilldown#back\n   * @param {jQuery} $elem - the current sub-menu to add `back` event.\n   */\n  Drilldown.prototype._back = function ($elem) {\n    var _this = this;\n    $elem.off('click.zf.drilldown');\n    $elem.children('.js-drilldown-back').on('click.zf.drilldown', function (e) {\n      e.stopImmediatePropagation();\n      // console.log('mouseup on back');\n      _this._hide($elem);\n    });\n  };\n  /**\n   * Adds event listener to menu items w/o submenus to close open menus on click.\n   * @function\n   * @private\n   */\n  Drilldown.prototype._menuLinkEvents = function () {\n    var _this = this;\n    this.$menuItems.not('.has-submenu').off('click.zf.drilldown').on('click.zf.drilldown', function (e) {\n      // e.stopImmediatePropagation();\n      setTimeout(function () {\n        _this._hideAll();\n      }, 0);\n    });\n  };\n  /**\n   * Opens a submenu.\n   * @function\n   * @fires Drilldown#open\n   * @param {jQuery} $elem - the current element with a submenu to open.\n   */\n  Drilldown.prototype._show = function ($elem) {\n    $elem.children('[data-submenu]').addClass('is-active');\n\n    this.$element.trigger('open.zf.drilldown', [$elem]);\n  };\n  /**\n   * Hides a submenu\n   * @function\n   * @fires Drilldown#hide\n   * @param {jQuery} $elem - the current sub-menu to hide.\n   */\n  Drilldown.prototype._hide = function ($elem) {\n    var _this = this;\n    $elem.addClass('is-closing').one(Foundation.transitionend($elem), function () {\n      $elem.removeClass('is-active is-closing');\n    });\n    /**\n     * Fires when the submenu is has closed.\n     * @event Drilldown#hide\n     */\n    $elem.trigger('hide.zf.drilldown', [$elem]);\n  };\n  /**\n   * Iterates through the nested menus to calculate the min-height, and max-width for the menu.\n   * Prevents content jumping.\n   * @function\n   * @private\n   */\n  Drilldown.prototype._getMaxDims = function () {\n    var max = 0,\n        result = {};\n    this.$submenus.add(this.$element).each(function () {\n      var numOfElems = $(this).children('li').length;\n      max = numOfElems > max ? numOfElems : max;\n    });\n\n    result.height = max * this.$menuItems[0].getBoundingClientRect().height + 'px';\n    result.width = this.$element[0].getBoundingClientRect().width + 'px';\n\n    return result;\n  };\n  /**\n   * Destroys the Drilldown Menu\n   * @function\n   */\n  Drilldown.prototype.destroy = function () {\n    this._hideAll();\n    Foundation.Nest.Burn(this.$element, 'drilldown');\n    this.$element.unwrap().find('.js-drilldown-back').remove().end().find('.is-active, .is-closing, .is-drilldown-sub').removeClass('is-active is-closing is-drilldown-sub').end().find('[data-submenu]').removeAttr('aria-hidden tabindex role').off('.zf.drilldown').end().off('zf.drilldown');\n\n    Foundation.unregisterPlugin(this);\n  };\n  Foundation.plugin(Drilldown, 'Drilldown');\n}(jQuery, window.Foundation);\n\n/**\n * Dropdown module.\n * @module foundation.dropdown\n * @requires foundation.util.keyboard\n * @requires foundation.util.box\n */\n!function ($, Foundation) {\n  'use strict';\n  /**\n   * Creates a new instance of a dropdown.\n   * @class\n   * @param {jQuery} element - jQuery object to make into an accordion menu.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n\n  function Dropdown(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, Dropdown.defaults, this.$element.data(), options);\n    this._init();\n\n    Foundation.registerPlugin(this);\n    Foundation.Keyboard.register('Dropdown', {\n      'ENTER': 'open',\n      'SPACE': 'open',\n      'ESCAPE': 'close',\n      'TAB': 'tab_forward',\n      'SHIFT_TAB': 'tab_backward'\n    });\n  }\n\n  Dropdown.defaults = {\n    /**\n     * Amount of time to delay opening a submenu on hover event.\n     * @option\n     * @example 250\n     */\n    hoverDelay: 250,\n    /**\n     * Allow submenus to open on hover events\n     * @option\n     * @example false\n     */\n    hover: false,\n    /**\n     * Number of pixels between the dropdown pane and the triggering element on open.\n     * @option\n     * @example 1\n     */\n    vOffset: 1,\n    /**\n     * Number of pixels between the dropdown pane and the triggering element on open.\n     * @option\n     * @example 1\n     */\n    hOffset: 1,\n    /**\n     * Class applied to adjust open position. JS will test and fill this in.\n     * @option\n     * @example 'top'\n     */\n    positionClass: '',\n    /**\n     * Allow the plugin to trap focus to the dropdown pane on open.\n     * @option\n     * @example false\n     */\n    trapFocus: false\n  };\n  /**\n   * Initializes the plugin by setting/checking options and attributes, adding helper variables, and saving the anchor.\n   * @function\n   * @private\n   */\n  Dropdown.prototype._init = function () {\n    var $id = this.$element.attr('id');\n\n    this.$anchor = $('[data-toggle=\"' + $id + '\"]') || $('[data-open=\"' + $id + '\"]');\n    this.$anchor.attr({\n      'aria-controls': $id,\n      'data-is-focus': false,\n      'data-yeti-box': $id,\n      'aria-haspopup': true,\n      'aria-expanded': false\n      // 'data-resize': $id\n    });\n\n    this.options.positionClass = this.getPositionClass();\n    this.counter = 4;\n    this.usedPositions = [];\n    this.$element.attr({\n      'aria-hidden': 'true',\n      'data-yeti-box': $id,\n      'data-resize': $id,\n      'aria-labelledby': this.$anchor[0].id || Foundation.GetYoDigits(6, 'dd-anchor')\n    });\n    this._events();\n  };\n  /**\n   * Helper function to determine current orientation of dropdown pane.\n   * @function\n   * @returns {String} position - string value of a position class.\n   */\n  Dropdown.prototype.getPositionClass = function () {\n    var position = this.$element[0].className.match(/(top|left|right)/g);\n    position = position ? position[0] : '';\n    return position;\n  };\n  /**\n   * Adjusts the dropdown panes orientation by adding/removing positioning classes.\n   * @function\n   * @private\n   * @param {String} position - position class to remove.\n   */\n  Dropdown.prototype._reposition = function (position) {\n    this.usedPositions.push(position ? position : 'bottom');\n    //default, try switching to opposite side\n    if (!position && this.usedPositions.indexOf('top') < 0) {\n      this.$element.addClass('top');\n    } else if (position === 'top' && this.usedPositions.indexOf('bottom') < 0) {\n      this.$element.removeClass(position);\n    } else if (position === 'left' && this.usedPositions.indexOf('right') < 0) {\n      this.$element.removeClass(position).addClass('right');\n    } else if (position === 'right' && this.usedPositions.indexOf('left') < 0) {\n      this.$element.removeClass(position).addClass('left');\n    }\n\n    //if default change didn't work, try bottom or left first\n    else if (!position && this.usedPositions.indexOf('top') > -1 && this.usedPositions.indexOf('left') < 0) {\n        this.$element.addClass('left');\n      } else if (position === 'top' && this.usedPositions.indexOf('bottom') > -1 && this.usedPositions.indexOf('left') < 0) {\n        this.$element.removeClass(position).addClass('left');\n      } else if (position === 'left' && this.usedPositions.indexOf('right') > -1 && this.usedPositions.indexOf('bottom') < 0) {\n        this.$element.removeClass(position);\n      } else if (position === 'right' && this.usedPositions.indexOf('left') > -1 && this.usedPositions.indexOf('bottom') < 0) {\n        this.$element.removeClass(position);\n      }\n      //if nothing cleared, set to bottom\n      else {\n          this.$element.removeClass(position);\n        }\n    this.classChanged = true;\n    this.counter--;\n  };\n  /**\n   * Sets the position and orientation of the dropdown pane, checks for collisions.\n   * Recursively calls itself if a collision is detected, with a new position class.\n   * @function\n   * @private\n   */\n  Dropdown.prototype._setPosition = function () {\n    if (this.$anchor.attr('aria-expanded') === 'false') {\n      return false;\n    }\n    var position = this.getPositionClass(),\n        $eleDims = Foundation.Box.GetDimensions(this.$element),\n        $anchorDims = Foundation.Box.GetDimensions(this.$anchor),\n        _this = this,\n        direction = position === 'left' ? 'left' : position === 'right' ? 'left' : 'top',\n        param = direction === 'top' ? 'height' : 'width',\n        offset = param === 'height' ? this.options.vOffset : this.options.hOffset;\n\n    if ($eleDims.width >= $eleDims.windowDims.width || !this.counter && !Foundation.Box.ImNotTouchingYou(this.$element)) {\n      this.$element.offset(Foundation.Box.GetOffsets(this.$element, this.$anchor, 'center bottom', this.options.vOffset, this.options.hOffset, true)).css({\n        'width': $eleDims.windowDims.width - this.options.hOffset * 2,\n        'height': 'auto'\n      });\n      this.classChanged = true;\n      return false;\n    }\n\n    this.$element.offset(Foundation.Box.GetOffsets(this.$element, this.$anchor, position, this.options.vOffset, this.options.hOffset));\n\n    while (!Foundation.Box.ImNotTouchingYou(this.$element) && this.counter) {\n      this._reposition(position);\n      this._setPosition();\n    }\n  };\n  /**\n   * Adds event listeners to the element utilizing the triggers utility library.\n   * @function\n   * @private\n   */\n  Dropdown.prototype._events = function () {\n    var _this = this;\n    this.$element.on({\n      'open.zf.trigger': this.open.bind(this),\n      'close.zf.trigger': this.close.bind(this),\n      'toggle.zf.trigger': this.toggle.bind(this),\n      'resizeme.zf.trigger': this._setPosition.bind(this)\n    });\n\n    if (this.options.hover) {\n      clearTimeout(_this.timeout);\n      this.$anchor.on('mouseenter.zf.dropdown mouseleave.zf.dropdown', function () {\n        _this.timeOut = setTimeout(function () {\n          _this.toggle();\n        }, _this.options.hoverDelay);\n      });\n    }\n    this.$anchor.add(this.$element).on('keydown.zf.dropdown', function (e) {\n\n      var visibleFocusableElements = Foundation.Keyboard.findFocusable(_this.$element);\n\n      Foundation.Keyboard.handleKey(e, _this, {\n        tab_forward: function tab_forward() {\n          if (this.$element.find(':focus').is(visibleFocusableElements.eq(-1))) {\n            // left modal downwards, setting focus to first element\n            if (this.options.trapFocus) {\n              // if focus shall be trapped\n              visibleFocusableElements.eq(0).focus();\n              e.preventDefault();\n            } else {\n              // if focus is not trapped, close dropdown on focus out\n              this.close();\n            }\n          }\n        },\n        tab_backward: function tab_backward() {\n          if (this.$element.find(':focus').is(visibleFocusableElements.eq(0)) || this.$element.is(':focus')) {\n            // left modal upwards, setting focus to last element\n            if (this.options.trapFocus) {\n              // if focus shall be trapped\n              visibleFocusableElements.eq(-1).focus();\n              e.preventDefault();\n            } else {\n              // if focus is not trapped, close dropdown on focus out\n              this.close();\n            }\n          }\n        },\n        open: function open() {\n          _this.open();\n          _this.$element.attr('tabindex', -1).focus();\n        },\n        close: function close() {\n          _this.close();\n          _this.$anchor.focus();\n        }\n      });\n    });\n  };\n  /**\n   * Opens the dropdown pane, and fires a bubbling event to close other dropdowns.\n   * @function\n   * @fires Dropdown#closeme\n   * @fires Dropdown#show\n   */\n  Dropdown.prototype.open = function () {\n    // var _this = this;\n    /**\n     * Fires to close other open dropdowns\n     * @event Dropdown#closeme\n     */\n    this.$element.trigger('closeme.zf.dropdown', this.$element.attr('id'));\n    this.$anchor.addClass('hover').attr({ 'aria-expanded': true });\n    // this.$element/*.show()*/;\n    this._setPosition();\n    this.$element.addClass('is-open').attr({ 'aria-hidden': false });\n\n    /**\n     * Fires once the dropdown is visible.\n     * @event Dropdown#show\n     */\n    this.$element.trigger('show.zf.dropdown', [this.$element]);\n    //why does this not work correctly for this plugin?\n    // Foundation.reflow(this.$element, 'dropdown');\n    // Foundation._reflow(this.$element.attr('data-dropdown'));\n  };\n\n  /**\n   * Closes the open dropdown pane.\n   * @function\n   * @fires Dropdown#hide\n   */\n  Dropdown.prototype.close = function () {\n    if (!this.$element.hasClass('is-open')) {\n      return false;\n    }\n    this.$element.removeClass('is-open').attr({ 'aria-hidden': true });\n\n    this.$anchor.removeClass('hover').attr('aria-expanded', false);\n\n    if (this.classChanged) {\n      var curPositionClass = this.getPositionClass();\n      if (curPositionClass) {\n        this.$element.removeClass(curPositionClass);\n      }\n      this.$element.addClass(this.options.positionClass)\n      /*.hide()*/.css({ height: '', width: '' });\n      this.classChanged = false;\n      this.counter = 4;\n      this.usedPositions.length = 0;\n    }\n    this.$element.trigger('hide.zf.dropdown', [this.$element]);\n    // Foundation.reflow(this.$element, 'dropdown');\n  };\n  /**\n   * Toggles the dropdown pane's visibility.\n   * @function\n   */\n  Dropdown.prototype.toggle = function () {\n    if (this.$element.hasClass('is-open')) {\n      this.close();\n    } else {\n      this.open();\n    }\n  };\n  /**\n   * Destroys the dropdown.\n   * @function\n   */\n  Dropdown.prototype.destroy = function () {\n    this.$element.off('.zf.trigger').hide();\n    this.$anchor.off('.zf.dropdown');\n\n    Foundation.unregisterPlugin(this);\n  };\n\n  Foundation.plugin(Dropdown, 'Dropdown');\n}(jQuery, window.Foundation);\n\n/**\n * DropdownMenu module.\n * @module foundation.dropdown-menu\n * @requires foundation.util.keyboard\n * @requires foundation.util.box\n * @requires foundation.util.nest\n */\n!function (Foundation, $) {\n  'use strict';\n\n  /**\n   * Creates a new instance of DropdownMenu.\n   * @class\n   * @fires DropdownMenu#init\n   * @param {jQuery} element - jQuery object to make into a dropdown menu.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n\n  function DropdownMenu(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, DropdownMenu.defaults, this.$element.data(), options);\n\n    Foundation.Nest.Feather(this.$element, 'dropdown');\n\n    this._init();\n\n    Foundation.registerPlugin(this);\n    Foundation.Keyboard.register('DropdownMenu', {\n      'ENTER': 'open',\n      'SPACE': 'open',\n      'ARROW_RIGHT': 'next',\n      'ARROW_UP': 'up',\n      'ARROW_DOWN': 'down',\n      'ARROW_LEFT': 'previous',\n      'ESCAPE': 'close'\n    });\n\n    // /**\n    //  * Fires when the plugin has been successfuly initialized.\n    //  * @event DropdownMenu#init\n    //  */\n    // this.$element.trigger('init.zf.dropdown');\n  }\n\n  /**\n   * Default settings for plugin\n   */\n  DropdownMenu.defaults = {\n    // toggleOn: 'both',\n    /**\n     * Allow a submenu to open/remain open on parent click event. Allows cursor to move away from menu.\n     * @option\n     * @example true\n     */\n    clickOpen: true,\n    /**\n     * Allow clicks on the body to close any open submenus.\n     * @option\n     * @example false\n     */\n    closeOnClick: false,\n    /**\n     * Disallows hover events from opening submenus\n     * @option\n     * @example false\n     */\n    disableHover: false,\n    /**\n     * Allow a submenu to automatically close on a mouseleave event.\n     * @option\n     * @example true\n     */\n    autoclose: true,\n    /**\n     * Amount of time to delay opening a submenu on hover event.\n     * @option\n     * @example 150\n     */\n    hoverDelay: 150,\n    /**\n     * Amount of time to delay closing a submenu on a mouseleave event.\n     * @option\n     * @example 500\n     */\n    closingTime: 500,\n    // wrapOnKeys: true,\n    /**\n     * Position of the menu relative to what direction the submenus should open. Handled by JS.\n     * @option\n     * @example 'left'\n     */\n    alignment: 'left',\n    /**\n     * Class applied to vertical oriented menus, Foundation default is `vertical`. Update this if using your own class.\n     * @option\n     * @example 'vertical'\n     */\n    verticalClass: 'vertical',\n    /**\n     * Class applied to right-side oriented menus, Foundation default is `align-right`. Update this if using your own class.\n     * @option\n     * @example 'align-right'\n     */\n    rightClass: 'align-right'\n  };\n  /**\n   * Initializes the plugin, and calls _prepareMenu\n   * @private\n   * @function\n   */\n  DropdownMenu.prototype._init = function () {\n    if (this.$element.hasClass(this.options.verticalClass)) {\n      this.vertical = true;\n    }\n    // this.vertical = this.$element.hasClass(this.options.verticalClass);\n    this._prepareMenu();\n    // this._addTopLevelKeyHandler();\n  };\n  /**\n   * Prepares the menu by checking alignment and orientation, setting attributes for elements, and creating jQuery collections of elements.\n   * @private\n   * @function\n   */\n  DropdownMenu.prototype._prepareMenu = function () {\n    var _this = this;\n    this.$tabs = this.$element.children('li.has-submenu');\n    this.$tabs.children('[data-submenu]').addClass('first-sub');\n    this.$submenus = this.$element.find('li.has-submenu');\n    this.$menuItems = this.$element.find('li').attr({ 'role': 'menuitem', 'tabindex': 0 });\n    this.$menuItems.children('a').attr('tabindex', -1);\n    if (this.$element.hasClass(this.options.rightClass)) {\n      this.options.alignment = 'right';\n      this.$submenus.addClass('is-left-arrow opens-left');\n    } else {\n      this.$submenus.addClass('is-right-arrow opens-right');\n    }\n    if (!this.vertical) {\n      this.$tabs.removeClass('is-right-arrow is-left-arrow opens-left opens-right').addClass('is-down-arrow');\n    }\n\n    this.$tabs.each(function () {\n      var $tab = $(this);\n      $tab.attr({\n        'role': 'menuitem',\n        'tabindex': 0,\n        'title': $tab.children('a:first-child').text() /*.match(/\\w/ig).join('')*/\n      }).children('a').attr('tabindex', -1); //maybe add a more specific regex to match alphanumeric characters and join them appropriately\n      if ($tab.children('[data-submenu]')) {\n        $tab.attr('aria-haspopup', true);\n      }\n    });\n\n    this.$submenus.each(function () {\n      var $sub = $(this);\n\n      // if(_this.options.alignment === 'right'){\n      //   $sub.children('[data-submenu]').addClass('is-right-arrow');\n      // }\n\n      $sub.children('[data-submenu]').attr({\n        'aria-hidden': true,\n        'tabindex': -1,\n        'role': 'menu'\n      }).addClass('vertical');\n      _this._events($sub);\n    });\n  };\n\n  /**\n   * Adds event listeners to elements within the menu\n   * @param {jQuery} $elem - the element to attach listeners too.\n   * @private\n   * @function\n   */\n  DropdownMenu.prototype._events = function ($elem) {\n    var _this = this;\n\n    if (this.options.clickOpen) {\n      $elem.off('click.zf.dropdownmenu').on('click.zf.dropdownmenu', function (e) {\n        if (!$(this).hasClass('is-dropdown-submenu-parent')) {\n          return;\n        }\n\n        e.preventDefault();\n        e.stopPropagation();\n\n        if ($elem.data('isClick')) {\n          _this._hide($elem);\n        } else {\n          _this._hideOthers($elem);\n          _this._show($elem);\n          $elem.data('isClick', true).parentsUntil('[data-dropdown-menu]', '.is-dropdown-submenu-parent').data('isClick', true);\n          if (_this.options.closeOnClick) {\n            _this._addBodyHandler();\n          }\n        }\n      });\n    }\n\n    if (!this.options.disableHover) {\n      //add ability for all menu items to close an open menu on the same level//\n      this.$menuItems.on('mouseenter.zf.dropdownmenu', function (e) {\n        var $el = $(this);\n        if (!$el.hasClass('is-active')) {\n          _this._hideOthers($el);\n        }\n      });\n      //elements with submenus\n      $elem.on('mouseenter.zf.dropdownmenu', function (e) {\n        clearTimeout($elem.closeTimer);\n        if (!$elem.hasClass('is-active')) {\n          $elem.openTimer = setTimeout(function () {\n            // _this._hideOthers($elem);\n            _this._show($elem);\n          }, _this.options.hoverDelay);\n        }\n      }).on('mouseleave.zf.dropdownmenu', function (e) {\n        if (!$elem.data('isClick') && _this.options.autoclose) {\n          clearTimeout($elem.openTimer);\n          $elem.closeTimer = setTimeout(function () {\n            _this._hide($elem);\n          }, _this.options.closingTime);\n        }\n      });\n    }\n\n    this.$menuItems.on('keydown.zf.dropdownmenu', function (e) {\n      var $element = $(this),\n          $tabs = _this.$element.children('li'),\n          isTab = $element.is($tabs),\n          $elements = isTab ? $tabs : $element.parents('li').first().add($element.parent('ul').children('li')),\n          $prevElement,\n          $nextElement;\n\n      $elements.each(function (i) {\n        if ($(this).is($element)) {\n          $prevElement = $elements.eq(i - 1);\n          $nextElement = $elements.eq(i + 1);\n          return;\n        }\n      });\n      var nextSibling = function nextSibling() {\n        if (!$element.is(':last-child')) $nextElement.focus();\n      },\n          prevSibling = function prevSibling() {\n        $prevElement.focus();\n      },\n          openSub = function openSub() {\n        if ($element.has('ul').length) {\n          _this._show($element);\n          $element.find('li').first().focus();\n        }\n      },\n          closeSub = function closeSub() {\n        //if ($element.is(':first-child')) {\n        $element.parents('li').first().focus();\n        _this._hide($element.parents('li').first());\n        //}\n      };\n      var functions = {\n        open: openSub,\n        close: function close() {\n          _this._hideAll();\n          _this.$menuItems.first().focus(); // focus to first element\n        },\n        handled: function handled() {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n      };\n\n      if (isTab) {\n        if (_this.vertical) {\n          // vertical menu\n          if (_this.options.alignment === 'left') {\n            // left aligned\n            $.extend(functions, {\n              down: nextSibling,\n              up: prevSibling,\n              next: openSub,\n              previous: closeSub\n            });\n          } else {\n            // right aligned\n            $.extend(functions, {\n              down: nextSibling,\n              up: prevSibling,\n              next: closeSub,\n              previous: openSub\n            });\n          }\n        } else {\n          // horizontal menu\n          $.extend(functions, {\n            next: nextSibling,\n            previous: prevSibling,\n            down: openSub,\n            up: closeSub\n          });\n        }\n      } else {\n        // not tabs -> one sub\n        if (_this.options.alignment === 'left') {\n          // left aligned\n          $.extend(functions, {\n            next: openSub,\n            previous: closeSub,\n            down: nextSibling,\n            up: prevSibling\n          });\n        } else {\n          // right aligned\n          $.extend(functions, {\n            next: closeSub,\n            previous: openSub,\n            down: nextSibling,\n            up: prevSibling\n          });\n        }\n      }\n      Foundation.Keyboard.handleKey(e, _this, functions);\n    });\n    // end keyboardAccess\n  };\n  /**\n   * Toggles the current dropdown pane.\n   * @param {jQuery} $elem - the current element with a submenu to toggle.\n   * @function\n   * @private\n   */\n  DropdownMenu.prototype._toggle = function ($elem) {\n    if ($elem.hasClass('is-active')) {\n      this._hide($elem);\n    } else {\n      this._show($elem);\n    }\n  };\n  /**\n   * Adds an event handler to the body to close any dropdowns on a click.\n   * @function\n   * @private\n   */\n  DropdownMenu.prototype._addBodyHandler = function () {\n    var $body = $('body'),\n        _this = this;\n    $body.not(_this.$element).on('click.zf.dropdownmenu tap.zf.dropdownmenu touchend.zf.dropdownmenu', function (e) {\n      _this._hideAll();\n      $body.off('click.zf.dropdownmenu tap.zf.dropdownmenu touchend.zf.dropdownmenu');\n    });\n  };\n  //show & hide stuff @private\n  /**\n   * Opens a dropdown pane, and checks for collisions first.\n   * @param {jQuery} $elem - current element with a submenu to show\n   * @function\n   * @private\n   * @fires DropdownMenu#show\n   */\n  DropdownMenu.prototype._show = function ($elem) {\n    this._hideOthers($elem);\n    $elem.focus();\n    // console.log('showing some stuff', $elem.find('li:first-child'));\n    var $sub = $elem.children('[data-submenu]:first-of-type');\n    $elem.addClass('is-active');\n    $sub.css('visibility', 'hidden').addClass('js-dropdown-active').attr('aria-hidden', false);\n\n    //break this into own function\n    var clear = Foundation.Box.ImNotTouchingYou($sub, null, true);\n    if (!clear) {\n      if (this.options.alignment === 'left') {\n        $elem.removeClass('opens-left').addClass('opens-right');\n      } else {\n        $elem.removeClass('opens-right').addClass('opens-left');\n      }\n      this.changed = true;\n\n      // still not clear, small screen, add inner class\n      clear = Foundation.Box.ImNotTouchingYou($sub, null, true);\n      if (!clear) {\n        $elem.removeClass('opens-left opens-right').addClass('opens-inner');\n        this.changed = true;\n      }\n    }\n    $sub.css('visibility', '');\n    /**\n     * Fires when the new dropdown pane is visible.\n     * @event DropdownMenu#show\n     */\n    this.$element.trigger('show.zf.dropdownmenu', [$elem]);\n  };\n  /**\n   * Hides a single, currently open dropdown pane.\n   * @function\n   * @param {jQuery} $elem - element with a submenu to hide\n   * @private\n   */\n  DropdownMenu.prototype._hide = function ($elem) {\n    this._hideSome($elem);\n  };\n  /**\n   * Hides currently open dropdown panes from a jQuery collection passed by other functions.\n   * Resets the position classes if the element was mutated due to a collision.\n   * @function\n   * @param {jQuery} $elems - element(s) with a submenu to hide\n   * @private\n   * @fires DropdownMenu#hide\n   */\n  DropdownMenu.prototype._hideSome = function ($elems) {\n    if ($elems.length) {\n      // if($elems.hasClass('first-sub')){\n      //   console.log('true');\n      //   $elems.blur();\n      // }\n      $elems.removeClass('is-active opens-inner').data('isClick', false).find('.is-active').removeClass('is-active').data('isClick', false).end().find('.js-dropdown-active').removeClass('js-dropdown-active').attr('aria-hidden', true);\n      $elems.parent('.has-submenu').removeClass('is-active');\n      if (this.changed) {\n        //remove position class\n        if (this.options.alignment === 'left') {\n          $elems.find('.opens-left').removeClass('opens-left').addClass('opens-right');\n        } else {\n          $elems.find('.opens-right').removeClass('opens-right').addClass('opens-left');\n        }\n      }\n      /**\n       * Fires when the open menus are closed.\n       * @event DropdownMenu#hide\n       */\n      this.$element.trigger('hide.zf.dropdownmenu');\n    }\n  };\n  /**\n   * Hides a submenu's siblings.\n   * @param {jQuery} $elem - the element that should remain open.\n   * @function\n   * @private\n   */\n  DropdownMenu.prototype._hideOthers = function ($elem) {\n    this._hideSome($elem.siblings('.has-submenu.is-active'));\n  };\n  /**\n   * Hides everything.\n   * @function\n   */\n  DropdownMenu.prototype._hideAll = function () {\n    this._hideSome(this.$element);\n  };\n  /**\n   * Destroys the plugin.\n   * @function\n   */\n  DropdownMenu.prototype.destroy = function () {\n    this._hideAll();\n    this.$element.removeData('zf-plugin').find('li').removeClass('js-dropdown-nohover is-right-arrow is-left-arrow opens-left opens-inner opens-right').add('a').off('.zf.dropdownmenu').end().find('ul').removeClass('first-sub');\n    Foundation.Nest.Burn(this.$element, 'dropdown');\n    Foundation.unregisterPlugin(this);\n  };\n\n  Foundation.plugin(DropdownMenu, 'DropdownMenu');\n\n  var checkClass = function checkClass($elem) {\n    return $elem.hasClass('is-active');\n  };\n}(Foundation, jQuery);\n\n!function (Foundation, $) {\n  'use strict';\n\n  /**\n   * Creates a new instance of Equalizer.\n   * @class\n   * @fires Equalizer#init\n   * @param {Object} element - jQuery object to add the trigger to.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n\n  function Equalizer(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, Equalizer.defaults, this.$element.data(), options);\n    this.$window = $(window);\n    this.name = 'equalizer';\n    this.attr = 'data-equalizer';\n\n    this._init();\n    this._events();\n\n    Foundation.registerPlugin(this);\n  }\n\n  /**\n   * Default settings for plugin\n   */\n  Equalizer.defaults = {\n    /**\n     * Enable height equalization when stacked on smaller screens.\n     * @option\n     * @example true\n     */\n    equalizeOnStack: true,\n    /**\n     * Amount of time, in ms, to debounce the size checking/equalization. Lower times mean smoother transitions/less performance on mobile.\n     * @option\n     * @example 50\n     */\n    throttleInterval: 50\n  };\n\n  /**\n   * Initializes the Equalizer plugin and calls functions to get equalizer functioning on load.\n   * @private\n   */\n  Equalizer.prototype._init = function () {\n    this._reflow();\n  };\n\n  /**\n   * Initializes events for Equalizer.\n   * @private\n   */\n  Equalizer.prototype._events = function () {\n    var self = this;\n\n    this.$window.off('.equalizer').on('resize.fndtn.equalizer', Foundation.util.throttle(function () {\n      self._reflow();\n    }, self.options.throttleInterval));\n  };\n\n  /**\n   * A noop version for the plugin\n   * @private\n   */\n  Equalizer.prototype._killswitch = function () {\n    return;\n  };\n  /**\n   * Calls necessary functions to update Equalizer upon DOM change\n   * @private\n   */\n  Equalizer.prototype._reflow = function () {\n    var self = this;\n\n    $('[' + this.attr + ']').each(function () {\n      var $eqParent = $(this),\n          adjustedHeights = [],\n          $images = $eqParent.find('img');\n\n      if ($images.length) {\n        Foundation.onImagesLoaded($images, function () {\n          adjustedHeights = self.getHeights($eqParent);\n          self.applyHeight($eqParent, adjustedHeights);\n        });\n      } else {\n        adjustedHeights = self.getHeights($eqParent);\n        self.applyHeight($eqParent, adjustedHeights);\n      }\n    });\n  };\n  /**\n   * Finds the outer heights of children contained within an Equalizer parent and returns them in an array\n   * @param {Object} $eqParent A jQuery instance of an Equalizer container\n   * @returns {Array} heights An array of heights of children within Equalizer container\n   */\n  Equalizer.prototype.getHeights = function ($eqParent) {\n    var eqGroupName = $eqParent.data('equalizer'),\n        eqGroup = eqGroupName ? $eqParent.find('[' + this.attr + '-watch=\"' + eqGroupName + '\"]:visible') : $eqParent.find('[' + this.attr + '-watch]:visible'),\n        heights;\n\n    eqGroup.height('inherit');\n    heights = eqGroup.map(function () {\n      return $(this).outerHeight(false);\n    }).get();\n    console.log(heights);\n    return heights;\n  };\n  /**\n   * Changes the CSS height property of each child in an Equalizer parent to match the tallest\n   * @param {Object} $eqParent - A jQuery instance of an Equalizer container\n   * @param {array} heights - An array of heights of children within Equalizer container\n   * @fires Equalizer#preEqualized\n   * @fires Equalizer#postEqualized\n   */\n  Equalizer.prototype.applyHeight = function ($eqParent, heights) {\n    var eqGroupName = $eqParent.data('equalizer'),\n        eqGroup = eqGroupName ? $eqParent.find('[' + this.attr + '-watch=\"' + eqGroupName + '\"]:visible') : $eqParent.find('[' + this.attr + '-watch]:visible'),\n        max = Math.max.apply(null, heights);\n\n    /**\n     * Fires before the heights are applied\n     * @event Equalizer#preEqualized\n     */\n    $eqParent.trigger('preEqualized.zf.Equalizer');\n\n    // for now, apply the max height found in the array\n    for (var i = 0; i < eqGroup.length; i++) {\n      $(eqGroup[i]).css('height', max);\n    }\n    // console.log(max);\n    /**\n     * Fires when the heights have been applied\n     * @event Equalizer#postEqualized\n     */\n    $eqParent.trigger('postEqualized.zf.Equalizer');\n  };\n  /**\n   * Destroys an instance of Equalizer.\n   * @function\n   */\n  Equalizer.prototype.destroy = function () {\n    //TODO this.\n  };\n\n  Foundation.plugin(Equalizer, 'Equalizer');\n\n  // Exports for AMD/Browserify\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') module.exports = Equalizer;\n  if (typeof define === 'function') define(['foundation'], function () {\n    return Equalizer;\n  });\n}(Foundation, jQuery);\n\n/**\n * Interchange module.\n * @module foundation.interchange\n * @requires foundation.util.mediaQuery\n * @requires foundation.util.timerAndImageLoader\n */\n!function (Foundation, $) {\n  'use strict';\n\n  /**\n   * Creates a new instance of Interchange.\n   * @class\n   * @fires Interchange#init\n   * @param {Object} element - jQuery object to add the trigger to.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n\n  function Interchange(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, Interchange.defaults, options);\n    this.rules = [];\n    this.currentPath = '';\n\n    this._init();\n    this._events();\n\n    Foundation.registerPlugin(this);\n  }\n\n  /**\n   * Default settings for plugin\n   */\n  Interchange.defaults = {\n    /**\n     * Rules to be applied to Interchange elements. Set with the `data-interchange` array notation.\n     * @option\n     */\n    rules: null\n  };\n\n  Interchange.SPECIAL_QUERIES = {\n    'landscape': 'screen and (orientation: landscape)',\n    'portrait': 'screen and (orientation: portrait)',\n    'retina': 'only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min-device-pixel-ratio: 2), only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx)'\n  };\n\n  /**\n   * Initializes the Interchange plugin and calls functions to get interchange functioning on load.\n   * @function\n   * @private\n   */\n  Interchange.prototype._init = function () {\n    this._addBreakpoints();\n    this._generateRules();\n    this._reflow();\n  };\n\n  /**\n   * Initializes events for Interchange.\n   * @function\n   * @private\n   */\n  Interchange.prototype._events = function () {\n    $(window).on('resize.fndtn.interchange', Foundation.util.throttle(this._reflow.bind(this), 50));\n  };\n\n  /**\n   * Calls necessary functions to update Interchange upon DOM change\n   * @function\n   * @private\n   */\n  Interchange.prototype._reflow = function () {\n    var match;\n\n    // Iterate through each rule, but only save the last match\n    for (var i in this.rules) {\n      var rule = this.rules[i];\n\n      if (window.matchMedia(rule.query).matches) {\n        match = rule;\n      }\n    }\n\n    if (match) {\n      this.replace(match.path);\n    }\n  };\n\n  /**\n   * Gets the Foundation breakpoints and adds them to the Interchange.SPECIAL_QUERIES object.\n   * @function\n   * @private\n   */\n  Interchange.prototype._addBreakpoints = function () {\n    for (var i in Foundation.MediaQuery.queries) {\n      var query = Foundation.MediaQuery.queries[i];\n      Interchange.SPECIAL_QUERIES[query.name] = query.value;\n    }\n  };\n\n  /**\n   * Checks the Interchange element for the provided media query + content pairings\n   * @function\n   * @private\n   * @param {Object} element - jQuery object that is an Interchange instance\n   * @returns {Array} scenarios - Array of objects that have 'mq' and 'path' keys with corresponding keys\n   */\n  Interchange.prototype._generateRules = function () {\n    var rulesList = [];\n    var rules;\n\n    if (this.options.rules) {\n      rules = this.options.rules;\n    } else {\n      rules = this.$element.data('interchange').match(/\\[.*?\\]/g);\n    }\n\n    for (var i in rules) {\n      var rule = rules[i].slice(1, -1).split(', ');\n      var path = rule.slice(0, -1).join('');\n      var query = rule[rule.length - 1];\n\n      if (Interchange.SPECIAL_QUERIES[query]) {\n        query = Interchange.SPECIAL_QUERIES[query];\n      }\n\n      rulesList.push({\n        path: path,\n        query: query\n      });\n    }\n\n    this.rules = rulesList;\n  };\n\n  /**\n   * Update the `src` property of an image, or change the HTML of a container, to the specified path.\n   * @function\n   * @param {String} path - Path to the image or HTML partial.\n   * @fires Interchange#replaced\n   */\n  Interchange.prototype.replace = function (path) {\n    if (this.currentPath === path) return;\n\n    var _this = this;\n\n    // Replacing images\n    if (this.$element[0].nodeName === 'IMG') {\n      this.$element.attr('src', path).load(function () {\n        _this.$element.trigger('replaced.zf.interchange');\n        _this.currentPath = path;\n      });\n    }\n    // Replacing background images\n    else if (path.match(/\\.(gif|jpg|jpeg|tiff|png)([?#].*)?/i)) {\n        this.$element.css({ 'background-image': 'url(' + path + ')' });\n      }\n      // Replacing HTML\n      else {\n          $.get(path, function (response) {\n            _this.$element.html(response);\n            _this.$element.trigger('replaced.zf.interchange');\n            _this.currentPath = path;\n          });\n        }\n  };\n  /**\n   * Destroys an instance of interchange.\n   * @function\n   */\n  Interchange.prototype.destroy = function () {\n    //TODO this.\n  };\n  Foundation.plugin(Interchange, 'Interchange');\n\n  // Exports for AMD/Browserify\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') module.exports = Interchange;\n  if (typeof define === 'function') define(['foundation'], function () {\n    return Interchange;\n  });\n}(Foundation, jQuery);\n\n/**\n * Magellan module.\n * @module foundation.magellan\n */\n!function (Foundation, $) {\n  'use strict';\n\n  /**\n   * Creates a new instance of Magellan.\n   * @class\n   * @fires Magellan#init\n   * @param {Object} element - jQuery object to add the trigger to.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n\n  function Magellan(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, Magellan.defaults, options);\n\n    this._init();\n\n    Foundation.registerPlugin(this);\n  }\n\n  /**\n   * Default settings for plugin\n   */\n  Magellan.defaults = {\n    /**\n     * Amount of time, in ms, the animated scrolling should take between locations.\n     * @option\n     * @example 500\n     */\n    animationDuration: 500,\n    /**\n     * Animation style to use when scrolling between locations.\n     * @option\n     * @example 'ease-in-out'\n     */\n    animationEasing: 'linear',\n    /**\n     * Number of pixels to use as a marker for location changes.\n     * @option\n     * @example 50\n     */\n    threshold: 50,\n    /**\n     * Class applied to the active locations link on the magellan container.\n     * @option\n     * @example 'active'\n     */\n    activeClass: 'active',\n    /**\n     * Allows the script to manipulate the url of the current page, and if supported, alter the history.\n     * @option\n     * @example true\n     */\n    deepLinking: false\n  };\n\n  /**\n   * Initializes the Magellan plugin and calls functions to get equalizer functioning on load.\n   * @private\n   */\n  Magellan.prototype._init = function () {\n    var id = this.$element[0].id || Foundation.GetYoDigits(6, 'magellan'),\n        _this = this;\n    this.$targets = $('[data-magellan-target]');\n    this.$links = this.$element.find('a');\n    this.$element.attr({\n      'data-resize': id,\n      'data-scroll': id,\n      'id': id\n    });\n    this.$active = $();\n    this.scrollPos = parseInt(window.pageYOffset, 10);\n\n    this._events();\n  };\n  /**\n   * Calculates an array of pixel values that are the demarcation lines between locations on the page.\n   * Can be invoked if new elements are added or the size of a location changes.\n   * @function\n   */\n  Magellan.prototype.calcPoints = function () {\n    var _this = this,\n        body = document.body,\n        html = document.documentElement;\n\n    this.points = [];\n    this.winHeight = Math.round(Math.max(window.innerHeight, document.body.clientHeight));\n    this.docHeight = Math.round(Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight));\n\n    this.$targets.each(function () {\n      var $tar = $(this),\n          pt = Math.round($tar.offset().top - _this.options.threshold);\n      $tar.targetPoint = pt;\n      _this.points.push(pt);\n    });\n  };\n  /**\n   * Initializes events for Magellan.\n   * @private\n   */\n  Magellan.prototype._events = function () {\n    var _this = this,\n        $body = $('html, body'),\n        opts = {\n      duration: _this.options.animationDuration,\n      easing: _this.options.animationEasing\n    };\n\n    $(window).one('load', function () {\n      _this.calcPoints();\n      _this._updateActive();\n    });\n\n    this.$element.on({\n      'resizeme.zf.trigger': this.reflow.bind(this),\n      'scrollme.zf.trigger': this._updateActive.bind(this)\n    }).on('click.zf.magellan', 'a[href^=\"#\"]', function (e) {\n      e.preventDefault();\n      var arrival = this.getAttribute('href'),\n          scrollPos = $(arrival).offset().top - _this.options.threshold / 2;\n\n      // requestAnimationFrame is disabled for this plugin currently\n      // Foundation.Move(_this.options.animationDuration, $body, function(){\n      $body.stop(true).animate({\n        scrollTop: scrollPos\n      }, opts);\n    });\n    // });\n  };\n  /**\n   * Calls necessary functions to update Magellan upon DOM change\n   * @function\n   */\n  Magellan.prototype.reflow = function () {\n    this.calcPoints();\n    this._updateActive();\n  };\n  /**\n   * Updates the visibility of an active location link, and updates the url hash for the page, if deepLinking enabled.\n   * @private\n   * @function\n   * @fires Magellan#update\n   */\n  Magellan.prototype._updateActive = function () /*evt, elem, scrollPos*/{\n    var winPos = /*scrollPos ||*/parseInt(window.pageYOffset, 10),\n        curIdx;\n\n    if (winPos + this.winHeight === this.docHeight) {\n      curIdx = this.points.length - 1;\n    } else if (winPos < this.points[0]) {\n      curIdx = 0;\n    } else {\n      var isDown = this.scrollPos < winPos,\n          _this = this,\n          curVisible = this.points.filter(function (p, i) {\n        return isDown ? p <= winPos : p - _this.options.threshold <= winPos; //&& winPos >= _this.points[i -1] - _this.options.threshold;\n      });\n      curIdx = curVisible.length ? curVisible.length - 1 : 0;\n    }\n\n    this.$active.removeClass(this.options.activeClass);\n    this.$active = this.$links.eq(curIdx).addClass(this.options.activeClass);\n\n    if (this.options.deepLinking) {\n      var hash = this.$active[0].getAttribute('href');\n      if (window.history.pushState) {\n        window.history.pushState(null, null, hash);\n      } else {\n        window.location.hash = hash;\n      }\n    }\n\n    this.scrollPos = winPos;\n    /**\n     * Fires when magellan is finished updating to the new active element.\n     * @event Magellan#update\n     */\n    this.$element.trigger('update.zf.magellan', [this.$active]);\n  };\n  /**\n   * Destroys an instance of Magellan and resets the url of the window.\n   * @function\n   */\n  Magellan.prototype.destroy = function () {\n    this.$element.off('.zf.trigger .zf.magellan').find('.' + this.options.activeClass).removeClass(this.options.activeClass);\n\n    var hash = this.$active[0].getAttribute('href');\n\n    window.location.hash.replace(hash, '');\n\n    Foundation.unregisterPlugin(this);\n  };\n  Foundation.plugin(Magellan, 'Magellan');\n\n  // Exports for AMD/Browserify\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') module.exports = Magellan;\n  if (typeof define === 'function') define(['foundation'], function () {\n    return Magellan;\n  });\n}(Foundation, jQuery);\n\n/**\n * OffCanvas module.\n * @module foundation.offcanvas\n * @requires foundation.util.triggers\n * @requires foundation.util.motion\n */\n!function ($, Foundation) {\n\n  'use strict';\n\n  /**\n   * Creates a new instance of an off-canvas wrapper.\n   * @class\n   * @fires OffCanvas#init\n   * @param {Object} element - jQuery object to initialize.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n\n  function OffCanvas(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, OffCanvas.defaults, this.$element.data(), options);\n    this.$lastTrigger = $();\n\n    this._init();\n    this._events();\n\n    Foundation.registerPlugin(this);\n  }\n\n  OffCanvas.defaults = {\n    /**\n     * Allow the user to click outside of the menu to close it.\n     * @option\n     * @example true\n     */\n    closeOnClick: true,\n    /**\n     * Amount of time in ms the open and close transition requires. If none selected, pulls from body style.\n     * @option\n     * @example 500\n     */\n    transitionTime: 0,\n    /**\n     * Direction the offcanvas opens from. Determines class applied to body.\n     * @option\n     * @example left\n     */\n    position: 'left',\n    /**\n     * Force the page to scroll to top on open.\n     */\n    forceTop: true,\n    /**\n     * Allow the offcanvas to be sticky while open. Does nothing if Sass option `$maincontent-prevent-scroll === true`.\n     * Performance in Safari OSX/iOS is not great.\n     */\n    // isSticky: false,\n    /**\n     * Allow the offcanvas to remain open for certain breakpoints. Can be used with `isSticky`.\n     * @option\n     * @example false\n     */\n    isRevealed: false,\n    /**\n     * Breakpoint at which to reveal. JS will use a RegExp to target standard classes, if changing classnames, pass your class @`revealClass`.\n     * @option\n     * @example reveal-for-large\n     */\n    revealOn: null,\n    /**\n     * Force focus to the offcanvas on open. If true, will focus the opening trigger on close.\n     * @option\n     * @example true\n     */\n    autoFocus: true,\n    /**\n     * Class used to force an offcanvas to remain open. Foundation defaults for this are `reveal-for-large` & `reveal-for-medium`.\n     * @option\n     * TODO improve the regex testing for this.\n     * @example reveal-for-large\n     */\n    revealClass: 'reveal-for-'\n  };\n\n  /**\n   * Initializes the off-canvas wrapper by adding the exit overlay (if needed).\n   * @function\n   * @private\n   */\n  OffCanvas.prototype._init = function () {\n    var id = this.$element.attr('id');\n\n    this.$element.attr('aria-hidden', 'true');\n\n    // Find triggers that affect this element and add aria-expanded to them\n    $(document).find('[data-open=\"' + id + '\"], [data-close=\"' + id + '\"], [data-toggle=\"' + id + '\"]').attr('aria-expanded', 'false').attr('aria-controls', id);\n\n    // Add a close trigger over the body if necessary\n    if (this.options.closeOnClick) {\n      if ($('.js-off-canvas-exit').length) {\n        this.$exiter = $('.js-off-canvas-exit');\n      } else {\n        var exiter = document.createElement('div');\n        exiter.setAttribute('class', 'js-off-canvas-exit');\n        $('[data-off-canvas-content]').append(exiter);\n\n        this.$exiter = $(exiter);\n      }\n    }\n\n    this.options.isRevealed = this.options.isRevealed || new RegExp(this.options.revealClass, 'g').test(this.$element[0].className);\n\n    if (this.options.isRevealed) {\n      this.options.revealOn = this.options.revealOn || this.$element[0].className.match(/(reveal-for-medium|reveal-for-large)/g)[0].split('-')[2];\n      this._setMQChecker();\n    }\n    if (!this.options.transitionTime) {\n      this.options.transitionTime = parseFloat(window.getComputedStyle($('[data-off-canvas-wrapper]')[0]).transitionDuration) * 1000;\n    }\n  };\n\n  /**\n   * Adds event handlers to the off-canvas wrapper and the exit overlay.\n   * @function\n   * @private\n   */\n  OffCanvas.prototype._events = function () {\n    this.$element.on({\n      'open.zf.trigger': this.open.bind(this),\n      'close.zf.trigger': this.close.bind(this),\n      'toggle.zf.trigger': this.toggle.bind(this),\n      'keydown.zf.offcanvas': this._handleKeyboard.bind(this)\n    });\n\n    if (this.$exiter.length) {\n      var _this = this;\n      this.$exiter.on({ 'click.zf.offcanvas': this.close.bind(this) });\n    }\n  };\n  /**\n   * Applies event listener for elements that will reveal at certain breakpoints.\n   * @private\n   */\n  OffCanvas.prototype._setMQChecker = function () {\n    var _this = this;\n\n    $(window).on('changed.zf.mediaquery', function () {\n      if (Foundation.MediaQuery.atLeast(_this.options.revealOn)) {\n        _this.reveal(true);\n      } else {\n        _this.reveal(false);\n      }\n    }).one('load.zf.offcanvas', function () {\n      if (Foundation.MediaQuery.atLeast(_this.options.revealOn)) {\n        _this.reveal(true);\n      }\n    });\n  };\n  /**\n   * Handles the revealing/hiding the off-canvas at breakpoints, not the same as open.\n   * @param {Boolean} isRevealed - true if element should be revealed.\n   * @function\n   */\n  OffCanvas.prototype.reveal = function (isRevealed) {\n    var $closer = this.$element.find('[data-close]');\n    if (isRevealed) {\n      // if(!this.options.forceTop){\n      //   var scrollPos = parseInt(window.pageYOffset);\n      //   this.$element[0].style.transform = 'translate(0,' + scrollPos + 'px)';\n      // }\n      // if(this.options.isSticky){ this._stick(); }\n      if ($closer.length) {\n        $closer.hide();\n      }\n    } else {\n      // if(this.options.isSticky || !this.options.forceTop){\n      //   this.$element[0].style.transform = '';\n      //   $(window).off('scroll.zf.offcanvas');\n      // }\n      if ($closer.length) {\n        $closer.show();\n      }\n    }\n  };\n\n  /**\n   * Opens the off-canvas menu.\n   * @function\n   * @param {Object} event - Event object passed from listener.\n   * @param {jQuery} trigger - element that triggered the off-canvas to open.\n   * @fires OffCanvas#opened\n   */\n  OffCanvas.prototype.open = function (event, trigger) {\n    if (this.$element.hasClass('is-open')) {\n      return;\n    }\n    var _this = this,\n        $body = $(document.body);\n    $('body').scrollTop(0);\n    // window.pageYOffset = 0;\n\n    // if(!this.options.forceTop){\n    //   var scrollPos = parseInt(window.pageYOffset);\n    //   this.$element[0].style.transform = 'translate(0,' + scrollPos + 'px)';\n    //   if(this.$exiter.length){\n    //     this.$exiter[0].style.transform = 'translate(0,' + scrollPos + 'px)';\n    //   }\n    // }\n    /**\n     * Fires when the off-canvas menu opens.\n     * @event OffCanvas#opened\n     */\n    Foundation.Move(this.options.transitionTime, this.$element, function () {\n      $('[data-off-canvas-wrapper]').addClass('is-off-canvas-open is-open-' + _this.options.position);\n\n      _this.$element.addClass('is-open').attr('aria-hidden', 'false').trigger('opened.zf.offcanvas');\n\n      // if(_this.options.isSticky){\n      //   _this._stick();\n      // }\n    });\n    if (trigger) {\n      this.$lastTrigger = trigger.attr('aria-expanded', 'true');\n    }\n    if (this.options.autoFocus) {\n      this.$element.one('finished.zf.animate', function () {\n        _this.$element.find('a, button').eq(0).focus();\n      });\n    }\n  };\n  /**\n   * Allows the offcanvas to appear sticky utilizing translate properties.\n   * @private\n   */\n  // OffCanvas.prototype._stick = function(){\n  //   var elStyle = this.$element[0].style;\n  //\n  //   if(this.options.closeOnClick){\n  //     var exitStyle = this.$exiter[0].style;\n  //   }\n  //\n  //   $(window).on('scroll.zf.offcanvas', function(e){\n  //     console.log(e);\n  //     var pageY = window.pageYOffset;\n  //     elStyle.transform = 'translate(0,' + pageY + 'px)';\n  //     if(exitStyle !== undefined){ exitStyle.transform = 'translate(0,' + pageY + 'px)'; }\n  //   });\n  //   // this.$element.trigger('stuck.zf.offcanvas');\n  // };\n  /**\n   * Closes the off-canvas menu.\n   * @function\n   * @fires OffCanvas#closed\n   */\n  OffCanvas.prototype.close = function () {\n    if (!this.$element.hasClass('is-open')) {\n      return;\n    }\n\n    var _this = this;\n\n    Foundation.Move(this.options.transitionTime, this.$element, function () {\n      $('[data-off-canvas-wrapper]').removeClass('is-off-canvas-open is-open-' + _this.options.position);\n\n      _this.$element.removeClass('is-open');\n      // Foundation._reflow();\n    });\n    this.$element.attr('aria-hidden', 'true')\n    /**\n     * Fires when the off-canvas menu opens.\n     * @event OffCanvas#closed\n     */\n    .trigger('closed.zf.offcanvas');\n    // if(_this.options.isSticky || !_this.options.forceTop){\n    //   setTimeout(function(){\n    //     _this.$element[0].style.transform = '';\n    //     $(window).off('scroll.zf.offcanvas');\n    //   }, this.options.transitionTime);\n    // }\n\n    this.$lastTrigger.attr('aria-expanded', 'false');\n  };\n\n  /**\n   * Toggles the off-canvas menu open or closed.\n   * @function\n   * @param {Object} event - Event object passed from listener.\n   * @param {jQuery} trigger - element that triggered the off-canvas to open.\n   */\n  OffCanvas.prototype.toggle = function (event, trigger) {\n    if (this.$element.hasClass('is-open')) {\n      this.close(event, trigger);\n    } else {\n      this.open(event, trigger);\n    }\n  };\n\n  /**\n   * Handles keyboard input when detected. When the escape key is pressed, the off-canvas menu closes, and focus is restored to the element that opened the menu.\n   * @function\n   * @private\n   */\n  OffCanvas.prototype._handleKeyboard = function (event) {\n    if (event.which !== 27) return;\n\n    event.stopPropagation();\n    event.preventDefault();\n    this.close();\n    this.$lastTrigger.focus();\n  };\n  /**\n   * Destroys the offcanvas plugin.\n   * @function\n   */\n  OffCanvas.prototype.destroy = function () {\n    //TODO make this...\n  };\n\n  Foundation.plugin(OffCanvas, 'OffCanvas');\n}(jQuery, Foundation);\n\n/**\n * Orbit module.\n * @module foundation.orbit\n * @requires foundation.util.keyboard\n * @requires foundation.util.motion\n * @requires foundation.util.timerAndImageLoader\n * @requires foundation.util.touch\n */\n!function ($, Foundation) {\n  'use strict';\n  /**\n   * Creates a new instance of an orbit carousel.\n   * @class\n   * @param {jQuery} element - jQuery object to make into an accordion menu.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n\n  function Orbit(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, Orbit.defaults, this.$element.data(), options);\n\n    this._init();\n\n    Foundation.registerPlugin(this);\n    Foundation.Keyboard.register('Orbit', {\n      'ltr': {\n        'ARROW_RIGHT': 'next',\n        'ARROW_LEFT': 'previous'\n      },\n      'rtl': {\n        'ARROW_LEFT': 'next',\n        'ARROW_RIGHT': 'previous'\n      }\n    });\n  }\n  Orbit.defaults = {\n    /**\n     * Tells the JS to loadBullets.\n     * @option\n     * @example true\n     */\n    bullets: true,\n    /**\n     * Tells the JS to apply event listeners to nav buttons\n     * @option\n     * @example true\n     */\n    navButtons: true,\n    /**\n     * motion-ui animation class to apply\n     * @option\n     * @example 'slide-in-right'\n     */\n    animInFromRight: 'slide-in-right',\n    /**\n     * motion-ui animation class to apply\n     * @option\n     * @example 'slide-out-right'\n     */\n    animOutToRight: 'slide-out-right',\n    /**\n     * motion-ui animation class to apply\n     * @option\n     * @example 'slide-in-left'\n     *\n     */\n    animInFromLeft: 'slide-in-left',\n    /**\n     * motion-ui animation class to apply\n     * @option\n     * @example 'slide-out-left'\n     */\n    animOutToLeft: 'slide-out-left',\n    /**\n     * Allows Orbit to automatically animate on page load.\n     * @option\n     * @example true\n     */\n    autoPlay: true,\n    /**\n     * Amount of time, in ms, between slide transitions\n     * @option\n     * @example 5000\n     */\n    timerDelay: 5000,\n    /**\n     * Allows Orbit to infinitely loop through the slides\n     * @option\n     * @example true\n     */\n    infiniteWrap: true,\n    /**\n     * Allows the Orbit slides to bind to swipe events for mobile, requires an additional util library\n     * @option\n     * @example true\n     */\n    swipe: true,\n    /**\n     * Allows the timing function to pause animation on hover.\n     * @option\n     * @example true\n     */\n    pauseOnHover: true,\n    /**\n     * Allows Orbit to bind keyboard events to the slider, to animate frames with arrow keys\n     * @option\n     * @example true\n     */\n    accessible: true,\n    /**\n     * Class applied to the container of Orbit\n     * @option\n     * @example 'orbit-container'\n     */\n    containerClass: 'orbit-container',\n    /**\n     * Class applied to individual slides.\n     * @option\n     * @example 'orbit-slide'\n     */\n    slideClass: 'orbit-slide',\n    /**\n     * Class applied to the bullet container. You're welcome.\n     * @option\n     * @example 'orbit-bullets'\n     */\n    boxOfBullets: 'orbit-bullets',\n    /**\n     * Class applied to the `next` navigation button.\n     * @option\n     * @example 'orbit-next'\n     */\n    nextClass: 'orbit-next',\n    /**\n     * Class applied to the `previous` navigation button.\n     * @option\n     * @example 'orbit-previous'\n     */\n    prevClass: 'orbit-previous'\n  };\n  /**\n   * Initializes the plugin by creating jQuery collections, setting attributes, and starting the animation.\n   * @function\n   * @private\n   */\n  Orbit.prototype._init = function () {\n    this.$wrapper = this.$element.find('.' + this.options.containerClass);\n    this.$slides = this.$element.find('.' + this.options.slideClass);\n    var $images = this.$element.find('img');\n\n    if ($images.length) {\n      Foundation.onImagesLoaded($images, this._prepareForOrbit.bind(this));\n    } else {\n      this._prepareForOrbit(); //hehe\n    }\n\n    if (this.options.bullets) {\n      this._loadBullets();\n    }\n\n    this._events();\n\n    if (this.options.autoPlay) {\n      this.geoSync();\n    }\n    if (this.options.accessible) {\n      // allow wrapper to be focusable to enable arrow navigation\n      this.$wrapper.attr('tabindex', 0);\n    }\n  };\n  /**\n   * Creates a jQuery collection of bullets, if they are being used.\n   * @function\n   * @private\n   */\n  Orbit.prototype._loadBullets = function () {\n    this.$bullets = this.$element.find('.' + this.options.boxOfBullets).find('button');\n  };\n  /**\n   * Sets a `timer` object on the orbit, and starts the counter for the next slide.\n   * @function\n   */\n  Orbit.prototype.geoSync = function () {\n    var _this = this;\n    this.timer = new Foundation.Timer(this.$element, { duration: this.options.timerDelay,\n      infinite: false }, function () {\n      _this.changeSlide(true);\n    });\n    this.timer.start();\n  };\n  /**\n   * Sets wrapper and slide heights for the orbit.\n   * @function\n   * @private\n   */\n  Orbit.prototype._prepareForOrbit = function () {\n    var _this = this;\n    this._setWrapperHeight(function (max) {\n      _this._setSlideHeight(max);\n    });\n  };\n  /**\n   * Calulates the height of each slide in the collection, and uses the tallest one for the wrapper height.\n   * @function\n   * @private\n   * @param {Function} cb - a callback function to fire when complete.\n   */\n  Orbit.prototype._setWrapperHeight = function (cb) {\n    //rewrite this to `for` loop\n    var max = 0,\n        temp,\n        counter = 0;\n\n    this.$slides.each(function () {\n      temp = this.getBoundingClientRect().height;\n      $(this).attr('data-slide', counter);\n\n      if (counter) {\n        //if not the first slide, set css position and display property\n        $(this).css({ 'position': 'relative', 'display': 'none' });\n      }\n      max = temp > max ? temp : max;\n      counter++;\n    });\n\n    if (counter === this.$slides.length) {\n      this.$wrapper.css({ 'height': max }); //only change the wrapper height property once.\n      cb(max); //fire callback with max height dimension.\n    }\n  };\n  /**\n   * Sets the max-height of each slide.\n   * @function\n   * @private\n   */\n  Orbit.prototype._setSlideHeight = function (height) {\n    this.$slides.each(function () {\n      $(this).css('max-height', height);\n    });\n  };\n  /**\n   * Adds event listeners to basically everything within the element.\n   * @function\n   * @private\n   */\n  Orbit.prototype._events = function () {\n    var _this = this;\n\n    //***************************************\n    //**Now using custom event - thanks to:**\n    //**      Yohai Ararat of Toronto      **\n    //***************************************\n    if (this.options.swipe) {\n      this.$slides.off('swipeleft.zf.orbit swiperight.zf.orbit').on('swipeleft.zf.orbit', function (e) {\n        e.preventDefault();\n        _this.changeSlide(true);\n      }).on('swiperight.zf.orbit', function (e) {\n        e.preventDefault();\n        _this.changeSlide(false);\n      });\n    }\n    //***************************************\n\n    if (this.options.autoPlay) {\n      this.$slides.on('click.zf.orbit', function () {\n        _this.$element.data('clickedOn', _this.$element.data('clickedOn') ? false : true);\n        _this.timer[_this.$element.data('clickedOn') ? 'pause' : 'start']();\n      });\n      if (this.options.pauseOnHover) {\n        this.$element.on('mouseenter.zf.orbit', function () {\n          _this.timer.pause();\n        }).on('mouseleave.zf.orbit', function () {\n          if (!_this.$element.data('clickedOn')) {\n            _this.timer.start();\n          }\n        });\n      }\n    }\n\n    if (this.options.navButtons) {\n      var $controls = this.$element.find('.' + this.options.nextClass + ', .' + this.options.prevClass);\n      $controls.attr('tabindex', 0)\n      //also need to handle enter/return and spacebar key presses\n      .on('click.zf.orbit touchend.zf.orbit', function () {\n        _this.changeSlide($(this).hasClass(_this.options.nextClass));\n      });\n    }\n\n    if (this.options.bullets) {\n      this.$bullets.on('click.zf.orbit touchend.zf.orbit', function () {\n        if (/is-active/g.test(this.className)) {\n          return false;\n        } //if this is active, kick out of function.\n        var idx = $(this).data('slide'),\n            ltr = idx > _this.$slides.filter('.is-active').data('slide'),\n            $slide = _this.$slides.eq(idx);\n\n        _this.changeSlide(ltr, $slide, idx);\n      });\n    }\n\n    this.$wrapper.add(this.$bullets).on('keydown.zf.orbit', function (e) {\n      // handle keyboard event with keyboard util\n      Foundation.Keyboard.handleKey(e, _this, {\n        next: function next() {\n          _this.changeSlide(true);\n        },\n        previous: function previous() {\n          _this.changeSlide(false);\n        },\n        handled: function handled() {\n          // if bullet is focused, make sure focus moves\n          if ($(e.target).is(_this.$bullets)) {\n            _this.$bullets.filter('.is-active').focus();\n          }\n        }\n      });\n    });\n  };\n  /**\n   * Changes the current slide to a new one.\n   * @function\n   * @param {Boolean} isLTR - flag if the slide should move left to right.\n   * @param {jQuery} chosenSlide - the jQuery element of the slide to show next, if one is selected.\n   * @param {Number} idx - the index of the new slide in its collection, if one chosen.\n   * @fires Orbit#slidechange\n   */\n  Orbit.prototype.changeSlide = function (isLTR, chosenSlide, idx) {\n    var $curSlide = this.$slides.filter('.is-active').eq(0);\n\n    if (/mui/g.test($curSlide[0].className)) {\n      return false;\n    } //if the slide is currently animating, kick out of the function\n\n    var $firstSlide = this.$slides.first(),\n        $lastSlide = this.$slides.last(),\n        dirIn = isLTR ? 'Right' : 'Left',\n        dirOut = isLTR ? 'Left' : 'Right',\n        _this = this,\n        $newSlide;\n\n    if (!chosenSlide) {\n      //most of the time, this will be auto played or clicked from the navButtons.\n      $newSlide = isLTR ? //if wrapping enabled, check to see if there is a `next` or `prev` sibling, if not, select the first or last slide to fill in. if wrapping not enabled, attempt to select `next` or `prev`, if there's nothing there, the function will kick out on next step. CRAZY NESTED TERNARIES!!!!!\n      this.options.infiniteWrap ? $curSlide.next('.' + this.options.slideClass).length ? $curSlide.next('.' + this.options.slideClass) : $firstSlide : $curSlide.next('.' + this.options.slideClass) : //pick next slide if moving left to right\n      this.options.infiniteWrap ? $curSlide.prev('.' + this.options.slideClass).length ? $curSlide.prev('.' + this.options.slideClass) : $lastSlide : $curSlide.prev('.' + this.options.slideClass); //pick prev slide if moving right to left\n    } else {\n        $newSlide = chosenSlide;\n      }\n    if ($newSlide.length) {\n      if (this.options.bullets) {\n        idx = idx || this.$slides.index($newSlide); //grab index to update bullets\n        this._updateBullets(idx);\n      }\n      Foundation.Motion.animateIn($newSlide.addClass('is-active').css({ 'position': 'absolute', 'top': 0 }), this.options['animInFrom' + dirIn], function () {\n        $newSlide.css({ 'position': 'relative', 'display': 'block' }).attr('aria-live', 'polite');\n      });\n\n      Foundation.Motion.animateOut($curSlide.removeClass('is-active'), this.options['animOutTo' + dirOut], function () {\n        $curSlide.removeAttr('aria-live');\n        if (_this.options.autoPlay) {\n          _this.timer.restart();\n        }\n        //do stuff?\n        /**\n         * Triggers when the slide has finished animating in.\n         * @event Orbit#slidechange\n         */\n        _this.$element.trigger('slidechange.zf.orbit', [$newSlide]);\n      });\n    }\n  };\n  /**\n   * Updates the active state of the bullets, if displayed.\n   * @function\n   * @private\n   * @param {Number} idx - the index of the current slide.\n   */\n  Orbit.prototype._updateBullets = function (idx) {\n    var $oldBullet = this.$element.find('.' + this.options.boxOfBullets).find('.is-active').removeClass('is-active').blur(),\n        span = $oldBullet.find('span:last').detach(),\n        $newBullet = this.$bullets.eq(idx).addClass('is-active').append(span);\n  };\n  /**\n   * Destroys the carousel and hides the element.\n   * @function\n   */\n  Orbit.prototype.destroy = function () {\n    delete this.timer;\n    this.$element.off('.zf.orbit').find('*').off('.zf.orbit').end().hide();\n    Foundation.unregisterPlugin(this);\n  };\n\n  Foundation.plugin(Orbit, 'Orbit');\n}(jQuery, window.Foundation);\n\n/**\n * ResponsiveMenu module.\n * @module foundation.responsiveMenu\n * @requires foundation.util.triggers\n * @requires foundation.util.mediaQuery\n * @requires foundation.util.accordionMenu\n * @requires foundation.util.drilldown\n * @requires foundation.util.dropdown-menu\n */\n!function (Foundation, $) {\n  'use strict';\n\n  // The plugin matches the plugin classes with these plugin instances.\n\n  var MenuPlugins = {\n    dropdown: {\n      cssClass: 'dropdown',\n      plugin: Foundation._plugins['dropdown-menu'] || null\n    },\n    drilldown: {\n      cssClass: 'drilldown',\n      plugin: Foundation._plugins['drilldown'] || null\n    },\n    accordion: {\n      cssClass: 'accordion-menu',\n      plugin: Foundation._plugins['accordion-menu'] || null\n    }\n  };\n\n  // [PH] Media queries\n  var phMedia = {\n    small: '(min-width: 0px)',\n    medium: '(min-width: 640px)'\n  };\n\n  /**\n   * Creates a new instance of a responsive menu.\n   * @class\n   * @fires ResponsiveMenu#init\n   * @param {jQuery} element - jQuery object to make into a dropdown menu.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n  function ResponsiveMenu(element) {\n    this.$element = $(element);\n    this.rules = this.$element.data('responsive-menu');\n    this.currentMq = null;\n    this.currentPlugin = null;\n\n    this._init();\n    this._events();\n\n    Foundation.registerPlugin(this);\n  }\n\n  ResponsiveMenu.defaults = {};\n\n  /**\n   * Initializes the Menu by parsing the classes from the 'data-ResponsiveMenu' attribute on the element.\n   * @function\n   * @private\n   */\n  ResponsiveMenu.prototype._init = function () {\n    var rulesTree = {};\n\n    // Parse rules from \"classes\" in data attribute\n    var rules = this.rules.split(' ');\n\n    // Iterate through every rule found\n    for (var i = 0; i < rules.length; i++) {\n      var rule = rules[i].split('-');\n      var ruleSize = rule.length > 1 ? rule[0] : 'small';\n      var rulePlugin = rule.length > 1 ? rule[1] : rule[0];\n\n      if (MenuPlugins[rulePlugin] !== null) {\n        rulesTree[ruleSize] = MenuPlugins[rulePlugin];\n      }\n    }\n\n    this.rules = rulesTree;\n\n    if (!$.isEmptyObject(rulesTree)) {\n      this._checkMediaQueries();\n    }\n  };\n\n  /**\n   * Initializes events for the Menu.\n   * @function\n   * @private\n   */\n  ResponsiveMenu.prototype._events = function () {\n    var _this = this;\n\n    $(window).on('changed.zf.mediaquery', function () {\n      _this._checkMediaQueries();\n    });\n    // $(window).on('resize.zf.ResponsiveMenu', function() {\n    //   _this._checkMediaQueries();\n    // });\n  };\n\n  /**\n   * Checks the current screen width against available media queries. If the media query has changed, and the plugin needed has changed, the plugins will swap out.\n   * @function\n   * @private\n   */\n  ResponsiveMenu.prototype._checkMediaQueries = function () {\n    var matchedMq,\n        _this = this;\n    // Iterate through each rule and find the last matching rule\n    $.each(this.rules, function (key) {\n      if (Foundation.MediaQuery.atLeast(key)) {\n        matchedMq = key;\n      }\n    });\n\n    // No match? No dice\n    if (!matchedMq) return;\n\n    // Plugin already initialized? We good\n    if (this.currentPlugin instanceof this.rules[matchedMq].plugin) return;\n\n    // Remove existing plugin-specific CSS classes\n    $.each(MenuPlugins, function (key, value) {\n      _this.$element.removeClass(value.cssClass);\n    });\n\n    // Add the CSS class for the new plugin\n    this.$element.addClass(this.rules[matchedMq].cssClass);\n\n    // Create an instance of the new plugin\n    if (this.currentPlugin) this.currentPlugin.destroy();\n    this.currentPlugin = new this.rules[matchedMq].plugin(this.$element, {});\n  };\n\n  /**\n   * Destroys the instance of the current plugin on this element, as well as the window resize handler that switches the plugins out.\n   * @function\n   */\n  ResponsiveMenu.prototype.destroy = function () {\n    this.currentPlugin.destroy();\n    $(window).off('.zf.ResponsiveMenu');\n    Foundation.unregisterPlugin(this);\n  };\n  Foundation.plugin(ResponsiveMenu, 'ResponsiveMenu');\n}(Foundation, jQuery);\n\n/**\n * ResponsiveToggle module.\n * @module foundation.responsiveToggle\n * @requires foundation.util.mediaQuery\n */\n!function ($, Foundation) {\n\n  'use strict';\n\n  /**\n   * Creates a new instance of Tab Bar.\n   * @class\n   * @fires ResponsiveToggle#init\n   * @param {jQuery} element - jQuery object to attach tab bar functionality to.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n\n  function ResponsiveToggle(element, options) {\n    this.$element = $(element);\n    this.options = $.extend({}, ResponsiveToggle.defaults, options);\n\n    this._init();\n    this._events();\n\n    Foundation.registerPlugin(this);\n  }\n\n  ResponsiveToggle.defaults = {\n    /**\n     * The breakpoint after which the menu is always shown, and the tab bar is hidden.\n     * @option\n     * @example 'medium'\n     */\n    hideFor: 'medium'\n  };\n\n  /**\n   * Initializes the tab bar by finding the target element, toggling element, and running update().\n   * @function\n   * @private\n   */\n  ResponsiveToggle.prototype._init = function () {\n    var targetID = this.$element.data('responsive-toggle');\n    if (!targetID) {\n      console.error('Your tab bar needs an ID of a Menu as the value of data-tab-bar.');\n    }\n\n    this.$targetMenu = $('#' + targetID);\n    this.$toggler = this.$element.find('[data-toggle]');\n\n    this._update();\n  };\n\n  /**\n   * Adds necessary event handlers for the tab bar to work.\n   * @function\n   * @private\n   */\n  ResponsiveToggle.prototype._events = function () {\n    var _this = this;\n\n    $(window).on('changed.zf.mediaquery', this._update.bind(this));\n\n    this.$toggler.on('click.zf.responsiveToggle', this.toggleMenu.bind(this));\n  };\n\n  /**\n   * Checks the current media query to determine if the tab bar should be visible or hidden.\n   * @function\n   * @private\n   */\n  ResponsiveToggle.prototype._update = function () {\n    // Mobile\n    if (!Foundation.MediaQuery.atLeast(this.options.hideFor)) {\n      this.$element.show();\n      this.$targetMenu.hide();\n    }\n\n    // Desktop\n    else {\n        this.$element.hide();\n        this.$targetMenu.show();\n      }\n  };\n\n  /**\n   * Toggles the element attached to the tab bar. The toggle only happens if the screen is small enough to allow it.\n   * @function\n   * @fires ResponsiveToggle#toggled\n   */\n  ResponsiveToggle.prototype.toggleMenu = function () {\n    if (!Foundation.MediaQuery.atLeast(this.options.hideFor)) {\n      this.$targetMenu.toggle(0);\n\n      /**\n       * Fires when the element attached to the tab bar toggles.\n       * @event ResponsiveToggle#toggled\n       */\n      this.$element.trigger('toggled.zf.responsiveToggle');\n    }\n  };\n  ResponsiveToggle.prototype.destroy = function () {\n    //TODO this...\n  };\n  Foundation.plugin(ResponsiveToggle, 'ResponsiveToggle');\n}(jQuery, Foundation);\n\n/**\n * Reveal module.\n * @module foundation.reveal\n * @requires foundation.util.keyboard\n * @requires foundation.util.box\n * @requires foundation.util.triggers\n * @requires foundation.util.mediaQuery\n * @requires foundation.util.motion if using animations\n */\n!function (Foundation, $) {\n  'use strict';\n\n  /**\n   * Creates a new instance of Reveal.\n   * @class\n   * @param {jQuery} element - jQuery object to use for the modal.\n   * @param {Object} options - optional parameters.\n   */\n\n  function Reveal(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, Reveal.defaults, this.$element.data(), options);\n    this._init();\n\n    Foundation.registerPlugin(this);\n    Foundation.Keyboard.register('Reveal', {\n      'ENTER': 'open',\n      'SPACE': 'open',\n      'ESCAPE': 'close',\n      'TAB': 'tab_forward',\n      'SHIFT_TAB': 'tab_backward'\n    });\n  }\n\n  Reveal.defaults = {\n    /**\n     * Motion-UI class to use for animated elements. If none used, defaults to simple show/hide.\n     * @option\n     * @example 'slide-in-left'\n     */\n    animationIn: '',\n    /**\n     * Motion-UI class to use for animated elements. If none used, defaults to simple show/hide.\n     * @option\n     * @example 'slide-out-right'\n     */\n    animationOut: '',\n    /**\n     * Time, in ms, to delay the opening of a modal after a click if no animation used.\n     * @option\n     * @example 10\n     */\n    showDelay: 0,\n    /**\n     * Time, in ms, to delay the closing of a modal after a click if no animation used.\n     * @option\n     * @example 10\n     */\n    hideDelay: 0,\n    /**\n     * Allows a click on the body/overlay to close the modal.\n     * @option\n     * @example true\n     */\n    closeOnClick: true,\n    /**\n     * Allows the modal to close if the user presses the `ESCAPE` key.\n     * @option\n     * @example true\n     */\n    closeOnEsc: true,\n    /**\n     * If true, allows multiple modals to be displayed at once.\n     * @option\n     * @example false\n     */\n    multipleOpened: false,\n    /**\n     * Distance, in pixels, the modal should push down from the top of the screen.\n     * @option\n     * @example 100\n     */\n    vOffset: 100,\n    /**\n     * Distance, in pixels, the modal should push in from the side of the screen.\n     * @option\n     * @example 0\n     */\n    hOffset: 0,\n    /**\n     * Allows the modal to be fullscreen, completely blocking out the rest of the view. JS checks for this as well.\n     * @option\n     * @example false\n     */\n    fullScreen: false,\n    /**\n     * Percentage of screen height the modal should push up from the bottom of the view.\n     * @option\n     * @example 10\n     */\n    btmOffsetPct: 10,\n    /**\n     * Allows the modal to generate an overlay div, which will cover the view when modal opens.\n     * @option\n     * @example true\n     */\n    overlay: true,\n    /**\n     * Allows the modal to remove and reinject markup on close. Should be true if using video elements w/o using provider's api.\n     * @option\n     * @example false\n     */\n    resetOnClose: false\n  };\n\n  /**\n   * Initializes the modal by adding the overlay and close buttons, (if selected).\n   * @private\n   */\n  Reveal.prototype._init = function () {\n    this.id = this.$element.attr('id');\n    this.isActive = false;\n\n    this.$anchor = $('[data-open=\"' + this.id + '\"]').length ? $('[data-open=\"' + this.id + '\"]') : $('[data-toggle=\"' + this.id + '\"]');\n\n    if (this.$anchor.length) {\n      var anchorId = this.$anchor[0].id || Foundation.GetYoDigits(6, 'reveal');\n\n      this.$anchor.attr({\n        'aria-controls': this.id,\n        'id': anchorId,\n        'aria-haspopup': true,\n        'tabindex': 0\n      });\n      this.$element.attr({ 'aria-labelledby': anchorId });\n    }\n\n    // this.options.fullScreen = this.$element.hasClass('full');\n    if (this.options.fullScreen || this.$element.hasClass('full')) {\n      this.options.fullScreen = true;\n      this.options.overlay = false;\n    }\n    if (this.options.overlay) {\n      this.$overlay = this._makeOverlay(this.id);\n    }\n\n    this.$element.attr({\n      'role': 'dialog',\n      'aria-hidden': true,\n      'data-yeti-box': this.id,\n      'data-resize': this.id\n    });\n\n    this._events();\n  };\n\n  /**\n   * Creates an overlay div to display behind the modal.\n   * @private\n   */\n  Reveal.prototype._makeOverlay = function (id) {\n    var $overlay = $('<div></div>').addClass('reveal-overlay').attr({ 'tabindex': -1, 'aria-hidden': true }).appendTo('body');\n    if (this.options.closeOnClick) {\n      $overlay.attr({\n        'data-close': id\n      });\n    }\n    return $overlay;\n  };\n\n  /**\n   * Adds event handlers for the modal.\n   * @private\n   */\n  Reveal.prototype._events = function () {\n    var _this = this;\n\n    this.$element.on({\n      'open.zf.trigger': this.open.bind(this),\n      'close.zf.trigger': this.close.bind(this),\n      'toggle.zf.trigger': this.toggle.bind(this),\n      'resizeme.zf.trigger': function resizemeZfTrigger() {\n        if (_this.$element.is(':visible')) {\n          _this._setPosition(function () {});\n        }\n      }\n    });\n\n    if (this.$anchor.length) {\n      this.$anchor.on('keydown.zf.reveal', function (e) {\n        if (e.which === 13 || e.which === 32) {\n          e.stopPropagation();\n          e.preventDefault();\n          _this.open();\n        }\n      });\n    }\n\n    if (this.options.closeOnClick && this.options.overlay) {\n      this.$overlay.off('.zf.reveal').on('click.zf.reveal', this.close.bind(this));\n    }\n  };\n  /**\n   * Sets the position of the modal before opening\n   * @param {Function} cb - a callback function to execute when positioning is complete.\n   * @private\n   */\n  Reveal.prototype._setPosition = function (cb) {\n    var eleDims = Foundation.Box.GetDimensions(this.$element);\n    var elePos = this.options.fullScreen ? 'reveal full' : eleDims.height >= 0.5 * eleDims.windowDims.height ? 'reveal' : 'center';\n\n    if (elePos === 'reveal full') {\n      console.log('full');\n      //set to full height/width\n      this.$element.offset(Foundation.Box.GetOffsets(this.$element, null, elePos, this.options.vOffset)).css({\n        'height': eleDims.windowDims.height,\n        'width': eleDims.windowDims.width\n      });\n    } else if (!Foundation.MediaQuery.atLeast('medium') || !Foundation.Box.ImNotTouchingYou(this.$element, null, true, false)) {\n      //if smaller than medium, resize to 100% width minus any custom L/R margin\n      this.$element.css({\n        'width': eleDims.windowDims.width - this.options.hOffset * 2\n      }).offset(Foundation.Box.GetOffsets(this.$element, null, 'center', this.options.vOffset, this.options.hOffset));\n      //flag a boolean so we can reset the size after the element is closed.\n      this.changedSize = true;\n    } else {\n      this.$element.css({\n        'max-height': eleDims.windowDims.height - this.options.vOffset * (this.options.btmOffsetPct / 100 + 1),\n        'width': ''\n      }).offset(Foundation.Box.GetOffsets(this.$element, null, elePos, this.options.vOffset));\n      //the max height based on a percentage of vertical offset plus vertical offset\n    }\n\n    cb();\n  };\n\n  /**\n   * Opens the modal controlled by `this.$anchor`, and closes all others by default.\n   * @function\n   * @fires Reveal#closeAll\n   * @fires Reveal#open\n   */\n  Reveal.prototype.open = function () {\n    var _this = this;\n    this.isActive = true;\n    //make element invisible, but remove display: none so we can get size and positioning\n    this.$element.css({ 'visibility': 'hidden' }).show().scrollTop(0);\n\n    this._setPosition(function () {\n      _this.$element.hide().css({ 'visibility': '' });\n      if (!_this.options.multipleOpened) {\n        /**\n         * Fires immediately before the modal opens.\n         * Closes any other modals that are currently open\n         * @event Reveal#closeAll\n         */\n        _this.$element.trigger('closeme.zf.reveal', _this.id);\n      }\n      if (_this.options.animationIn) {\n        if (_this.options.overlay) {\n          Foundation.Motion.animateIn(_this.$overlay, 'fade-in', function () {\n            Foundation.Motion.animateIn(_this.$element, _this.options.animationIn, function () {});\n          });\n        } else {\n          Foundation.Motion.animateIn(_this.$element, _this.options.animationIn, function () {});\n        }\n      } else {\n        if (_this.options.overlay) {\n          _this.$overlay.show(0, function () {\n            _this.$element.show(_this.options.showDelay, function () {});\n          });\n        } else {\n          _this.$element.show(_this.options.showDelay, function () {});\n        }\n      }\n    });\n\n    // handle accessibility\n    this.$element.attr({ 'aria-hidden': false }).attr('tabindex', -1).focus()\n    /**\n     * Fires when the modal has successfully opened.\n     * @event Reveal#open\n     */\n    .trigger('open.zf.reveal');\n\n    $('body').addClass('is-reveal-open').attr({ 'aria-hidden': this.options.overlay || this.options.fullScreen ? true : false });\n    setTimeout(function () {\n      _this._extraHandlers();\n      // Foundation.reflow();\n    }, 0);\n  };\n\n  /**\n   * Adds extra event handlers for the body and window if necessary.\n   * @private\n   */\n  Reveal.prototype._extraHandlers = function () {\n    var _this = this;\n    var visibleFocusableElements = this.$element.find('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]').filter(function () {\n      if (!$(this).is(':visible') || $(this).attr('tabindex') < 0) {\n        return false;\n      } //only have visible elements and those that have a tabindex greater or equal 0\n      return true;\n    });\n\n    if (!this.options.overlay && this.options.closeOnClick && !this.options.fullScreen) {\n      $('body').on('click.zf.reveal', function (e) {\n        // if()\n        _this.close();\n      });\n    }\n    if (this.options.closeOnEsc) {\n      $(window).on('keydown.zf.reveal', function (e) {\n        if (visibleFocusableElements.length === 0) {\n          // no focusable elements inside the modal at all, prevent tabbing in general\n          e.preventDefault();\n        }\n        Foundation.Keyboard.handleKey(e, _this, {\n          close: function close() {\n            if (this.options.closeOnEsc) {\n              this.close();\n            }\n          }\n        });\n      });\n    }\n\n    // lock focus within modal while tabbing\n    this.$element.on('keydown.zf.reveal', function (e) {\n      var $target = $(this);\n      // handle keyboard event with keyboard util\n      Foundation.Keyboard.handleKey(e, _this, {\n        tab_forward: function tab_forward() {\n          if (this.$element.find(':focus').is(visibleFocusableElements.eq(-1))) {\n            // left modal downwards, setting focus to first element\n            visibleFocusableElements.eq(0).focus();\n            e.preventDefault();\n          }\n        },\n        tab_backward: function tab_backward() {\n          if (this.$element.find(':focus').is(visibleFocusableElements.eq(0)) || this.$element.is(':focus')) {\n            // left modal upwards, setting focus to last element\n            visibleFocusableElements.eq(-1).focus();\n            e.preventDefault();\n          }\n        },\n        open: function open() {\n          if ($target.is(visibleFocusableElements)) {\n            // dont't trigger if acual element has focus (i.e. inputs, links, ...)\n            this.open();\n          }\n        },\n        close: function close() {\n          if (this.options.closeOnEsc) {\n            this.close();\n          }\n        }\n      });\n      if (visibleFocusableElements.length === 0) {\n        // no focusable elements inside the modal at all, prevent tabbing in general\n        e.preventDefault();\n      }\n    });\n  };\n\n  /**\n   * Closes the modal.\n   * @function\n   * @fires Reveal#closed\n   */\n  Reveal.prototype.close = function () {\n    if (!this.isActive || !this.$element.is(':visible')) {\n      return false;\n    }\n    var _this = this;\n\n    if (this.options.animationOut) {\n      Foundation.Motion.animateOut(this.$element, this.options.animationOut, function () {\n        if (_this.options.overlay) {\n          Foundation.Motion.animateOut(_this.$overlay, 'fade-out', function () {});\n        }\n      });\n    } else {\n      this.$element.hide(_this.options.hideDelay, function () {\n        if (_this.options.overlay) {\n          _this.$overlay.hide(0, function () {});\n        }\n      });\n    }\n    //conditionals to remove extra event listeners added on open\n    if (this.options.closeOnEsc) {\n      $(window).off('keydown.zf.reveal');\n    }\n    if (!this.options.overlay && this.options.closeOnClick) {\n      $('body').off('click.zf.reveal');\n    }\n    this.$element.off('keydown.zf.reveal');\n\n    //if the modal changed size, reset it\n    if (this.changedSize) {\n      this.$element.css({\n        'height': '',\n        'width': ''\n      });\n    }\n\n    $('body').removeClass('is-reveal-open').attr({ 'aria-hidden': false, 'tabindex': '' });\n\n    /**\n    * Resets the modal content\n    * This prevents a running video to keep going in the background\n    */\n    if (this.options.resetOnClose) {\n      this.$element.html(this.$element.html());\n    }\n\n    this.isActive = false;\n    this.$element.attr({ 'aria-hidden': true })\n    /**\n     * Fires when the modal is done closing.\n     * @event Reveal#closed\n     */\n    .trigger('closed.zf.reveal');\n  };\n  /**\n   * Toggles the open/closed state of a modal.\n   * @function\n   */\n  Reveal.prototype.toggle = function () {\n    if (this.isActive) {\n      this.close();\n    } else {\n      this.open();\n    }\n  };\n\n  /**\n   * Destroys an instance of a modal.\n   * @function\n   */\n  Reveal.prototype.destroy = function () {\n    if (this.options.overlay) {\n      this.$overlay.hide().off().remove();\n    }\n    this.$element.hide();\n    this.$anchor.off();\n\n    Foundation.unregisterPlugin(this);\n  };\n\n  Foundation.plugin(Reveal, 'Reveal');\n\n  // Exports for AMD/Browserify\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') module.exports = Reveal;\n  if (typeof define === 'function') define(['foundation'], function () {\n    return Reveal;\n  });\n}(Foundation, jQuery);\n\n/**\n * Slider module.\n * @module foundation.slider\n * @requires foundation.util.motion\n * @requires foundation.util.triggers\n * @requires foundation.util.keyboard\n * @requires foundation.util.touch\n */\n!function ($, Foundation) {\n  'use strict';\n\n  /**\n   * Creates a new instance of a drilldown menu.\n   * @class\n   * @param {jQuery} element - jQuery object to make into an accordion menu.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n\n  function Slider(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, Slider.defaults, this.$element.data(), options);\n\n    this._init();\n\n    Foundation.registerPlugin(this);\n    Foundation.Keyboard.register('Slider', {\n      'ltr': {\n        'ARROW_RIGHT': 'increase',\n        'ARROW_UP': 'increase',\n        'ARROW_DOWN': 'decrease',\n        'ARROW_LEFT': 'decrease',\n        'SHIFT_ARROW_RIGHT': 'increase_fast',\n        'SHIFT_ARROW_UP': 'increase_fast',\n        'SHIFT_ARROW_DOWN': 'decrease_fast',\n        'SHIFT_ARROW_LEFT': 'decrease_fast'\n      },\n      'rtl': {\n        'ARROW_LEFT': 'increase',\n        'ARROW_RIGHT': 'decrease',\n        'SHIFT_ARROW_LEFT': 'increase_fast',\n        'SHIFT_ARROW_RIGHT': 'decrease_fast'\n      }\n    });\n  }\n\n  Slider.defaults = {\n    /**\n     * Minimum value for the slider scale.\n     * @option\n     * @example 0\n     */\n    start: 0,\n    /**\n     * Maximum value for the slider scale.\n     * @option\n     * @example 100\n     */\n    end: 100,\n    /**\n     * Minimum value change per change event. Not Currently Implemented!\n      */\n    step: 1,\n    /**\n     * Value at which the handle/input *(left handle/first input)* should be set to on initialization.\n     * @option\n     * @example 0\n     */\n    initialStart: 0,\n    /**\n     * Value at which the right handle/second input should be set to on initialization.\n     * @option\n     * @example 100\n     */\n    initialEnd: 100,\n    /**\n     * Allows the input to be located outside the container and visible. Set to by the JS\n     * @option\n     * @example false\n     */\n    binding: false,\n    /**\n     * Allows the user to click/tap on the slider bar to select a value.\n     * @option\n     * @example true\n     */\n    clickSelect: true,\n    /**\n     * Set to true and use the `vertical` class to change alignment to vertical.\n     * @option\n     * @example false\n     */\n    vertical: false,\n    /**\n     * Allows the user to drag the slider handle(s) to select a value.\n     * @option\n     * @example true\n     */\n    draggable: true,\n    /**\n     * Disables the slider and prevents event listeners from being applied. Double checked by JS with `disabledClass`.\n     * @option\n     * @example false\n     */\n    disabled: false,\n    /**\n     * Allows the use of two handles. Double checked by the JS. Changes some logic handling.\n     * @option\n     * @example false\n     */\n    doubleSided: false,\n    /**\n     * Potential future feature.\n     */\n    // steps: 100,\n    /**\n     * Number of decimal places the plugin should go to for floating point precision.\n     * @option\n     * @example 2\n     */\n    decimal: 2,\n    /**\n     * Time delay for dragged elements.\n     */\n    // dragDelay: 0,\n    /**\n     * Time, in ms, to animate the movement of a slider handle if user clicks/taps on the bar. Needs to be manually set if updating the transition time in the Sass settings.\n     * @option\n     * @example 200\n     */\n    moveTime: 200, //update this if changing the transition time in the sass\n    /**\n     * Class applied to disabled sliders.\n     * @option\n     * @example 'disabled'\n     */\n    disabledClass: 'disabled'\n  };\n  /**\n   * Initilizes the plugin by reading/setting attributes, creating collections and setting the initial position of the handle(s).\n   * @function\n   * @private\n   */\n  Slider.prototype._init = function () {\n    this.inputs = this.$element.find('input');\n    this.handles = this.$element.find('[data-slider-handle]');\n\n    this.$handle = this.handles.eq(0);\n    this.$input = this.inputs.length ? this.inputs.eq(0) : $('#' + this.$handle.attr('aria-controls'));\n    this.$fill = this.$element.find('[data-slider-fill]').css(this.options.vertical ? 'height' : 'width', 0);\n\n    var isDbl = false,\n        _this = this;\n    if (this.options.disabled || this.$element.hasClass(this.options.disabledClass)) {\n      this.options.disabled = true;\n      this.$element.addClass(this.options.disabledClass);\n    }\n    if (!this.inputs.length) {\n      this.inputs = $().add(this.$input);\n      this.options.binding = true;\n    }\n    this._setInitAttr(0);\n    this._events(this.$handle);\n\n    if (this.handles[1]) {\n      this.options.doubleSided = true;\n      this.$handle2 = this.handles.eq(1);\n      this.$input2 = this.inputs.length ? this.inputs.eq(1) : $('#' + this.$handle2.attr('aria-controls'));\n\n      if (!this.inputs[1]) {\n        this.inputs = this.inputs.add(this.$input2);\n      }\n      isDbl = true;\n\n      this._setHandlePos(this.$handle, this.options.initialStart, true, function () {\n\n        _this._setHandlePos(_this.$handle2, _this.options.initialEnd);\n      });\n      // this.$handle.triggerHandler('click.zf.slider');\n      this._setInitAttr(1);\n      this._events(this.$handle2);\n    }\n\n    if (!isDbl) {\n      this._setHandlePos(this.$handle, this.options.initialStart, true);\n    }\n  };\n  /**\n   * Sets the position of the selected handle and fill bar.\n   * @function\n   * @private\n   * @param {jQuery} $hndl - the selected handle to move.\n   * @param {Number} location - floating point between the start and end values of the slider bar.\n   * @param {Function} cb - callback function to fire on completion.\n   * @fires Slider#moved\n   */\n  Slider.prototype._setHandlePos = function ($hndl, location, noInvert, cb) {\n    //might need to alter that slightly for bars that will have odd number selections.\n    location = parseFloat(location); //on input change events, convert string to number...grumble.\n    // prevent slider from running out of bounds\n    if (location < this.options.start) {\n      location = this.options.start;\n    } else if (location > this.options.end) {\n      location = this.options.end;\n    }\n\n    var isDbl = this.options.doubleSided,\n        callback = cb || null;\n\n    if (isDbl) {\n      if (this.handles.index($hndl) === 0) {\n        var h2Val = parseFloat(this.$handle2.attr('aria-valuenow'));\n        location = location >= h2Val ? h2Val - this.options.step : location;\n      } else {\n        var h1Val = parseFloat(this.$handle.attr('aria-valuenow'));\n        location = location <= h1Val ? h1Val + this.options.step : location;\n      }\n    }\n\n    if (this.options.vertical && !noInvert) {\n      location = this.options.end - location;\n    }\n    var _this = this,\n        vert = this.options.vertical,\n        hOrW = vert ? 'height' : 'width',\n        lOrT = vert ? 'top' : 'left',\n        halfOfHandle = $hndl[0].getBoundingClientRect()[hOrW] / 2,\n        elemDim = this.$element[0].getBoundingClientRect()[hOrW],\n        pctOfBar = percent(location, this.options.end).toFixed(this.options.decimal),\n        pxToMove = (elemDim - halfOfHandle) * pctOfBar,\n        movement = (percent(pxToMove, elemDim) * 100).toFixed(this.options.decimal),\n        location = location > 0 ? parseFloat(location.toFixed(this.options.decimal)) : 0,\n        anim,\n        prog,\n        start = null,\n        css = {};\n\n    this._setValues($hndl, location);\n\n    if (this.options.doubleSided) {\n      //update to calculate based on values set to respective inputs??\n      var isLeftHndl = this.handles.index($hndl) === 0,\n          dim,\n          idx = this.handles.index($hndl);\n\n      if (isLeftHndl) {\n        css[lOrT] = (pctOfBar > 0 ? pctOfBar * 100 : 0) + '%'; //\n        dim = /*Math.abs*/((percent(this.$handle2.position()[lOrT] + halfOfHandle, elemDim) - parseFloat(pctOfBar)) * 100).toFixed(this.options.decimal) + '%';\n        css['min-' + hOrW] = dim;\n        if (cb && typeof cb === 'function') {\n          cb();\n        }\n      } else {\n        location = (location < 100 ? location : 100) - (parseFloat(this.$handle[0].style.left) || this.options.end - location);\n        css['min-' + hOrW] = location + '%';\n      }\n    }\n\n    this.$element.one('finished.zf.animate', function () {\n      _this.animComplete = true;\n      /**\n       * Fires when the handle is done moving.\n       * @event Slider#moved\n       */\n      _this.$element.trigger('moved.zf.slider', [$hndl]);\n    });\n    var moveTime = _this.$element.data('dragging') ? 1000 / 60 : _this.options.moveTime;\n    /*var move = new */Foundation.Move(moveTime, $hndl, function () {\n      $hndl.css(lOrT, movement + '%');\n      if (!_this.options.doubleSided) {\n        _this.$fill.css(hOrW, pctOfBar * 100 + '%');\n      } else {\n        _this.$fill.css(css);\n      }\n    });\n    // move.do();\n  };\n  /**\n   * Sets the initial attribute for the slider element.\n   * @function\n   * @private\n   * @param {Number} idx - index of the current handle/input to use.\n   */\n  Slider.prototype._setInitAttr = function (idx) {\n    var id = this.inputs.eq(idx).attr('id') || Foundation.GetYoDigits(6, 'slider');\n    this.inputs.eq(idx).attr({\n      'id': id,\n      'max': this.options.end,\n      'min': this.options.start\n\n    });\n    this.handles.eq(idx).attr({\n      'role': 'slider',\n      'aria-controls': id,\n      'aria-valuemax': this.options.end,\n      'aria-valuemin': this.options.start,\n      'aria-valuenow': idx === 0 ? this.options.initialStart : this.options.initialEnd,\n      'aria-orientation': this.options.vertical ? 'vertical' : 'horizontal',\n      'tabindex': 0\n    });\n  };\n  /**\n   * Sets the input and `aria-valuenow` values for the slider element.\n   * @function\n   * @private\n   * @param {jQuery} $handle - the currently selected handle.\n   * @param {Number} val - floating point of the new value.\n   */\n  Slider.prototype._setValues = function ($handle, val) {\n    var idx = this.options.doubleSided ? this.handles.index($handle) : 0;\n    this.inputs.eq(idx).val(val);\n    $handle.attr('aria-valuenow', val);\n  };\n  /**\n   * Handles events on the slider element.\n   * Calculates the new location of the current handle.\n   * If there are two handles and the bar was clicked, it determines which handle to move.\n   * @function\n   * @private\n   * @param {Object} e - the `event` object passed from the listener.\n   * @param {jQuery} $handle - the current handle to calculate for, if selected.\n   * @param {Number} val - floating point number for the new value of the slider.\n   */\n  Slider.prototype._handleEvent = function (e, $handle, val) {\n    var value, hasVal;\n    if (!val) {\n      //click or drag events\n      e.preventDefault();\n      var _this = this,\n          vertical = this.options.vertical,\n          param = vertical ? 'height' : 'width',\n          direction = vertical ? 'top' : 'left',\n          pageXY = vertical ? e.pageY : e.pageX,\n          halfOfHandle = this.$handle[0].getBoundingClientRect()[param] / 2,\n          barDim = this.$element[0].getBoundingClientRect()[param],\n          barOffset = this.$element.offset()[direction] - pageXY,\n          barXY = barOffset > 0 ? -halfOfHandle : barOffset - halfOfHandle < -barDim ? barDim : Math.abs(barOffset),\n          //if the cursor position is less than or greater than the elements bounding coordinates, set coordinates within those bounds\n      // eleDim = this.$element[0].getBoundingClientRect()[param],\n      offsetPct = percent(barXY, barDim);\n      value = (this.options.end - this.options.start) * offsetPct;\n      hasVal = false;\n\n      if (!$handle) {\n        //figure out which handle it is, pass it to the next function.\n        var firstHndlPos = absPosition(this.$handle, direction, barXY, param),\n            secndHndlPos = absPosition(this.$handle2, direction, barXY, param);\n        $handle = firstHndlPos <= secndHndlPos ? this.$handle : this.$handle2;\n      }\n    } else {\n      //change event on input\n      value = val;\n      hasVal = true;\n    }\n\n    this._setHandlePos($handle, value, hasVal);\n  };\n  /**\n   * Adds event listeners to the slider elements.\n   * @function\n   * @private\n   * @param {jQuery} $handle - the current handle to apply listeners to.\n   */\n  Slider.prototype._events = function ($handle) {\n    if (this.options.disabled) {\n      return false;\n    }\n\n    var _this = this,\n        curHandle,\n        timer;\n\n    this.inputs.off('change.zf.slider').on('change.zf.slider', function (e) {\n      var idx = _this.inputs.index($(this));\n      _this._handleEvent(e, _this.handles.eq(idx), $(this).val());\n    });\n\n    if (this.options.clickSelect) {\n      this.$element.off('click.zf.slider').on('click.zf.slider', function (e) {\n        if (_this.$element.data('dragging')) {\n          return false;\n        }\n        _this.animComplete = false;\n        if (_this.options.doubleSided) {\n          _this._handleEvent(e);\n        } else {\n          _this._handleEvent(e, _this.$handle);\n        }\n      });\n    }\n\n    if (this.options.draggable) {\n      this.handles.addTouch();\n      // var curHandle,\n      //     timer,\n      var $body = $('body');\n      $handle.off('mousedown.zf.slider').on('mousedown.zf.slider', function (e) {\n        $handle.addClass('is-dragging');\n        _this.$fill.addClass('is-dragging'); //\n        _this.$element.data('dragging', true);\n        _this.animComplete = false;\n        curHandle = $(e.currentTarget);\n\n        $body.on('mousemove.zf.slider', function (e) {\n          e.preventDefault();\n\n          // timer = setTimeout(function(){\n          _this._handleEvent(e, curHandle);\n          // }, _this.options.dragDelay);\n        }).on('mouseup.zf.slider', function (e) {\n          // clearTimeout(timer);\n          _this.animComplete = true;\n          _this._handleEvent(e, curHandle);\n          $handle.removeClass('is-dragging');\n          _this.$fill.removeClass('is-dragging');\n          _this.$element.data('dragging', false);\n          // Foundation.reflow(_this.$element, 'slider');\n          $body.off('mousemove.zf.slider mouseup.zf.slider');\n        });\n      });\n    }\n    $handle.off('keydown.zf.slider').on('keydown.zf.slider', function (e) {\n      var idx = _this.options.doubleSided ? _this.handles.index($(this)) : 0,\n          oldValue = parseFloat(_this.inputs.eq(idx).val()),\n          newValue;\n\n      var _$handle = $(this);\n\n      // handle keyboard event with keyboard util\n      Foundation.Keyboard.handleKey(e, _this, {\n        decrease: function decrease() {\n          newValue = oldValue - _this.options.step;\n        },\n        increase: function increase() {\n          newValue = oldValue + _this.options.step;\n        },\n        decrease_fast: function decrease_fast() {\n          newValue = oldValue - _this.options.step * 10;\n        },\n        increase_fast: function increase_fast() {\n          newValue = oldValue + _this.options.step * 10;\n        },\n        handled: function handled() {\n          // only set handle pos when event was handled specially\n          e.preventDefault();\n          _this._setHandlePos(_$handle, newValue, true);\n        }\n      });\n      /*if (newValue) { // if pressed key has special function, update value\n        e.preventDefault();\n        _this._setHandlePos(_$handle, newValue);\n      }*/\n    });\n  };\n  /**\n   * Destroys the slider plugin.\n   */\n  Slider.prototype.destroy = function () {\n    this.handles.off('.zf.slider');\n    this.inputs.off('.zf.slider');\n    this.$element.off('.zf.slider');\n\n    Foundation.unregisterPlugin(this);\n  };\n\n  Foundation.plugin(Slider, 'Slider');\n\n  function percent(frac, num) {\n    return frac / num;\n  }\n  function absPosition($handle, dir, clickPos, param) {\n    return Math.abs($handle.position()[dir] + $handle[param]() / 2 - clickPos);\n  }\n}(jQuery, window.Foundation);\n\n//*********this is in case we go to static, absolute positions instead of dynamic positioning********\n// this.setSteps(function(){\n//   _this._events();\n//   var initStart = _this.options.positions[_this.options.initialStart - 1] || null;\n//   var initEnd = _this.options.initialEnd ? _this.options.position[_this.options.initialEnd - 1] : null;\n//   if(initStart || initEnd){\n//     _this._handleEvent(initStart, initEnd);\n//   }\n// });\n\n//***********the other part of absolute positions*************\n// Slider.prototype.setSteps = function(cb){\n//   var posChange = this.$element.outerWidth() / this.options.steps;\n//   var counter = 0\n//   while(counter < this.options.steps){\n//     if(counter){\n//       this.options.positions.push(this.options.positions[counter - 1] + posChange);\n//     }else{\n//       this.options.positions.push(posChange);\n//     }\n//     counter++;\n//   }\n//   cb();\n// };\n\n/**\n * Sticky module.\n * @module foundation.sticky\n * @requires foundation.util.triggers\n * @requires foundation.util.mediaQuery\n */\n!function ($, Foundation) {\n  'use strict';\n\n  /**\n   * Creates a new instance of a sticky thing.\n   * @class\n   * @param {jQuery} element - jQuery object to make sticky.\n   * @param {Object} options - options object passed when creating the element programmatically.\n   */\n\n  function Sticky(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, Sticky.defaults, this.$element.data(), options);\n\n    this._init();\n\n    Foundation.registerPlugin(this);\n  }\n  Sticky.defaults = {\n    /**\n     * Customizable container template. Add your own classes for styling and sizing.\n     * @option\n     * @example '<div data-sticky-container class=\"small-6 columns\"></div>'\n     */\n    container: '<div data-sticky-container></div>',\n    /**\n     * Location in the view the element sticks to.\n     * @option\n     * @example 'top'\n     */\n    stickTo: 'top',\n    /**\n     * If anchored to a single element, the id of that element.\n     * @option\n     * @example 'exampleId'\n     */\n    anchor: '',\n    /**\n     * If using more than one element as anchor points, the id of the top anchor.\n     * @option\n     * @example 'exampleId:top'\n     */\n    topAnchor: '',\n    /**\n     * If using more than one element as anchor points, the id of the bottom anchor.\n     * @option\n     * @example 'exampleId:bottom'\n     */\n    btmAnchor: '',\n    /**\n     * Margin, in `em`'s to apply to the top of the element when it becomes sticky.\n     * @option\n     * @example 1\n     */\n    marginTop: 1,\n    /**\n     * Margin, in `em`'s to apply to the bottom of the element when it becomes sticky.\n     * @option\n     * @example 1\n     */\n    marginBottom: 1,\n    /**\n     * Breakpoint string that is the minimum screen size an element should become sticky.\n     * @option\n     * @example 'medium'\n     */\n    stickyOn: 'medium',\n    /**\n     * Class applied to sticky element, and removed on destruction. Foundation defaults to `sticky`.\n     * @option\n     * @example 'sticky'\n     */\n    stickyClass: 'sticky',\n    /**\n     * Class applied to sticky container. Foundation defaults to `sticky-container`.\n     * @option\n     * @example 'sticky-container'\n     */\n    containerClass: 'sticky-container',\n    /**\n     * Number of scroll events between the plugin's recalculating sticky points. Setting it to `0` will cause it to recalc every scroll event, setting it to `-1` will prevent recalc on scroll.\n     * @option\n     * @example 50\n     */\n    checkEvery: -1\n  };\n\n  /**\n   * Initializes the sticky element by adding classes, getting/setting dimensions, breakpoints and attributes\n   * Also triggered by Foundation._reflow\n   * @function\n   * @private\n   */\n  Sticky.prototype._init = function () {\n    var $parent = this.$element.parent('[data-sticky-container]'),\n        id = this.$element[0].id || Foundation.GetYoDigits(6, 'sticky'),\n        _this = this;\n\n    if (!$parent.length) {\n      this.wasWrapped = true;\n    }\n    this.$container = $parent.length ? $parent : $(this.options.container).wrapInner(this.$element);\n    this.$container.addClass(this.options.containerClass);\n\n    this.$element.addClass(this.options.stickyClass).attr({ 'data-resize': id });\n\n    this.scrollCount = this.options.checkEvery;\n    this.isStuck = false;\n    // console.log(this.options.anchor, this.options.topAnchor);\n    if (this.options.topAnchor !== '') {\n      this._parsePoints();\n      // console.log(this.points[0]);\n    } else {\n        this.$anchor = this.options.anchor ? $('#' + this.options.anchor) : $(document.body);\n      }\n\n    this._setSizes(function () {\n      _this._calc(false);\n    });\n    this._events(id.split('-').reverse().join('-'));\n  };\n  /**\n   * If using multiple elements as anchors, calculates the top and bottom pixel values the sticky thing should stick and unstick on.\n   * @function\n   * @private\n   */\n  Sticky.prototype._parsePoints = function () {\n    var top = this.options.topAnchor,\n        btm = this.options.btmAnchor,\n        pts = [top, btm],\n        breaks = {};\n    for (var i = 0, len = pts.length; i < len && pts[i]; i++) {\n      var pt;\n      if (typeof pts[i] === 'number') {\n        pt = pts[i];\n      } else {\n        var place = pts[i].split(':'),\n            anchor = $('#' + place[0]);\n\n        pt = anchor.offset().top;\n        if (place[1] && place[1].toLowerCase() === 'bottom') {\n          pt += anchor[0].getBoundingClientRect().height;\n        }\n      }\n      breaks[i] = pt;\n    }\n    // console.log(breaks);\n    this.points = breaks;\n    // console.log(this.points);\n    return;\n  };\n\n  /**\n   * Adds event handlers for the scrolling element.\n   * @private\n   * @param {String} id - psuedo-random id for unique scroll event listener.\n   */\n  Sticky.prototype._events = function (id) {\n    // console.log('called');\n    var _this = this,\n        scrollListener = 'scroll.zf.' + id;\n    if (this.isOn) {\n      return;\n    }\n    if (this.canStick) {\n      this.isOn = true;\n      // this.$anchor.off('change.zf.sticky')\n      //             .on('change.zf.sticky', function(){\n      //               _this._setSizes(function(){\n      //                 _this._calc(false);\n      //               });\n      //             });\n\n      $(window).off(scrollListener).on(scrollListener, function (e) {\n        if (_this.scrollCount === 0) {\n          _this.scrollCount = _this.options.checkEvery;\n          _this._setSizes(function () {\n            _this._calc(false, window.pageYOffset);\n          });\n        } else {\n          _this.scrollCount--;\n          _this._calc(false, window.pageYOffset);\n        }\n      });\n    }\n\n    this.$element.off('resizeme.zf.trigger').on('resizeme.zf.trigger', function (e, el) {\n      _this._setSizes(function () {\n        _this._calc(false);\n        if (_this.canStick) {\n          if (!_this.isOn) {\n            _this._events(id);\n          }\n        } else if (_this.isOn) {\n          _this._pauseListeners(scrollListener);\n        }\n      });\n    });\n  };\n\n  /**\n   * Removes event handlers for scroll and change events on anchor.\n   * @fires Sticky#pause\n   * @param {String} scrollListener - unique, namespaced scroll listener attached to `window`\n   */\n  Sticky.prototype._pauseListeners = function (scrollListener) {\n    this.isOn = false;\n    // this.$anchor.off('change.zf.sticky');\n    $(window).off(scrollListener);\n\n    /**\n     * Fires when the plugin is paused due to resize event shrinking the view.\n     * @event Sticky#pause\n     * @private\n     */\n    this.$element.trigger('pause.zf.sticky');\n  };\n\n  /**\n   * Called on every `scroll` event and on `_init`\n   * fires functions based on booleans and cached values\n   * @param {Boolean} checkSizes - true if plugin should recalculate sizes and breakpoints.\n   * @param {Number} scroll - current scroll position passed from scroll event cb function. If not passed, defaults to `window.pageYOffset`.\n   */\n  Sticky.prototype._calc = function (checkSizes, scroll) {\n    if (checkSizes) {\n      this._setSizes();\n    }\n\n    if (!this.canStick) {\n      if (this.isStuck) {\n        this._removeSticky(true);\n      }\n      return false;\n    }\n\n    if (!scroll) {\n      scroll = window.pageYOffset;\n    }\n\n    if (scroll >= this.topPoint) {\n      if (scroll <= this.bottomPoint) {\n        if (!this.isStuck) {\n          this._setSticky();\n        }\n      } else {\n        if (this.isStuck) {\n          this._removeSticky(false);\n        }\n      }\n    } else {\n      if (this.isStuck) {\n        this._removeSticky(true);\n      }\n    }\n  };\n  /**\n   * Causes the $element to become stuck.\n   * Adds `position: fixed;`, and helper classes.\n   * @fires Sticky#stuckto\n   * @function\n   * @private\n   */\n  Sticky.prototype._setSticky = function () {\n    var stickTo = this.options.stickTo,\n        mrgn = stickTo === 'top' ? 'marginTop' : 'marginBottom',\n        notStuckTo = stickTo === 'top' ? 'bottom' : 'top',\n        css = {};\n\n    css[mrgn] = this.options[mrgn] + 'em';\n    css[stickTo] = 0;\n    css[notStuckTo] = 'auto';\n    css['left'] = this.$container.offset().left + parseInt(window.getComputedStyle(this.$container[0])[\"padding-left\"], 10);\n    this.isStuck = true;\n    this.$element.removeClass('is-anchored is-at-' + notStuckTo).addClass('is-stuck is-at-' + stickTo).css(css)\n    /**\n     * Fires when the $element has become `position: fixed;`\n     * Namespaced to `top` or `bottom`.\n     * @event Sticky#stuckto\n     */\n    .trigger('sticky.zf.stuckto:' + stickTo);\n  };\n\n  /**\n   * Causes the $element to become unstuck.\n   * Removes `position: fixed;`, and helper classes.\n   * Adds other helper classes.\n   * @param {Boolean} isTop - tells the function if the $element should anchor to the top or bottom of its $anchor element.\n   * @fires Sticky#unstuckfrom\n   * @private\n   */\n  Sticky.prototype._removeSticky = function (isTop) {\n    var stickTo = this.options.stickTo,\n        stickToTop = stickTo === 'top',\n        css = {},\n        mrgn,\n        notStuckTo,\n        anchorPt = (this.points ? this.points[1] - this.points[0] : this.anchorHeight) - this.elemHeight;\n    mrgn = stickToTop ? 'marginTop' : 'marginBottom';\n    notStuckTo = stickToTop ? 'bottom' : 'top';\n    css[mrgn] = 0;\n    if (isTop && !stickToTop || stickToTop && !isTop) {\n      css[stickTo] = anchorPt;\n      css[notStuckTo] = 0;\n    } else {\n      css[stickTo] = 0;\n      css[notStuckTo] = anchorPt;\n    }\n    css['left'] = '';\n    this.isStuck = false;\n    this.$element.removeClass('is-stuck is-at-' + stickTo).addClass('is-anchored is-at-' + (isTop ? 'top' : 'bottom')).css(css)\n    /**\n     * Fires when the $element has become anchored.\n     * Namespaced to `top` or `bottom`.\n     * @event Sticky#unstuckfrom\n     */\n    .trigger('sticky.zf.unstuckfrom:' + isTop ? 'top' : 'bottom');\n  };\n\n  /**\n   * Sets the $element and $container sizes for plugin.\n   * Calls `_setBreakPoints`.\n   * @param {Function} cb - optional callback function to fire on completion of `_setBreakPoints`.\n   * @private\n   */\n  Sticky.prototype._setSizes = function (cb) {\n    this.canStick = Foundation.MediaQuery.atLeast(this.options.stickyOn);\n    if (!this.canStick) {\n      cb();\n    }\n    var _this = this,\n        newElemWidth = this.$container[0].getBoundingClientRect().width,\n        comp = window.getComputedStyle(this.$container[0]),\n        pdng = parseInt(comp['padding-right'], 10);\n\n    // console.log(this.$anchor);\n    if (this.$anchor && this.$anchor.length) {\n      this.anchorHeight = this.$anchor[0].getBoundingClientRect().height;\n    } else {\n      this._parsePoints();\n    }\n\n    this.$element.css({\n      'max-width': newElemWidth - pdng + 'px'\n    });\n\n    var newContainerHeight = this.$element[0].getBoundingClientRect().height || this.containerHeight;\n    this.containerHeight = newContainerHeight;\n    this.$container.css({\n      height: newContainerHeight\n    });\n    this.elemHeight = newContainerHeight;\n\n    if (this.isStuck) {\n      this.$element.css({ \"left\": this.$container.offset().left + parseInt(comp['padding-left'], 10) });\n    }\n\n    this._setBreakPoints(newContainerHeight, function () {\n      if (cb) {\n        cb();\n      }\n    });\n  };\n  /**\n   * Sets the upper and lower breakpoints for the element to become sticky/unsticky.\n   * @param {Number} elemHeight - px value for sticky.$element height, calculated by `_setSizes`.\n   * @param {Function} cb - optional callback function to be called on completion.\n   * @private\n   */\n  Sticky.prototype._setBreakPoints = function (elemHeight, cb) {\n    if (!this.canStick) {\n      if (cb) {\n        cb();\n      } else {\n        return false;\n      }\n    }\n    var mTop = emCalc(this.options.marginTop),\n        mBtm = emCalc(this.options.marginBottom),\n        topPoint = this.points ? this.points[0] : this.$anchor.offset().top,\n        bottomPoint = this.points ? this.points[1] : topPoint + this.anchorHeight,\n\n    // topPoint = this.$anchor.offset().top || this.points[0],\n    // bottomPoint = topPoint + this.anchorHeight || this.points[1],\n    winHeight = window.innerHeight;\n\n    if (this.options.stickTo === 'top') {\n      topPoint -= mTop;\n      bottomPoint -= elemHeight + mTop;\n    } else if (this.options.stickTo === 'bottom') {\n      topPoint -= winHeight - (elemHeight + mBtm);\n      bottomPoint -= winHeight - mBtm;\n    } else {\n      //this would be the stickTo: both option... tricky\n    }\n\n    this.topPoint = topPoint;\n    this.bottomPoint = bottomPoint;\n\n    if (cb) {\n      cb();\n    }\n  };\n\n  /**\n   * Destroys the current sticky element.\n   * Resets the element to the top position first.\n   * Removes event listeners, JS-added css properties and classes, and unwraps the $element if the JS added the $container.\n   * @function\n   */\n  Sticky.prototype.destroy = function () {\n    this._removeSticky(true);\n\n    this.$element.removeClass(this.options.stickyClass + ' is-anchored is-at-top').css({\n      height: '',\n      top: '',\n      bottom: '',\n      'max-width': ''\n    }).off('resizeme.zf.trigger');\n\n    this.$anchor.off('change.zf.sticky');\n    $(window).off('scroll.zf.sticky');\n\n    if (this.wasWrapped) {\n      this.$element.unwrap();\n    } else {\n      this.$container.removeClass(this.options.containerClass).css({\n        height: ''\n      });\n    }\n    Foundation.unregisterPlugin(this);\n  };\n  /**\n   * Helper function to calculate em values\n   * @param Number {em} - number of em's to calculate into pixels\n   */\n  function emCalc(em) {\n    return parseInt(window.getComputedStyle(document.body, null).fontSize, 10) * em;\n  }\n  Foundation.plugin(Sticky, 'Sticky');\n}(jQuery, window.Foundation);\n\n/**\n * Tabs module.\n * @module foundation.tabs\n * @requires foundation.util.keyboard\n * @requires foundation.util.timerAndImageLoader if tabs contain images\n */\n!function ($, Foundation) {\n  'use strict';\n\n  /**\n   * Creates a new instance of tabs.\n   * @class\n   * @fires Tabs#init\n   * @param {jQuery} element - jQuery object to make into tabs.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n\n  function Tabs(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, Tabs.defaults, this.$element.data(), options);\n\n    this._init();\n    Foundation.registerPlugin(this);\n    Foundation.Keyboard.register('Tabs', {\n      'ENTER': 'open',\n      'SPACE': 'open',\n      'ARROW_RIGHT': 'next',\n      'ARROW_UP': 'previous',\n      'ARROW_DOWN': 'next',\n      'ARROW_LEFT': 'previous'\n    });\n  }\n\n  // 'TAB': 'next',\n  // 'SHIFT_TAB': 'previous'\n  Tabs.defaults = {\n    // /**\n    //  * Allows the JS to alter the url of the window. Not yet implemented.\n    //  */\n    // deepLinking: false,\n    // /**\n    //  * If deepLinking is enabled, allows the window to scroll to content if window is loaded with a hash including a tab-pane id\n    //  */\n    // scrollToContent: false,\n    /**\n     * Allows the window to scroll to content of active pane on load if set to true.\n     * @option\n     * @example false\n     */\n    autoFocus: false,\n    /**\n     * Allows keyboard input to 'wrap' around the tab links.\n     * @option\n     * @example true\n     */\n    wrapOnKeys: true,\n    /**\n     * Allows the tab content panes to match heights if set to true.\n     * @option\n     * @example false\n     */\n    matchHeight: false,\n    /**\n     * Class applied to `li`'s in tab link list.\n     * @option\n     * @example 'tabs-title'\n     */\n    linkClass: 'tabs-title',\n    // contentClass: 'tabs-content',\n    /**\n     * Class applied to the content containers.\n     * @option\n     * @example 'tabs-panel'\n     */\n    panelClass: 'tabs-panel'\n  };\n\n  /**\n   * Initializes the tabs by showing and focusing (if autoFocus=true) the preset active tab.\n   * @private\n   */\n  Tabs.prototype._init = function () {\n    var _this = this;\n\n    this.$tabTitles = this.$element.find('.' + this.options.linkClass);\n    this.$tabContent = $('[data-tabs-content=\"' + this.$element[0].id + '\"]');\n\n    this.$tabTitles.each(function () {\n      var $elem = $(this),\n          $link = $elem.find('a'),\n          isActive = $elem.hasClass('is-active'),\n          hash = $link.attr('href').slice(1),\n          linkId = hash + '-label',\n          $tabContent = $(hash);\n\n      $elem.attr({ 'role': 'presentation' });\n\n      $link.attr({\n        'role': 'tab',\n        'aria-controls': hash,\n        'aria-selected': isActive,\n        'id': linkId\n      });\n\n      $tabContent.attr({\n        'role': 'tabpanel',\n        'aria-hidden': !isActive,\n        'aria-labelledby': linkId\n      });\n\n      if (isActive && _this.options.autoFocus) {\n        $link.focus();\n      }\n    });\n    if (this.options.matchHeight) {\n      var $images = this.$tabContent.find('img');\n      if ($images.length) {\n        Foundation.onImagesLoaded($images, this._setHeight.bind(this));\n      } else {\n        this._setHeight();\n      }\n    }\n    this._events();\n  };\n  /**\n   * Adds event handlers for items within the tabs.\n   * @private\n   */\n  Tabs.prototype._events = function () {\n    this._addKeyHandler();\n    this._addClickHandler();\n    if (this.options.matchHeight) {\n      $(window).on('changed.zf.mediaquery', this._setHeight.bind(this));\n    }\n  };\n\n  /**\n   * Adds click handlers for items within the tabs.\n   * @private\n   */\n  Tabs.prototype._addClickHandler = function () {\n    var _this = this;\n    this.$tabTitles.off('click.zf.tabs').on('click.zf.tabs', function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n      if ($(this).hasClass('is-active')) {\n        return;\n      }\n      _this._handleTabChange($(this));\n    });\n  };\n\n  /**\n   * Adds keyboard event handlers for items within the tabs.\n   * @private\n   */\n  Tabs.prototype._addKeyHandler = function () {\n    var _this = this;\n    var $firstTab = _this.$element.find('li:first-of-type');\n    var $lastTab = _this.$element.find('li:last-of-type');\n\n    this.$tabTitles.off('keydown.zf.tabs').on('keydown.zf.tabs', function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      var $element = $(this),\n          $elements = $element.parent('ul').children('li'),\n          $prevElement,\n          $nextElement;\n\n      $elements.each(function (i) {\n        if ($(this).is($element)) {\n          if (_this.options.wrapOnKeys) {\n            $prevElement = i === 0 ? $elements.last() : $elements.eq(i - 1);\n            $nextElement = i === $elements.length - 1 ? $elements.first() : $elements.eq(i + 1);\n          } else {\n            $prevElement = $elements.eq(Math.max(0, i - 1));\n            $nextElement = $elements.eq(Math.min(i + 1, $elements.length - 1));\n          }\n          return;\n        }\n      });\n\n      // handle keyboard event with keyboard util\n      Foundation.Keyboard.handleKey(e, _this, {\n        open: function open() {\n          $element.find('[role=\"tab\"]').focus();\n          _this._handleTabChange($element);\n        },\n        previous: function previous() {\n          $prevElement.find('[role=\"tab\"]').focus();\n          _this._handleTabChange($prevElement);\n        },\n        next: function next() {\n          $nextElement.find('[role=\"tab\"]').focus();\n          _this._handleTabChange($nextElement);\n        }\n      });\n    });\n  };\n\n  /**\n   * Opens the tab `$targetContent` defined by `$target`.\n   * @param {jQuery} $target - Tab to open.\n   * @fires Tabs#change\n   * @function\n   */\n  Tabs.prototype._handleTabChange = function ($target) {\n    var $tabLink = $target.find('[role=\"tab\"]'),\n        hash = $tabLink.attr('href'),\n        $targetContent = $(hash),\n        $oldTab = this.$element.find('.' + this.options.linkClass + '.is-active').removeClass('is-active').find('[role=\"tab\"]').attr({ 'aria-selected': 'false' }).attr('href');\n\n    $($oldTab).removeClass('is-active').attr({ 'aria-hidden': 'true' });\n\n    $target.addClass('is-active');\n\n    $tabLink.attr({ 'aria-selected': 'true' });\n\n    $targetContent.addClass('is-active').attr({ 'aria-hidden': 'false' });\n\n    /**\n     * Fires when the plugin has successfully changed tabs.\n     * @event Tabs#change\n     */\n    this.$element.trigger('change.zf.tabs', [$target]);\n    // Foundation.reflow(this.$element, 'tabs');\n  };\n\n  /**\n   * Public method for selecting a content pane to display.\n   * @param {jQuery | String} elem - jQuery object or string of the id of the pane to display.\n   * @function\n   */\n  Tabs.prototype.selectTab = function (elem) {\n    var idStr;\n    if ((typeof elem === 'undefined' ? 'undefined' : _typeof(elem)) === 'object') {\n      idStr = elem[0].id;\n    } else {\n      idStr = elem;\n    }\n\n    if (idStr.indexOf('#') < 0) {\n      idStr = '#' + idStr;\n    }\n    var $target = this.$tabTitles.find('[href=\"' + idStr + '\"]').parent('.' + this.options.linkClass);\n\n    this._handleTabChange($target);\n  };\n  /**\n   * Sets the height of each panel to the height of the tallest panel.\n   * If enabled in options, gets called on media query change.\n   * If loading content via external source, can be called directly or with _reflow.\n   * @function\n   * @private\n   */\n  Tabs.prototype._setHeight = function () {\n    var max = 0;\n    this.$tabContent.find('.' + this.options.panelClass).css('height', '').each(function () {\n      var panel = $(this),\n          isActive = panel.hasClass('is-active');\n\n      if (!isActive) {\n        panel.css({ 'visibility': 'hidden', 'display': 'block' });\n      }\n      var temp = this.getBoundingClientRect().height;\n\n      if (!isActive) {\n        panel.css({ 'visibility': '', 'display': '' });\n      }\n\n      max = temp > max ? temp : max;\n    }).css('height', max + 'px');\n  };\n\n  /**\n   * Destroys an instance of an tabs.\n   * @fires Tabs#destroyed\n   */\n  Tabs.prototype.destroy = function () {\n    this.$element.find('.' + this.options.linkClass).off('.zf.tabs').hide().end().find('.' + this.options.panelClass).hide();\n    if (this.options.matchHeight) {\n      $(window).off('changed.zf.mediaquery');\n    }\n    Foundation.unregisterPlugin(this);\n  };\n\n  Foundation.plugin(Tabs, 'Tabs');\n\n  function checkClass($elem) {\n    return $elem.hasClass('is-active');\n  }\n}(jQuery, window.Foundation);\n\n/**\n * Toggler module.\n * @module foundation.toggler\n * @requires foundation.util.motion\n */\n\n!function (Foundation, $) {\n  'use strict';\n\n  /**\n   * Creates a new instance of Toggler.\n   * @class\n   * @fires Toggler#init\n   * @param {Object} element - jQuery object to add the trigger to.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n\n  function Toggler(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, Toggler.defaults, element.data(), options);\n    this.className = '';\n\n    this._init();\n    this._events();\n\n    Foundation.registerPlugin(this);\n  }\n\n  Toggler.defaults = {\n    /**\n     * Tells the plugin if the element should animated when toggled.\n     * @option\n     * @example false\n     */\n    animate: false\n  };\n\n  /**\n   * Initializes the Toggler plugin by parsing the toggle class from data-toggler, or animation classes from data-animate.\n   * @function\n   * @private\n   */\n  Toggler.prototype._init = function () {\n    var input;\n    // Parse animation classes if they were set\n    if (this.options.animate) {\n      input = this.options.animate.split(' ');\n\n      this.animationIn = input[0];\n      this.animationOut = input[1] || null;\n    }\n    // Otherwise, parse toggle class\n    else {\n        input = this.$element.data('toggler');\n\n        // Allow for a . at the beginning of the string\n        if (input[0] === '.') {\n          this.className = input.slice(1);\n        } else {\n          this.className = input;\n        }\n      }\n\n    // Add ARIA attributes to triggers\n    var id = this.$element[0].id;\n    $('[data-open=\"' + id + '\"], [data-close=\"' + id + '\"], [data-toggle=\"' + id + '\"]').attr('aria-controls', id);\n\n    // If the target is hidden, add aria-hidden\n    if (this.$element.is(':hidden')) {\n      this.$element.attr('aria-expanded', 'false');\n    }\n  };\n\n  /**\n   * Initializes events for the toggle trigger.\n   * @function\n   * @private\n   */\n  Toggler.prototype._events = function () {\n    var _this = this;\n\n    this.$element.on('toggle.zf.trigger', function () {\n      _this.toggle();\n      return false;\n    });\n  };\n\n  /**\n   * Toggles the target class on the target element. An event is fired from the original trigger depending on if the resultant state was \"on\" or \"off\".\n   * @function\n   * @fires Toggler#on\n   * @fires Toggler#off\n   */\n  Toggler.prototype.toggle = function () {\n    if (!this.options.animate) {\n      this._toggleClass();\n    } else {\n      this._toggleAnimate();\n    }\n  };\n\n  Toggler.prototype._toggleClass = function () {\n    var _this = this;\n    this.$element.toggleClass(this.className);\n\n    if (this.$element.hasClass(this.className)) {\n      /**\n       * Fires if the target element has the class after a toggle.\n       * @event Toggler#on\n       */\n      this.$element.trigger('on.zf.toggler');\n    } else {\n      /**\n       * Fires if the target element does not have the class after a toggle.\n       * @event Toggler#off\n       */\n      this.$element.trigger('off.zf.toggler');\n    }\n\n    _this._updateARIA();\n  };\n\n  Toggler.prototype._toggleAnimate = function () {\n    var _this = this;\n\n    if (this.$element.is(':hidden')) {\n      Foundation.Motion.animateIn(this.$element, this.animationIn, function () {\n        this.trigger('on.zf.toggler');\n        _this._updateARIA();\n      });\n    } else {\n      Foundation.Motion.animateOut(this.$element, this.animationOut, function () {\n        this.trigger('off.zf.toggler');\n        _this._updateARIA();\n      });\n    }\n  };\n\n  Toggler.prototype._updateARIA = function () {\n    if (this.$element.is(':hidden')) {\n      this.$element.attr('aria-expanded', 'false');\n    } else {\n      this.$element.attr('aria-expanded', 'true');\n    }\n  };\n\n  /**\n   * Destroys the instance of Toggler on the element.\n   * @function\n   */\n  Toggler.prototype.destroy = function () {\n    this.$element.off('.zf.toggler');\n    Foundation.unregisterPlugin(this);\n  };\n\n  Foundation.plugin(Toggler, 'Toggler');\n\n  // Exports for AMD/Browserify\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') module.exports = Toggler;\n  if (typeof define === 'function') define(['foundation'], function () {\n    return Toggler;\n  });\n}(Foundation, jQuery);\n\n/**\n * Tooltip module.\n * @module foundation.tooltip\n * @requires foundation.util.box\n * @requires foundation.util.triggers\n */\n!function ($, document, Foundation) {\n  'use strict';\n\n  /**\n   * Creates a new instance of a Tooltip.\n   * @class\n   * @fires Tooltip#init\n   * @param {jQuery} element - jQuery object to attach a tooltip to.\n   * @param {Object} options - object to extend the default configuration.\n   */\n\n  function Tooltip(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, Tooltip.defaults, this.$element.data(), options);\n\n    this.isActive = false;\n    this.isClick = false;\n    this._init();\n\n    Foundation.registerPlugin(this);\n  }\n\n  Tooltip.defaults = {\n    disableForTouch: false,\n    /**\n     * Time, in ms, before a tooltip should open on hover.\n     * @option\n     * @example 200\n     */\n    hoverDelay: 200,\n    /**\n     * Time, in ms, a tooltip should take to fade into view.\n     * @option\n     * @example 150\n     */\n    fadeInDuration: 150,\n    /**\n     * Time, in ms, a tooltip should take to fade out of view.\n     * @option\n     * @example 150\n     */\n    fadeOutDuration: 150,\n    /**\n     * Disables hover events from opening the tooltip if set to true\n     * @option\n     * @example false\n     */\n    disableHover: false,\n    /**\n     * Optional addtional classes to apply to the tooltip template on init.\n     * @option\n     * @example 'my-cool-tip-class'\n     */\n    templateClasses: '',\n    /**\n     * Non-optional class added to tooltip templates. Foundation default is 'tooltip'.\n     * @option\n     * @example 'tooltip'\n     */\n    tooltipClass: 'tooltip',\n    /**\n     * Class applied to the tooltip anchor element.\n     * @option\n     * @example 'has-tip'\n     */\n    triggerClass: 'has-tip',\n    /**\n     * Minimum breakpoint size at which to open the tooltip.\n     * @option\n     * @example 'small'\n     */\n    showOn: 'small',\n    /**\n     * Custom template to be used to generate markup for tooltip.\n     * @option\n     * @example '<div class=\"tooltip\"></div>'\n     */\n    template: '',\n    /**\n     * Text displayed in the tooltip template on open.\n     * @option\n     * @example 'Some cool space fact here.'\n     */\n    tipText: '',\n    touchCloseText: 'Tap to close.',\n    /**\n     * Allows the tooltip to remain open if triggered with a click or touch event.\n     * @option\n     * @example true\n     */\n    clickOpen: true,\n    /**\n     * Additional positioning classes, set by the JS\n     * @option\n     * @example 'top'\n     */\n    positionClass: '',\n    /**\n     * Distance, in pixels, the template should push away from the anchor on the Y axis.\n     * @option\n     * @example 10\n     */\n    vOffset: 10,\n    /**\n     * Distance, in pixels, the template should push away from the anchor on the X axis, if aligned to a side.\n     * @option\n     * @example 12\n     */\n    hOffset: 12\n  };\n\n  /**\n   * Initializes the tooltip by setting the creating the tip element, adding it's text, setting private variables and setting attributes on the anchor.\n   * @private\n   */\n  Tooltip.prototype._init = function () {\n    var elemId = this.$element.attr('aria-describedby') || Foundation.GetYoDigits(6, 'tooltip');\n\n    this.options.positionClass = this._getPositionClass(this.$element);\n    this.options.tipText = this.options.tipText || this.$element.attr('title');\n    this.template = this.options.template ? $(this.options.template) : this._buildTemplate(elemId);\n\n    this.template.appendTo(document.body).text(this.options.tipText).hide();\n\n    this.$element.attr({\n      'title': '',\n      'aria-describedby': elemId,\n      'data-yeti-box': elemId,\n      'data-toggle': elemId,\n      'data-resize': elemId\n    }).addClass(this.triggerClass);\n\n    //helper variables to track movement on collisions\n    this.usedPositions = [];\n    this.counter = 4;\n    this.classChanged = false;\n\n    this._events();\n  };\n\n  /**\n   * Grabs the current positioning class, if present, and returns the value or an empty string.\n   * @private\n   */\n  Tooltip.prototype._getPositionClass = function (element) {\n    if (!element) {\n      return '';\n    }\n    // var position = element.attr('class').match(/top|left|right/g);\n    var position = element[0].className.match(/(top|left|right)/g);\n    position = position ? position[0] : '';\n    return position;\n  };\n  /**\n   * builds the tooltip element, adds attributes, and returns the template.\n   * @private\n   */\n  Tooltip.prototype._buildTemplate = function (id) {\n    var templateClasses = (this.options.tooltipClass + ' ' + this.options.positionClass).trim();\n    var $template = $('<div></div>').addClass(templateClasses).attr({\n      'role': 'tooltip',\n      'aria-hidden': true,\n      'data-is-active': false,\n      'data-is-focus': false,\n      'id': id\n    });\n    return $template;\n  };\n\n  /**\n   * Function that gets called if a collision event is detected.\n   * @param {String} position - positioning class to try\n   * @private\n   */\n  Tooltip.prototype._reposition = function (position) {\n    this.usedPositions.push(position ? position : 'bottom');\n\n    //default, try switching to opposite side\n    if (!position && this.usedPositions.indexOf('top') < 0) {\n      this.template.addClass('top');\n    } else if (position === 'top' && this.usedPositions.indexOf('bottom') < 0) {\n      this.template.removeClass(position);\n    } else if (position === 'left' && this.usedPositions.indexOf('right') < 0) {\n      this.template.removeClass(position).addClass('right');\n    } else if (position === 'right' && this.usedPositions.indexOf('left') < 0) {\n      this.template.removeClass(position).addClass('left');\n    }\n\n    //if default change didn't work, try bottom or left first\n    else if (!position && this.usedPositions.indexOf('top') > -1 && this.usedPositions.indexOf('left') < 0) {\n        this.template.addClass('left');\n      } else if (position === 'top' && this.usedPositions.indexOf('bottom') > -1 && this.usedPositions.indexOf('left') < 0) {\n        this.template.removeClass(position).addClass('left');\n      } else if (position === 'left' && this.usedPositions.indexOf('right') > -1 && this.usedPositions.indexOf('bottom') < 0) {\n        this.template.removeClass(position);\n      } else if (position === 'right' && this.usedPositions.indexOf('left') > -1 && this.usedPositions.indexOf('bottom') < 0) {\n        this.template.removeClass(position);\n      }\n      //if nothing cleared, set to bottom\n      else {\n          this.template.removeClass(position);\n        }\n    this.classChanged = true;\n    this.counter--;\n  };\n\n  /**\n   * sets the position class of an element and recursively calls itself until there are no more possible positions to attempt, or the tooltip element is no longer colliding.\n   * if the tooltip is larger than the screen width, default to full width - any user selected margin\n   * @private\n   */\n  Tooltip.prototype._setPosition = function () {\n    var position = this._getPositionClass(this.template),\n        $tipDims = Foundation.Box.GetDimensions(this.template),\n        $anchorDims = Foundation.Box.GetDimensions(this.$element),\n        direction = position === 'left' ? 'left' : position === 'right' ? 'left' : 'top',\n        param = direction === 'top' ? 'height' : 'width',\n        offset = param === 'height' ? this.options.vOffset : this.options.hOffset,\n        _this = this;\n\n    if ($tipDims.width >= $tipDims.windowDims.width || !this.counter && !Foundation.Box.ImNotTouchingYou(this.template)) {\n      this.template.offset(Foundation.Box.GetOffsets(this.template, this.$element, 'center bottom', this.options.vOffset, this.options.hOffset, true)).css({\n        // this.$element.offset(Foundation.GetOffsets(this.template, this.$element, 'center bottom', this.options.vOffset, this.options.hOffset, true)).css({\n        'width': $anchorDims.windowDims.width - this.options.hOffset * 2,\n        'height': 'auto'\n      });\n      return false;\n    }\n\n    this.template.offset(Foundation.Box.GetOffsets(this.template, this.$element, 'center ' + (position || 'bottom'), this.options.vOffset, this.options.hOffset));\n\n    while (!Foundation.Box.ImNotTouchingYou(this.template) && this.counter) {\n      this._reposition(position);\n      this._setPosition();\n    }\n  };\n\n  /**\n   * reveals the tooltip, and fires an event to close any other open tooltips on the page\n   * @fires Closeme#tooltip\n   * @fires Tooltip#show\n   * @function\n   */\n  Tooltip.prototype.show = function () {\n    if (this.options.showOn !== 'all' && !Foundation.MediaQuery.atLeast(this.options.showOn)) {\n      // console.error('The screen is too small to display this tooltip');\n      return false;\n    }\n\n    var _this = this;\n    this.template.css('visibility', 'hidden').show();\n    this._setPosition();\n\n    /**\n     * Fires to close all other open tooltips on the page\n     * @event Closeme#tooltip\n     */\n    this.$element.trigger('closeme.zf.tooltip', this.template.attr('id'));\n\n    this.template.attr({\n      'data-is-active': true,\n      'aria-hidden': false\n    });\n    _this.isActive = true;\n    // console.log(this.template);\n    this.template.stop().hide().css('visibility', '').fadeIn(this.options.fadeInDuration, function () {\n      //maybe do stuff?\n    });\n    /**\n     * Fires when the tooltip is shown\n     * @event Tooltip#show\n     */\n    this.$element.trigger('show.zf.tooltip');\n  };\n\n  /**\n   * Hides the current tooltip, and resets the positioning class if it was changed due to collision\n   * @fires Tooltip#hide\n   * @function\n   */\n  Tooltip.prototype.hide = function () {\n    // console.log('hiding', this.$element.data('yeti-box'));\n    var _this = this;\n    this.template.stop().attr({\n      'aria-hidden': true,\n      'data-is-active': false\n    }).fadeOut(this.options.fadeOutDuration, function () {\n      _this.isActive = false;\n      _this.isClick = false;\n      if (_this.classChanged) {\n        _this.template.removeClass(_this._getPositionClass(_this.template)).addClass(_this.options.positionClass);\n\n        _this.usedPositions = [];\n        _this.counter = 4;\n        _this.classChanged = false;\n      }\n    });\n    /**\n     * fires when the tooltip is hidden\n     * @event Tooltip#hide\n     */\n    this.$element.trigger('hide.zf.tooltip');\n  };\n\n  /**\n   * adds event listeners for the tooltip and its anchor\n   * TODO combine some of the listeners like focus and mouseenter, etc.\n   * @private\n   */\n  Tooltip.prototype._events = function () {\n    var _this = this;\n    var $template = this.template;\n    var isFocus = false;\n\n    if (!this.options.disableHover) {\n\n      this.$element.on('mouseenter.zf.tooltip', function (e) {\n        if (!_this.isActive) {\n          _this.timeout = setTimeout(function () {\n            _this.show();\n          }, _this.options.hoverDelay);\n        }\n      }).on('mouseleave.zf.tooltip', function (e) {\n        clearTimeout(_this.timeout);\n        if (!isFocus || !_this.isClick && _this.options.clickOpen) {\n          _this.hide();\n        }\n      });\n    }\n    if (this.options.clickOpen) {\n      this.$element.on('mousedown.zf.tooltip', function (e) {\n        e.stopImmediatePropagation();\n        if (_this.isClick) {\n          _this.hide();\n          // _this.isClick = false;\n        } else {\n            _this.isClick = true;\n            if ((_this.options.disableHover || !_this.$element.attr('tabindex')) && !_this.isActive) {\n              _this.show();\n            }\n          }\n      });\n    }\n\n    if (!this.options.disableForTouch) {\n      this.$element.on('tap.zf.tooltip touchend.zf.tooltip', function (e) {\n        _this.isActive ? _this.hide() : _this.show();\n      });\n    }\n\n    this.$element.on({\n      // 'toggle.zf.trigger': this.toggle.bind(this),\n      // 'close.zf.trigger': this.hide.bind(this)\n      'close.zf.trigger': this.hide.bind(this)\n    });\n\n    this.$element.on('focus.zf.tooltip', function (e) {\n      isFocus = true;\n      console.log(_this.isClick);\n      if (_this.isClick) {\n        return false;\n      } else {\n        // $(window)\n        _this.show();\n      }\n    }).on('focusout.zf.tooltip', function (e) {\n      isFocus = false;\n      _this.isClick = false;\n      _this.hide();\n    }).on('resizeme.zf.trigger', function () {\n      if (_this.isActive) {\n        _this._setPosition();\n      }\n    });\n  };\n  /**\n   * adds a toggle method, in addition to the static show() & hide() functions\n   * @function\n   */\n  Tooltip.prototype.toggle = function () {\n    if (this.isActive) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  };\n  /**\n   * Destroys an instance of tooltip, removes template element from the view.\n   * @function\n   */\n  Tooltip.prototype.destroy = function () {\n    this.$element.attr('title', this.template.text()).off('.zf.trigger .zf.tootip')\n    //  .removeClass('has-tip')\n    .removeAttr('aria-describedby').removeAttr('data-yeti-box').removeAttr('data-toggle').removeAttr('data-resize');\n\n    this.template.remove();\n\n    Foundation.unregisterPlugin(this);\n  };\n  /**\n   * TODO utilize resize event trigger\n   */\n\n  Foundation.plugin(Tooltip, 'Tooltip');\n}(jQuery, window.document, window.Foundation);\n\n;(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['jquery'], factory);\n  } else if ((typeof exports === 'undefined' ? 'undefined' : _typeof(exports)) === 'object') {\n    module.exports = factory(require('jquery'));\n  } else {\n    root.MotionUI = factory(root.jQuery);\n  }\n})(this, function ($) {\n  'use strict';\n\n  // Polyfill for requestAnimationFrame\n\n  (function () {\n    if (!Date.now) Date.now = function () {\n      return new Date().getTime();\n    };\n\n    var vendors = ['webkit', 'moz'];\n    for (var i = 0; i < vendors.length && !window.requestAnimationFrame; ++i) {\n      var vp = vendors[i];\n      window.requestAnimationFrame = window[vp + 'RequestAnimationFrame'];\n      window.cancelAnimationFrame = window[vp + 'CancelAnimationFrame'] || window[vp + 'CancelRequestAnimationFrame'];\n    }\n    if (/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent) || !window.requestAnimationFrame || !window.cancelAnimationFrame) {\n      var lastTime = 0;\n      window.requestAnimationFrame = function (callback) {\n        var now = Date.now();\n        var nextTime = Math.max(lastTime + 16, now);\n        return setTimeout(function () {\n          callback(lastTime = nextTime);\n        }, nextTime - now);\n      };\n      window.cancelAnimationFrame = clearTimeout;\n    }\n  })();\n\n  var initClasses = ['mui-enter', 'mui-leave'];\n  var activeClasses = ['mui-enter-active', 'mui-leave-active'];\n\n  // Find the right \"transitionend\" event for this browser\n  var endEvent = function () {\n    var transitions = {\n      'transition': 'transitionend',\n      'WebkitTransition': 'webkitTransitionEnd',\n      'MozTransition': 'transitionend',\n      'OTransition': 'otransitionend'\n    };\n    var elem = window.document.createElement('div');\n\n    for (var t in transitions) {\n      if (typeof elem.style[t] !== 'undefined') {\n        return transitions[t];\n      }\n    }\n\n    return null;\n  }();\n\n  function animate(isIn, element, animation, cb) {\n    element = $(element).eq(0);\n\n    if (!element.length) return;\n\n    if (endEvent === null) {\n      isIn ? element.show() : element.hide();\n      cb();\n      return;\n    }\n\n    var initClass = isIn ? initClasses[0] : initClasses[1];\n    var activeClass = isIn ? activeClasses[0] : activeClasses[1];\n\n    // Set up the animation\n    reset();\n    element.addClass(animation);\n    element.css('transition', 'none');\n    requestAnimationFrame(function () {\n      element.addClass(initClass);\n      if (isIn) element.show();\n    });\n\n    // Start the animation\n    requestAnimationFrame(function () {\n      element[0].offsetWidth;\n      element.css('transition', '');\n      element.addClass(activeClass);\n    });\n\n    // Clean up the animation when it finishes\n    element.one('transitionend', finish);\n\n    // Hides the element (for out animations), resets the element, and runs a callback\n    function finish() {\n      if (!isIn) element.hide();\n      reset();\n      if (cb) cb.apply(element);\n    }\n\n    // Resets transitions and removes motion-specific classes\n    function reset() {\n      element[0].style.transitionDuration = 0;\n      element.removeClass(initClass + ' ' + activeClass + ' ' + animation);\n    }\n  }\n\n  var MotionUI = {\n    animateIn: function animateIn(element, animation, cb) {\n      animate(true, element, animation, cb);\n    },\n\n    animateOut: function animateOut(element, animation, cb) {\n      animate(false, element, animation, cb);\n    }\n  };\n\n  return MotionUI;\n});","ast":null,"map":{"version":3,"sources":["/packages/anbuselvan:meteor-toggle-switch/vendor/css-toggle-switch/bower_components/foundation-sites/dist/foundation.js"],"names":[],"mappings":"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","file":"/packages/anbuselvan:meteor-toggle-switch/vendor/css-toggle-switch/bower_components/foundation-sites/dist/foundation.js.map","sourcesContent":["!function($) {\n\n\"use strict\";\n\nvar FOUNDATION_VERSION = '6.0.1';\n\n// Global Foundation object\n// This is attached to the window, or used as a module for AMD/Browserify\nvar Foundation = {\n  version: FOUNDATION_VERSION,\n\n  /**\n   * Stores initialized plugins.\n   */\n  _plugins: {},\n\n  /**\n   * Stores generated unique ids for plugin instances\n   */\n  _uuids: [],\n  /**\n   * Stores currently active plugins.\n   */\n  _activePlugins: {},\n\n  /**\n   * Returns a boolean for RTL support\n   */\n  rtl: function(){\n    return $('html').attr('dir') === 'rtl';\n  },\n  /**\n   * Defines a Foundation plugin, adding it to the `Foundation` namespace and the list of plugins to initialize when reflowing.\n   * @param {Object} plugin - The constructor of the plugin.\n   */\n  plugin: function(plugin, name) {\n    // Object key to use when adding to global Foundation object\n    // Examples: Foundation.Reveal, Foundation.OffCanvas\n    var className = (name || functionName(plugin));\n    // Object key to use when storing the plugin, also used to create the identifying data attribute for the plugin\n    // Examples: data-reveal, data-off-canvas\n    var attrName  = hyphenate(className);\n\n    // Add to the Foundation object and the plugins list (for reflowing)\n    this._plugins[attrName] = this[className] = plugin;\n  },\n  /**\n   * @function\n   * Creates a pointer to an instance of a Plugin within the Foundation._activePlugins object.\n   * Sets the `[data-pluginName=\"uniqueIdHere\"]`, allowing easy access to any plugin's internal methods.\n   * Also fires the initialization event for each plugin, consolidating repeditive code.\n   * @param {Object} plugin - an instance of a plugin, usually `this` in context.\n   * @fires Plugin#init\n   */\n  registerPlugin: function(plugin){\n    var pluginName = functionName(plugin.constructor).toLowerCase();\n\n    plugin.uuid = this.GetYoDigits(6, pluginName);\n    plugin.$element.attr('data-' + pluginName, plugin.uuid)\n          /**\n           * Fires when the plugin has initialized.\n           * @event Plugin#init\n           */\n          .trigger('init.zf.' + pluginName);\n\n    this._activePlugins[plugin.uuid] = plugin;\n\n    return;\n  },\n  /**\n   * @function\n   * Removes the pointer for an instance of a Plugin from the Foundation._activePlugins obj.\n   * Also fires the destroyed event for the plugin, consolidating repeditive code.\n   * @param {Object} plugin - an instance of a plugin, usually `this` in context.\n   * @fires Plugin#destroyed\n   */\n  unregisterPlugin: function(plugin){\n    var pluginName = functionName(plugin.constructor).toLowerCase();\n\n    delete this._activePlugins[plugin.uuid];\n    plugin.$element.removeAttr('data-' + pluginName)\n          /**\n           * Fires when the plugin has been destroyed.\n           * @event Plugin#destroyed\n           */\n          .trigger('destroyed.zf.' + pluginName);\n\n    return;\n  },\n\n  /**\n   * @function\n   * Causes one or more active plugins to re-initialize, resetting event listeners, recalculating positions, etc.\n   * @param {String} plugins - optional string of an individual plugin key, attained by calling `$(element).data('pluginName')`, or string of a plugin class i.e. `'dropdown'`\n   * @default If no argument is passed, reflow all currently active plugins.\n   */\n  _reflow: function(plugins){\n    var actvPlugins = Object.keys(this._activePlugins);\n    var _this = this;\n\n    if(!plugins){\n      actvPlugins.forEach(function(p){\n        _this._activePlugins[p]._init();\n      });\n\n    }else if(typeof plugins === 'string'){\n      var namespace = plugins.split('-')[1];\n\n      if(namespace){\n\n        this._activePlugins[plugins]._init();\n\n      }else{\n        namespace = new RegExp(plugins, 'i');\n\n        actvPlugins.filter(function(p){\n          return namespace.test(p);\n        }).forEach(function(p){\n          _this._activePlugins[p]._init();\n        });\n      }\n    }\n\n  },\n\n  /**\n   * returns a random base-36 uid with namespacing\n   * @function\n   * @param {Number} length - number of random base-36 digits desired. Increase for more random strings.\n   * @param {String} namespace - name of plugin to be incorporated in uid, optional.\n   * @default {String} '' - if no plugin name is provided, nothing is appended to the uid.\n   * @returns {String} - unique id\n   */\n  GetYoDigits: function(length, namespace){\n    length = length || 6;\n    return Math.round((Math.pow(36, length + 1) - Math.random() * Math.pow(36, length))).toString(36).slice(1) + (namespace ? '-' + namespace : '');\n  },\n  /**\n   * Initialize plugins on any elements within `elem` (and `elem` itself) that aren't already initialized.\n   * @param {Object} elem - jQuery object containing the element to check inside. Also checks the element itself, unless it's the `document` object.\n   * @param {String|Array} plugins - A list of plugins to initialize. Leave this out to initialize everything.\n   */\n  reflow: function(elem, plugins) {\n    // If plugins is undefined, just grab everything\n    if (typeof plugins === 'undefined') {\n      plugins = Object.keys(this._plugins);\n    }\n    // If plugins is a string, convert it to an array with one item\n    else if (typeof plugins === 'string') {\n      plugins = [plugins];\n    }\n\n    var _this = this;\n\n    // Iterate through each plugin\n    $.each(plugins, function(i, name) {\n      // Get the current plugin\n      var plugin = _this._plugins[name];\n\n      // Localize the search to all elements inside elem, as well as elem itself, unless elem === document\n      var $elem = $(elem).find('[data-'+name+']').addBack('*');\n\n      // For each plugin found, initialize it\n      $elem.each(function() {\n        // Don't double-dip on plugins\n        if ($(this).attr('zf-plugin')) {\n          console.warn(\"Tried to initialize \"+name+\" on an element that already has a Foundation plugin.\");\n          return;\n        }\n        $(this).data('zf-plugin', new plugin($(this)));\n      });\n    });\n  },\n  getFnName: functionName,\n  transitionend: function($elem){\n    var transitions = {\n      'transition': 'transitionend',\n      'WebkitTransition': 'webkitTransitionEnd',\n      'MozTransition': 'transitionend',\n      'OTransition': 'otransitionend'\n    };\n    var elem = document.createElement('div'),\n        end;\n\n    for (var t in transitions){\n      if (typeof elem.style[t] !== 'undefined'){\n        end = transitions[t];\n      }\n    }\n    if(end){\n      return end;\n    }else{\n      end = setTimeout(function(){\n        $elem.triggerHandler('transitionend', [$elem]);\n      }, 1);\n      return 'transitionend';\n    }\n  }\n};\n\n\nFoundation.util = {\n  /**\n   * Function for applying a debounce effect to a function call.\n   * @function\n   * @param {Function} func - Function to be called at end of timeout.\n   * @param {Number} delay - Time in ms to delay the call of `func`.\n   * @returns function\n   */\n  throttle: function (func, delay) {\n    var timer = null;\n\n    return function () {\n      var context = this, args = arguments;\n\n      if (timer === null) {\n        timer = setTimeout(function () {\n          func.apply(context, args);\n          timer = null;\n        }, delay);\n      }\n    };\n  }\n};\n\n// TODO: consider not making this a jQuery function\n// TODO: need way to reflow vs. re-initialize\n/**\n * The Foundation jQuery method.\n * @param {String|Array} method - An action to perform on the current jQuery object.\n */\nvar foundation = function(method) {\n  var type = typeof method,\n      $meta = $('meta.foundation-mq'),\n      $noJS = $('.no-js');\n\n  if(!$meta.length){\n    $('<meta class=\"foundation-mq\">').appendTo(document.head);\n  }\n  if($noJS.length){\n    $noJS.removeClass('no-js');\n  }\n\n  if(type === 'undefined'){//needs to initialize the Foundation object, or an individual plugin.\n    Foundation.MediaQuery._init();\n    Foundation.reflow(this);\n  }else if(type === 'string'){//an individual method to invoke on a plugin or group of plugins\n    var args = Array.prototype.slice.call(arguments, 1);//collect all the arguments, if necessary\n    var plugClass = this.data('zfPlugin');//determine the class of plugin\n\n    if(plugClass !== undefined && plugClass[method] !== undefined){//make sure both the class and method exist\n      if(this.length === 1){//if there's only one, call it directly.\n          plugClass[method].apply(plugClass, args);\n      }else{\n        this.each(function(i, el){//otherwise loop through the jQuery collection and invoke the method on each\n          plugClass[method].apply($(el).data('zfPlugin'), args);\n        });\n      }\n    }else{//error for no class or no method\n      throw new ReferenceError(\"We're sorry, '\" + method + \"' is not an available method for \" + (plugClass ? functionName(plugClass) : 'this element') + '.');\n    }\n  }else{//error for invalid argument type\n    throw new TypeError(\"We're sorry, '\" + type + \"' is not a valid parameter. You must use a string representing the method you wish to invoke.\");\n  }\n  return this;\n};\n\nwindow.Foundation = Foundation;\n$.fn.foundation = foundation;\n\n// Polyfill for requestAnimationFrame\n(function() {\n  if (!Date.now || !window.Date.now)\n    window.Date.now = Date.now = function() { return new Date().getTime(); };\n\n  var vendors = ['webkit', 'moz'];\n  for (var i = 0; i < vendors.length && !window.requestAnimationFrame; ++i) {\n      var vp = vendors[i];\n      window.requestAnimationFrame = window[vp+'RequestAnimationFrame'];\n      window.cancelAnimationFrame = (window[vp+'CancelAnimationFrame']\n                                 || window[vp+'CancelRequestAnimationFrame']);\n  }\n  if (/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)\n    || !window.requestAnimationFrame || !window.cancelAnimationFrame) {\n    var lastTime = 0;\n    window.requestAnimationFrame = function(callback) {\n        var now = Date.now();\n        var nextTime = Math.max(lastTime + 16, now);\n        return setTimeout(function() { callback(lastTime = nextTime); },\n                          nextTime - now);\n    };\n    window.cancelAnimationFrame = clearTimeout;\n  }\n  /**\n   * Polyfill for performance.now, required by rAF\n   */\n  if(!window.performance || !window.performance.now){\n    window.performance = {\n      start: Date.now(),\n      now: function(){ return Date.now() - this.start; }\n    };\n  }\n})();\nif (!Function.prototype.bind) {\n  Function.prototype.bind = function(oThis) {\n    if (typeof this !== 'function') {\n      // closest thing possible to the ECMAScript 5\n      // internal IsCallable function\n      throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\n    }\n\n    var aArgs   = Array.prototype.slice.call(arguments, 1),\n        fToBind = this,\n        fNOP    = function() {},\n        fBound  = function() {\n          return fToBind.apply(this instanceof fNOP\n                 ? this\n                 : oThis,\n                 aArgs.concat(Array.prototype.slice.call(arguments)));\n        };\n\n    if (this.prototype) {\n      // native functions don't have a prototype\n      fNOP.prototype = this.prototype;\n    }\n    fBound.prototype = new fNOP();\n\n    return fBound;\n  };\n}\n// Polyfill to get the name of a function in IE9\nfunction functionName(fn) {\n  if (Function.prototype.name === undefined) {\n    var funcNameRegex = /function\\s([^(]{1,})\\(/;\n    var results = (funcNameRegex).exec((fn).toString());\n    return (results && results.length > 1) ? results[1].trim() : \"\";\n  }\n  else if (fn.prototype === undefined) {\n    return fn.constructor.name;\n  }\n  else {\n    return fn.prototype.constructor.name;\n  }\n}\n\n// Convert PascalCase to kebab-case\n// Thank you: http://stackoverflow.com/a/8955580\nfunction hyphenate(str) {\n  return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n\n}(jQuery);\n\n!function(Foundation, window){\n  /**\n   * Compares the dimensions of an element to a container and determines collision events with container.\n   * @function\n   * @param {jQuery} element - jQuery object to test for collisions.\n   * @param {jQuery} parent - jQuery object to use as bounding container.\n   * @param {Boolean} lrOnly - set to true to check left and right values only.\n   * @param {Boolean} tbOnly - set to true to check top and bottom values only.\n   * @default if no parent object passed, detects collisions with `window`.\n   * @returns {Boolean} - true if collision free, false if a collision in any direction.\n   */\n  var ImNotTouchingYou = function(element, parent, lrOnly, tbOnly){\n    var eleDims = GetDimensions(element),\n        top, bottom, left, right;\n\n    if(parent){\n      var parDims = GetDimensions(parent);\n\n      bottom = (eleDims.offset.top + eleDims.height <= parDims.height + parDims.offset.top);\n      top    = (eleDims.offset.top >= parDims.offset.top);\n      left   = (eleDims.offset.left >= parDims.offset.left);\n      right  = (eleDims.offset.left + eleDims.width <= parDims.width);\n    }else{\n      bottom = (eleDims.offset.top + eleDims.height <= eleDims.windowDims.height + eleDims.windowDims.offset.top);\n      top    = (eleDims.offset.top >= eleDims.windowDims.offset.top);\n      left   = (eleDims.offset.left >= eleDims.windowDims.offset.left);\n      right  = (eleDims.offset.left + eleDims.width <= eleDims.windowDims.width);\n    }\n    var allDirs = [bottom, top, left, right];\n\n    if(lrOnly){ return left === right === true; }\n    if(tbOnly){ return top === bottom === true; }\n\n    return allDirs.indexOf(false) === -1;\n  };\n\n  /**\n   * Uses native methods to return an object of dimension values.\n   * @function\n   * @param {jQuery || HTML} element - jQuery object or DOM element for which to get the dimensions. Can be any element other that document or window.\n   * @returns {Object} - nested object of integer pixel values\n   * TODO - if element is window, return only those values.\n   */\n  var GetDimensions = function(elem, test){\n    elem = elem.length ? elem[0] : elem;\n\n    if(elem === window || elem === document){ throw new Error(\"I'm sorry, Dave. I'm afraid I can't do that.\"); }\n\n    var rect = elem.getBoundingClientRect(),\n        parRect = elem.parentNode.getBoundingClientRect(),\n        winRect = document.body.getBoundingClientRect(),\n        winY = window.pageYOffset,\n        winX = window.pageXOffset;\n\n    return {\n      width: rect.width,\n      height: rect.height,\n      offset: {\n        top: rect.top + winY,\n        left: rect.left + winX\n      },\n      parentDims: {\n        width: parRect.width,\n        height: parRect.height,\n        offset: {\n          top: parRect.top + winY,\n          left: parRect.left + winX\n        }\n      },\n      windowDims: {\n        width: winRect.width,\n        height: winRect.height,\n        offset: {\n          top: winY,\n          left: winX\n        }\n      }\n    };\n  };\n  /**\n   * Returns an object of top and left integer pixel values for dynamically rendered elements,\n   * such as: Tooltip, Reveal, and Dropdown\n   * @function\n   * @param {jQuery} element - jQuery object for the element being positioned.\n   * @param {jQuery} anchor - jQuery object for the element's anchor point.\n   * @param {String} position - a string relating to the desired position of the element, relative to it's anchor\n   * @param {Number} vOffset - integer pixel value of desired vertical separation between anchor and element.\n   * @param {Number} hOffset - integer pixel value of desired horizontal separation between anchor and element.\n   * @param {Boolean} isOverflow - if a collision event is detected, sets to true to default the element to full width - any desired offset.\n   * TODO alter/rewrite to work with `em` values as well/instead of pixels\n   */\n  var GetOffsets = function(element, anchor, position, vOffset, hOffset, isOverflow){\n    var $eleDims = GetDimensions(element),\n    // var $eleDims = GetDimensions(element),\n        $anchorDims = anchor ? GetDimensions(anchor) : null;\n        // $anchorDims = anchor ? GetDimensions(anchor) : null;\n    switch(position){\n      case 'top':\n        return {\n          left: $anchorDims.offset.left,\n          top: $anchorDims.offset.top - ($eleDims.height + vOffset)\n        };\n        break;\n      case 'left':\n        return {\n          left: $anchorDims.offset.left - ($eleDims.width + hOffset),\n          top: $anchorDims.offset.top\n        };\n        break;\n      case 'right':\n        return {\n          left: $anchorDims.offset.left + $anchorDims.width + hOffset,\n          top: $anchorDims.offset.top\n        };\n        break;\n      case 'center top':\n        return {\n          left: ($anchorDims.offset.left + ($anchorDims.width / 2)) - ($eleDims.width / 2),\n          top: $anchorDims.offset.top - ($eleDims.height + vOffset)\n        };\n        break;\n      case 'center bottom':\n        return {\n          left: isOverflow ? hOffset : (($anchorDims.offset.left + ($anchorDims.width / 2)) - ($eleDims.width / 2)),\n          top: $anchorDims.offset.top + $anchorDims.height + vOffset\n        };\n        break;\n      case 'center left':\n        return {\n          left: $anchorDims.offset.left - ($eleDims.width + hOffset),\n          top: ($anchorDims.offset.top + ($anchorDims.height / 2)) - ($eleDims.height / 2)\n        };\n        break;\n      case 'center right':\n        return {\n          left: $anchorDims.offset.left + $anchorDims.width + hOffset + 1,\n          top: ($anchorDims.offset.top + ($anchorDims.height / 2)) - ($eleDims.height / 2)\n        };\n        break;\n      case 'center':\n        return {\n          left: ($eleDims.windowDims.offset.left + ($eleDims.windowDims.width / 2)) - ($eleDims.width / 2),\n          top: ($eleDims.windowDims.offset.top + ($eleDims.windowDims.height / 2)) - ($eleDims.height / 2)\n        };\n        break;\n      case 'reveal':\n        return {\n          left: ($eleDims.windowDims.width - $eleDims.width) / 2,\n          top: $eleDims.windowDims.offset.top + vOffset\n        };\n      case 'reveal full':\n        return {\n          left: $eleDims.windowDims.offset.left,\n          top: $eleDims.windowDims.offset.top,\n        };\n        break;\n      default:\n        return {\n          left: $anchorDims.offset.left,\n          top: $anchorDims.offset.top + $anchorDims.height + vOffset\n        };\n    }\n  };\n  Foundation.Box = {\n    ImNotTouchingYou: ImNotTouchingYou,\n    GetDimensions: GetDimensions,\n    GetOffsets: GetOffsets\n  };\n}(window.Foundation, window);\n\n/*******************************************\n *                                         *\n * This util was created by Marius Olbertz *\n * Please thank Marius on GitHub /owlbertz *\n * or the web http://www.mariusolbertz.de/ *\n *                                         *\n ******************************************/\n!function($, Foundation){\n  'use strict';\n  Foundation.Keyboard = {};\n\n  var keyCodes = {\n    9: 'TAB',\n    13: 'ENTER',\n    27: 'ESCAPE',\n    32: 'SPACE',\n    37: 'ARROW_LEFT',\n    38: 'ARROW_UP',\n    39: 'ARROW_RIGHT',\n    40: 'ARROW_DOWN'\n  };\n\n  // constants for easier comparing Can be used like Foundation.parseKey(event) === Foundation.keys.SPACE\n  var keys = (function(kcs) {\n    var k = {};\n    for (var kc in kcs) k[kcs[kc]] = kcs[kc];\n    return k;\n  })(keyCodes);\n\n  Foundation.Keyboard.keys = keys;\n\n  /**\n   * Parses the (keyboard) event and returns a String that represents its key\n   * Can be used like Foundation.parseKey(event) === Foundation.keys.SPACE\n   * @param {Event} event - the event generated by the event handler\n   * @return String key - String that represents the key pressed\n   */\n  var parseKey = function(event) {\n    var key = keyCodes[event.which || event.keyCode] || String.fromCharCode(event.which).toUpperCase();\n    if (event.shiftKey) key = 'SHIFT_' + key;\n    if (event.ctrlKey) key = 'CTRL_' + key;\n    if (event.altKey) key = 'ALT_' + key;\n    return key;\n  };\n  Foundation.Keyboard.parseKey = parseKey;\n\n\n  // plain commands per component go here, ltr and rtl are merged based on orientation\n  var commands = {};\n\n  /**\n   * Handles the given (keyboard) event\n   * @param {Event} event - the event generated by the event handler\n   * @param {Object} component - Foundation component, e.g. Slider or Reveal\n   * @param {Objects} functions - collection of functions that are to be executed\n   */\n  var handleKey = function(event, component, functions) {\n    var commandList = commands[Foundation.getFnName(component)],\n      keyCode = parseKey(event),\n      cmds,\n      command,\n      fn;\n    if (!commandList) return console.warn('Component not defined!');\n\n    if (typeof commandList.ltr === 'undefined') { // this component does not differentiate between ltr and rtl\n        cmds = commandList; // use plain list\n    } else { // merge ltr and rtl: if document is rtl, rtl overwrites ltr and vice versa\n        if (Foundation.rtl()) cmds = $.extend({}, commandList.ltr, commandList.rtl);\n\n        else cmds = $.extend({}, commandList.rtl, commandList.ltr);\n    }\n    command = cmds[keyCode];\n\n\n    fn = functions[command];\n    if (fn && typeof fn === 'function') { // execute function with context of the component if exists\n        fn.apply(component);\n        if (functions.handled || typeof functions.handled === 'function') { // execute function when event was handled\n            functions.handled.apply(component);\n        }\n    } else {\n        if (functions.unhandled || typeof functions.unhandled === 'function') { // execute function when event was not handled\n            functions.unhandled.apply(component);\n        }\n    }\n  };\n  Foundation.Keyboard.handleKey = handleKey;\n\n  /**\n   * Finds all focusable elements within the given `$element`\n   * @param {jQuery} $element - jQuery object to search within\n   * @return {jQuery} $focusable - all focusable elements within `$element`\n   */\n  var findFocusable = function($element) {\n    return $element.find('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]').filter(function() {\n      if (!$(this).is(':visible') || $(this).attr('tabindex') < 0) { return false; } //only have visible elements and those that have a tabindex greater or equal 0\n      return true;\n    });\n  };\n  Foundation.Keyboard.findFocusable = findFocusable;\n\n  /**\n   * Returns the component name name\n   * @param {Object} component - Foundation component, e.g. Slider or Reveal\n   * @return String componentName\n   */\n\n  var register = function(componentName, cmds) {\n    commands[componentName] = cmds;\n  };\n  Foundation.Keyboard.register = register;\n}(jQuery, window.Foundation);\n\n!function($, Foundation) {\n\n// Default set of media queries\nvar defaultQueries = {\n  'default' : 'only screen',\n  landscape : 'only screen and (orientation: landscape)',\n  portrait : 'only screen and (orientation: portrait)',\n  retina : 'only screen and (-webkit-min-device-pixel-ratio: 2),' +\n    'only screen and (min--moz-device-pixel-ratio: 2),' +\n    'only screen and (-o-min-device-pixel-ratio: 2/1),' +\n    'only screen and (min-device-pixel-ratio: 2),' +\n    'only screen and (min-resolution: 192dpi),' +\n    'only screen and (min-resolution: 2dppx)'\n};\n\nvar MediaQuery = {\n  queries: [],\n  current: '',\n\n  /**\n   * Checks if the screen is at least as wide as a breakpoint.\n   * @function\n   * @param {String} size - Name of the breakpoint to check.\n   * @returns {Boolean} `true` if the breakpoint matches, `false` if it's smaller.\n   */\n  atLeast: function(size) {\n    var query = this.get(size);\n\n    if (query) {\n      return window.matchMedia(query).matches;\n    }\n\n    return false;\n  },\n\n  /**\n   * Gets the media query of a breakpoint.\n   * @function\n   * @param {String} size - Name of the breakpoint to get.\n   * @returns {String|null} - The media query of the breakpoint, or `null` if the breakpoint doesn't exist.\n   */\n  get: function(size) {\n    for (var i in this.queries) {\n      var query = this.queries[i];\n      if (size === query.name) return query.value;\n    }\n\n    return null;\n  },\n\n  /**\n   * Initializes the media query helper, by extracting the breakpoint list from the CSS and activating the breakpoint watcher.\n   * @function\n   * @private\n   */\n  _init: function() {\n    var self = this;\n    var extractedStyles = $('.foundation-mq').css('font-family');\n    var namedQueries;\n\n    namedQueries = parseStyleToObject(extractedStyles);\n\n    for (var key in namedQueries) {\n      self.queries.push({\n        name: key,\n        value: 'only screen and (min-width: ' + namedQueries[key] + ')'\n      });\n    }\n\n    this.current = this._getCurrentSize();\n\n    this._watcher();\n\n    // Extend default queries\n    // namedQueries = $.extend(defaultQueries, namedQueries);\n  },\n\n  /**\n   * Gets the current breakpoint name by testing every breakpoint and returning the last one to match (the biggest one).\n   * @function\n   * @private\n   * @returns {String} Name of the current breakpoint.\n   */\n  _getCurrentSize: function() {\n    var matched;\n\n    for (var i in this.queries) {\n      var query = this.queries[i];\n\n      if (window.matchMedia(query.value).matches) {\n        matched = query;\n      }\n    }\n\n    if(typeof matched === 'object') {\n      return matched.name;\n    } else {\n      return matched;\n    }\n  },\n\n  /**\n   * Activates the breakpoint watcher, which fires an event on the window whenever the breakpoint changes.\n   * @function\n   * @private\n   */\n  _watcher: function() {\n    var _this = this;\n\n    $(window).on('resize.zf.mediaquery', function() {\n      var newSize = _this._getCurrentSize();\n\n      if (newSize !== _this.current) {\n        // Broadcast the media query change on the window\n        $(window).trigger('changed.zf.mediaquery', [newSize, _this.current]);\n\n        // Change the current media query\n        _this.current = newSize;\n      }\n    });\n  }\n};\n\nFoundation.MediaQuery = MediaQuery;\n\n// matchMedia() polyfill - Test a CSS media type/query in JS.\n// Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas, David Knight. Dual MIT/BSD license\nwindow.matchMedia || (window.matchMedia = function() {\n  'use strict';\n\n  // For browsers that support matchMedium api such as IE 9 and webkit\n  var styleMedia = (window.styleMedia || window.media);\n\n  // For those that don't support matchMedium\n  if (!styleMedia) {\n    var style   = document.createElement('style'),\n    script      = document.getElementsByTagName('script')[0],\n    info        = null;\n\n    style.type  = 'text/css';\n    style.id    = 'matchmediajs-test';\n\n    script.parentNode.insertBefore(style, script);\n\n    // 'style.currentStyle' is used by IE <= 8 and 'window.getComputedStyle' for all other browsers\n    info = ('getComputedStyle' in window) && window.getComputedStyle(style, null) || style.currentStyle;\n\n    styleMedia = {\n      matchMedium: function(media) {\n        var text = '@media ' + media + '{ #matchmediajs-test { width: 1px; } }';\n\n        // 'style.styleSheet' is used by IE <= 8 and 'style.textContent' for all other browsers\n        if (style.styleSheet) {\n          style.styleSheet.cssText = text;\n        } else {\n          style.textContent = text;\n        }\n\n        // Test if media query is true or false\n        return info.width === '1px';\n      }\n    };\n  }\n\n  return function(media) {\n    return {\n      matches: styleMedia.matchMedium(media || 'all'),\n      media: media || 'all'\n    };\n  };\n}());\n\n// Thank you: https://github.com/sindresorhus/query-string\nfunction parseStyleToObject(str) {\n  var styleObject = {};\n\n  if (typeof str !== 'string') {\n    return styleObject;\n  }\n\n  str = str.trim().slice(1, -1); // browsers re-quote string style values\n\n  if (!str) {\n    return styleObject;\n  }\n\n  styleObject = str.split('&').reduce(function(ret, param) {\n    var parts = param.replace(/\\+/g, ' ').split('=');\n    var key = parts[0];\n    var val = parts[1];\n    key = decodeURIComponent(key);\n\n    // missing `=` should be `null`:\n    // http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n    val = val === undefined ? null : decodeURIComponent(val);\n\n    if (!ret.hasOwnProperty(key)) {\n      ret[key] = val;\n    } else if (Array.isArray(ret[key])) {\n      ret[key].push(val);\n    } else {\n      ret[key] = [ret[key], val];\n    }\n    return ret;\n  }, {});\n\n  return styleObject;\n}\n\n}(jQuery, Foundation)\n\n/**\n * Motion module.\n * @module foundation.motion\n */\n!function($, Foundation) {\n\nvar initClasses   = ['mui-enter', 'mui-leave'];\nvar activeClasses = ['mui-enter-active', 'mui-leave-active'];\n\nfunction animate(isIn, element, animation, cb) {\n  element = $(element).eq(0);\n\n  if (!element.length) return;\n\n  var initClass = isIn ? initClasses[0] : initClasses[1];\n  var activeClass = isIn ? activeClasses[0] : activeClasses[1];\n\n  // Set up the animation\n  reset();\n  element.addClass(animation)\n         .css('transition', 'none');\n        //  .addClass(initClass);\n  // if(isIn) element.show();\n  requestAnimationFrame(function() {\n    element.addClass(initClass);\n    if (isIn) element.show();\n  });\n  // Start the animation\n  requestAnimationFrame(function() {\n    element[0].offsetWidth;\n    element.css('transition', '');\n    element.addClass(activeClass);\n  });\n  // Move(500, element, function(){\n  //   // element[0].offsetWidth;\n  //   element.css('transition', '');\n  //   element.addClass(activeClass);\n  // });\n\n  // Clean up the animation when it finishes\n  element.one(Foundation.transitionend(element), finish);//.one('finished.zf.animate', finish);\n\n  // Hides the element (for out animations), resets the element, and runs a callback\n  function finish() {\n    if (!isIn) element.hide();\n    reset();\n    if (cb) cb.apply(element);\n  }\n\n  // Resets transitions and removes motion-specific classes\n  function reset() {\n    element[0].style.transitionDuration = 0;\n    element.removeClass(initClass + ' ' + activeClass + ' ' + animation);\n  }\n}\n\nvar Motion = {\n  animateIn: function(element, animation, /*duration,*/ cb) {\n    animate(true, element, animation, cb);\n  },\n\n  animateOut: function(element, animation, /*duration,*/ cb) {\n    animate(false, element, animation, cb);\n  }\n};\n\nvar Move = function(duration, elem, fn){\n  var anim, prog, start = null;\n  // console.log('called');\n\n  function move(ts){\n    if(!start) start = window.performance.now();\n    // console.log(start, ts);\n    prog = ts - start;\n    fn.apply(elem);\n\n    if(prog < duration){ anim = window.requestAnimationFrame(move, elem); }\n    else{\n      window.cancelAnimationFrame(anim);\n      elem.trigger('finished.zf.animate', [elem]).triggerHandler('finished.zf.animate', [elem]);\n    }\n  }\n  anim = window.requestAnimationFrame(move);\n};\n\nFoundation.Move = Move;\nFoundation.Motion = Motion;\n\n}(jQuery, Foundation);\n\n!function($, Foundation){\n  'use strict';\n  Foundation.Nest = {\n    Feather: function(menu, type){\n      menu.attr('role', 'menubar');\n      type = type || 'zf';\n      var items = menu.find('li').attr({'role': 'menuitem'}),\n          subMenuClass = 'is-' + type + '-submenu',\n          subItemClass = subMenuClass + '-item',\n          hasSubClass = 'is-' + type + '-submenu-parent';\n\n      items.each(function(){\n        var $item = $(this),\n            $sub = $item.children('ul');\n        if($sub.length){\n          $item.addClass('has-submenu ' + hasSubClass);\n          $sub.addClass('submenu ' + subMenuClass).attr('data-submenu', '');\n        }\n        if($item.parent('[data-submenu]').length){\n          $item.addClass('is-submenu-item ' + subItemClass);\n        }\n      });\n      return;\n    },\n    Burn: function(menu, type){\n      var items = menu.find('li').removeAttr('tabindex'),\n          subMenuClass = 'is-' + type + '-submenu',\n          subItemClass = subMenuClass + '-item',\n          hasSubClass = 'is-' + type + '-submenu-parent';\n\n      // menu.find('.is-active').removeClass('is-active');\n      menu.find('*')\n      // menu.find('.' + subMenuClass + ', .' + subItemClass + ', .is-active, .has-submenu, .is-submenu-item, .submenu, [data-submenu]')\n          .removeClass(subMenuClass + ' ' + subItemClass + ' ' + hasSubClass + ' has-submenu is-submenu-item submenu is-active')\n          .removeAttr('data-submenu').css('display', '');\n\n      // console.log(      menu.find('.' + subMenuClass + ', .' + subItemClass + ', .has-submenu, .is-submenu-item, .submenu, [data-submenu]')\n      //           .removeClass(subMenuClass + ' ' + subItemClass + ' has-submenu is-submenu-item submenu')\n      //           .removeAttr('data-submenu'));\n      // items.each(function(){\n      //   var $item = $(this),\n      //       $sub = $item.children('ul');\n      //   if($item.parent('[data-submenu]').length){\n      //     $item.removeClass('is-submenu-item ' + subItemClass);\n      //   }\n      //   if($sub.length){\n      //     $item.removeClass('has-submenu');\n      //     $sub.removeClass('submenu ' + subMenuClass).removeAttr('data-submenu');\n      //   }\n      // });\n    }\n  };\n}(jQuery, window.Foundation);\n\n!function($, Foundation){\n  'use strict';\n  var Timer = function(elem, options, cb){\n    var _this = this,\n        duration = options.duration,//options is an object for easily adding features later.\n        nameSpace = Object.keys(elem.data())[0] || 'timer',\n        remain = -1,\n        start,\n        timer;\n\n    this.restart = function(){\n      remain = -1;\n      clearTimeout(timer);\n      this.start();\n    };\n\n    this.start = function(){\n      // if(!elem.data('paused')){ return false; }//maybe implement this sanity check if used for other things.\n      clearTimeout(timer);\n      remain = remain <= 0 ? duration : remain;\n      elem.data('paused', false);\n      start = Date.now();\n      timer = setTimeout(function(){\n        if(options.infinite){\n          _this.restart();//rerun the timer.\n        }\n        cb();\n      }, remain);\n      elem.trigger('timerstart.zf.' + nameSpace);\n    };\n\n    this.pause = function(){\n      //if(elem.data('paused')){ return false; }//maybe implement this sanity check if used for other things.\n      clearTimeout(timer);\n      elem.data('paused', true);\n      var end = Date.now();\n      remain = remain - (end - start);\n      elem.trigger('timerpaused.zf.' + nameSpace);\n    };\n  };\n  /**\n   * Runs a callback function when images are fully loaded.\n   * @param {Object} images - Image(s) to check if loaded.\n   * @param {Func} callback - Function to execute when image is fully loaded.\n   */\n  var onImagesLoaded = function(images, callback){\n    var self = this,\n        unloaded = images.length;\n\n    if (unloaded === 0) {\n      callback();\n    }\n\n    var singleImageLoaded = function() {\n      unloaded--;\n      if (unloaded === 0) {\n        callback();\n      }\n    };\n\n    images.each(function() {\n      if (this.complete) {\n        singleImageLoaded();\n      }\n      else if (typeof this.naturalWidth !== 'undefined' && this.naturalWidth > 0) {\n        singleImageLoaded();\n      }\n      else {\n        $(this).one('load', function() {\n          singleImageLoaded();\n        });\n      }\n    });\n  };\n\n  Foundation.Timer = Timer;\n  Foundation.onImagesLoaded = onImagesLoaded;\n}(jQuery, window.Foundation);\n\n//**************************************************\n//**Work inspired by multiple jquery swipe plugins**\n//**Done by Yohai Ararat ***************************\n//**************************************************\n(function($) {\n\n  $.spotSwipe = {\n    version: '1.0.0',\n    enabled: 'ontouchstart' in document.documentElement,\n    preventDefault: true,\n    moveThreshold: 75,\n    timeThreshold: 200\n  };\n\n  var   startPosX,\n        startPosY,\n        startTime,\n        elapsedTime,\n        isMoving = false;\n\n  function onTouchEnd() {\n    //  alert(this);\n    this.removeEventListener('touchmove', onTouchMove);\n    this.removeEventListener('touchend', onTouchEnd);\n    isMoving = false;\n  }\n\n  function onTouchMove(e) {\n    if ($.spotSwipe.preventDefault) { e.preventDefault(); }\n    if(isMoving) {\n      var x = e.touches[0].pageX;\n      var y = e.touches[0].pageY;\n      var dx = startPosX - x;\n      var dy = startPosY - y;\n      var dir;\n      elapsedTime = new Date().getTime() - startTime;\n      if(Math.abs(dx) >= $.spotSwipe.moveThreshold && elapsedTime <= $.spotSwipe.timeThreshold) {\n        dir = dx > 0 ? 'left' : 'right';\n      }\n      else if(Math.abs(dy) >= $.spotSwipe.moveThreshold && elapsedTime <= $.spotSwipe.timeThreshold) {\n        dir = dy > 0 ? 'down' : 'up';\n      }\n      if(dir) {\n        onTouchEnd.call(this);\n        $(this).trigger('swipe', dir).trigger('swipe' + dir);\n      }\n    }\n  }\n\n  function onTouchStart(e) {\n    if (e.touches.length == 1) {\n      startPosX = e.touches[0].pageX;\n      startPosY = e.touches[0].pageY;\n      isMoving = true;\n      startTime = new Date().getTime();\n      this.addEventListener('touchmove', onTouchMove, false);\n      this.addEventListener('touchend', onTouchEnd, false);\n    }\n  }\n\n  function init() {\n    this.addEventListener && this.addEventListener('touchstart', onTouchStart, false);\n  }\n\n  function teardown() {\n    this.removeEventListener('touchstart', onTouchStart);\n  }\n\n  $.event.special.swipe = { setup: init };\n\n  $.each(['left', 'up', 'down', 'right'], function () {\n    $.event.special['swipe' + this] = { setup: function(){\n      $(this).on('swipe', $.noop);\n    } };\n  });\n})(jQuery);\n/****************************************************\n * Method for adding psuedo drag events to elements *\n ***************************************************/\n!function($){\n  $.fn.addTouch = function(){\n    this.each(function(i,el){\n      $(el).bind('touchstart touchmove touchend touchcancel',function(){\n        //we pass the original event object because the jQuery event\n        //object is normalized to w3c specs and does not provide the TouchList\n        handleTouch(event);\n      });\n    });\n\n    var handleTouch = function(event){\n      var touches = event.changedTouches,\n          first = touches[0],\n          eventTypes = {\n            touchstart: 'mousedown',\n            touchmove: 'mousemove',\n            touchend: 'mouseup'\n          },\n          type = eventTypes[event.type];\n\n      var simulatedEvent = document.createEvent('MouseEvent');\n      simulatedEvent.initMouseEvent(type, true, true, window, 1, first.screenX, first.screenY, first.clientX, first.clientY, false, false, false, false, 0/*left*/, null);\n      first.target.dispatchEvent(simulatedEvent);\n    };\n  };\n}(jQuery);\n\n\n//**********************************\n//**From the jQuery Mobile Library**\n//**need to recreate functionality**\n//**and try to improve if possible**\n//**********************************\n\n/* Removing the jQuery function ****\n************************************\n\n(function( $, window, undefined ) {\n\n\tvar $document = $( document ),\n\t\t// supportTouch = $.mobile.support.touch,\n\t\ttouchStartEvent = 'touchstart'//supportTouch ? \"touchstart\" : \"mousedown\",\n\t\ttouchStopEvent = 'touchend'//supportTouch ? \"touchend\" : \"mouseup\",\n\t\ttouchMoveEvent = 'touchmove'//supportTouch ? \"touchmove\" : \"mousemove\";\n\n\t// setup new event shortcuts\n\t$.each( ( \"touchstart touchmove touchend \" +\n\t\t\"swipe swipeleft swiperight\" ).split( \" \" ), function( i, name ) {\n\n\t\t$.fn[ name ] = function( fn ) {\n\t\t\treturn fn ? this.bind( name, fn ) : this.trigger( name );\n\t\t};\n\n\t\t// jQuery < 1.8\n\t\tif ( $.attrFn ) {\n\t\t\t$.attrFn[ name ] = true;\n\t\t}\n\t});\n\n\tfunction triggerCustomEvent( obj, eventType, event, bubble ) {\n\t\tvar originalType = event.type;\n\t\tevent.type = eventType;\n\t\tif ( bubble ) {\n\t\t\t$.event.trigger( event, undefined, obj );\n\t\t} else {\n\t\t\t$.event.dispatch.call( obj, event );\n\t\t}\n\t\tevent.type = originalType;\n\t}\n\n\t// also handles taphold\n\n\t// Also handles swipeleft, swiperight\n\t$.event.special.swipe = {\n\n\t\t// More than this horizontal displacement, and we will suppress scrolling.\n\t\tscrollSupressionThreshold: 30,\n\n\t\t// More time than this, and it isn't a swipe.\n\t\tdurationThreshold: 1000,\n\n\t\t// Swipe horizontal displacement must be more than this.\n\t\thorizontalDistanceThreshold: window.devicePixelRatio >= 2 ? 15 : 30,\n\n\t\t// Swipe vertical displacement must be less than this.\n\t\tverticalDistanceThreshold: window.devicePixelRatio >= 2 ? 15 : 30,\n\n\t\tgetLocation: function ( event ) {\n\t\t\tvar winPageX = window.pageXOffset,\n\t\t\t\twinPageY = window.pageYOffset,\n\t\t\t\tx = event.clientX,\n\t\t\t\ty = event.clientY;\n\n\t\t\tif ( event.pageY === 0 && Math.floor( y ) > Math.floor( event.pageY ) ||\n\t\t\t\tevent.pageX === 0 && Math.floor( x ) > Math.floor( event.pageX ) ) {\n\n\t\t\t\t// iOS4 clientX/clientY have the value that should have been\n\t\t\t\t// in pageX/pageY. While pageX/page/ have the value 0\n\t\t\t\tx = x - winPageX;\n\t\t\t\ty = y - winPageY;\n\t\t\t} else if ( y < ( event.pageY - winPageY) || x < ( event.pageX - winPageX ) ) {\n\n\t\t\t\t// Some Android browsers have totally bogus values for clientX/Y\n\t\t\t\t// when scrolling/zooming a page. Detectable since clientX/clientY\n\t\t\t\t// should never be smaller than pageX/pageY minus page scroll\n\t\t\t\tx = event.pageX - winPageX;\n\t\t\t\ty = event.pageY - winPageY;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tx: x,\n\t\t\t\ty: y\n\t\t\t};\n\t\t},\n\n\t\tstart: function( event ) {\n\t\t\tvar data = event.originalEvent.touches ?\n\t\t\t\t\tevent.originalEvent.touches[ 0 ] : event,\n\t\t\t\tlocation = $.event.special.swipe.getLocation( data );\n\t\t\treturn {\n\t\t\t\t\t\ttime: ( new Date() ).getTime(),\n\t\t\t\t\t\tcoords: [ location.x, location.y ],\n\t\t\t\t\t\torigin: $( event.target )\n\t\t\t\t\t};\n\t\t},\n\n\t\tstop: function( event ) {\n\t\t\tvar data = event.originalEvent.touches ?\n\t\t\t\t\tevent.originalEvent.touches[ 0 ] : event,\n\t\t\t\tlocation = $.event.special.swipe.getLocation( data );\n\t\t\treturn {\n\t\t\t\t\t\ttime: ( new Date() ).getTime(),\n\t\t\t\t\t\tcoords: [ location.x, location.y ]\n\t\t\t\t\t};\n\t\t},\n\n\t\thandleSwipe: function( start, stop, thisObject, origTarget ) {\n\t\t\tif ( stop.time - start.time < $.event.special.swipe.durationThreshold &&\n\t\t\t\tMath.abs( start.coords[ 0 ] - stop.coords[ 0 ] ) > $.event.special.swipe.horizontalDistanceThreshold &&\n\t\t\t\tMath.abs( start.coords[ 1 ] - stop.coords[ 1 ] ) < $.event.special.swipe.verticalDistanceThreshold ) {\n\t\t\t\tvar direction = start.coords[0] > stop.coords[ 0 ] ? \"swipeleft\" : \"swiperight\";\n\n\t\t\t\ttriggerCustomEvent( thisObject, \"swipe\", $.Event( \"swipe\", { target: origTarget, swipestart: start, swipestop: stop }), true );\n\t\t\t\ttriggerCustomEvent( thisObject, direction,$.Event( direction, { target: origTarget, swipestart: start, swipestop: stop } ), true );\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\n\t\t},\n\n\t\t// This serves as a flag to ensure that at most one swipe event event is\n\t\t// in work at any given time\n\t\teventInProgress: false,\n\n\t\tsetup: function() {\n\t\t\tvar events,\n\t\t\t\tthisObject = this,\n\t\t\t\t$this = $( thisObject ),\n\t\t\t\tcontext = {};\n\n\t\t\t// Retrieve the events data for this element and add the swipe context\n\t\t\tevents = $.data( this, \"mobile-events\" );\n\t\t\tif ( !events ) {\n\t\t\t\tevents = { length: 0 };\n\t\t\t\t$.data( this, \"mobile-events\", events );\n\t\t\t}\n\t\t\tevents.length++;\n\t\t\tevents.swipe = context;\n\n\t\t\tcontext.start = function( event ) {\n\n\t\t\t\t// Bail if we're already working on a swipe event\n\t\t\t\tif ( $.event.special.swipe.eventInProgress ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t$.event.special.swipe.eventInProgress = true;\n\n\t\t\t\tvar stop,\n\t\t\t\t\tstart = $.event.special.swipe.start( event ),\n\t\t\t\t\torigTarget = event.target,\n\t\t\t\t\temitted = false;\n\n\t\t\t\tcontext.move = function( event ) {\n\t\t\t\t\tif ( !start || event.isDefaultPrevented() ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tstop = $.event.special.swipe.stop( event );\n\t\t\t\t\tif ( !emitted ) {\n\t\t\t\t\t\temitted = $.event.special.swipe.handleSwipe( start, stop, thisObject, origTarget );\n\t\t\t\t\t\tif ( emitted ) {\n\n\t\t\t\t\t\t\t// Reset the context to make way for the next swipe event\n\t\t\t\t\t\t\t$.event.special.swipe.eventInProgress = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// prevent scrolling\n\t\t\t\t\tif ( Math.abs( start.coords[ 0 ] - stop.coords[ 0 ] ) > $.event.special.swipe.scrollSupressionThreshold ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tcontext.stop = function() {\n\t\t\t\t\t\temitted = true;\n\n\t\t\t\t\t\t// Reset the context to make way for the next swipe event\n\t\t\t\t\t\t$.event.special.swipe.eventInProgress = false;\n\t\t\t\t\t\t$document.off( touchMoveEvent, context.move );\n\t\t\t\t\t\tcontext.move = null;\n\t\t\t\t};\n\n\t\t\t\t$document.on( touchMoveEvent, context.move )\n\t\t\t\t\t.one( touchStopEvent, context.stop );\n\t\t\t};\n\t\t\t$this.on( touchStartEvent, context.start );\n\t\t},\n\n\t\tteardown: function() {\n\t\t\tvar events, context;\n\n\t\t\tevents = $.data( this, \"mobile-events\" );\n\t\t\tif ( events ) {\n\t\t\t\tcontext = events.swipe;\n\t\t\t\tdelete events.swipe;\n\t\t\t\tevents.length--;\n\t\t\t\tif ( events.length === 0 ) {\n\t\t\t\t\t$.removeData( this, \"mobile-events\" );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( context ) {\n\t\t\t\tif ( context.start ) {\n\t\t\t\t\t$( this ).off( touchStartEvent, context.start );\n\t\t\t\t}\n\t\t\t\tif ( context.move ) {\n\t\t\t\t\t$document.off( touchMoveEvent, context.move );\n\t\t\t\t}\n\t\t\t\tif ( context.stop ) {\n\t\t\t\t\t$document.off( touchStopEvent, context.stop );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t$.each({\n\t\tswipeleft: \"swipe.left\",\n\t\tswiperight: \"swipe.right\"\n\t}, function( event, sourceEvent ) {\n\n\t\t$.event.special[ event ] = {\n\t\t\tsetup: function() {\n\t\t\t\t$( this ).bind( sourceEvent, $.noop );\n\t\t\t},\n\t\t\tteardown: function() {\n\t\t\t\t$( this ).unbind( sourceEvent );\n\t\t\t}\n\t\t};\n\t});\n})( jQuery, this );\n*/\n\n!function(Foundation, $) {\n  'use strict';\n  // Elements with [data-open] will reveal a plugin that supports it when clicked.\n  $(document).on('click.zf.trigger', '[data-open]', function() {\n    var id = $(this).data('open');\n    $('#' + id).triggerHandler('open.zf.trigger', [$(this)]);\n  });\n\n  // Elements with [data-close] will close a plugin that supports it when clicked.\n  // If used without a value on [data-close], the event will bubble, allowing it to close a parent component.\n  $(document).on('click.zf.trigger', '[data-close]', function() {\n    var id = $(this).data('close');\n    if (id) {\n      $('#' + id).triggerHandler('close.zf.trigger', [$(this)]);\n    }\n    else {\n      $(this).trigger('close.zf.trigger');\n    }\n  });\n\n  // Elements with [data-toggle] will toggle a plugin that supports it when clicked.\n  $(document).on('click.zf.trigger', '[data-toggle]', function() {\n    var id = $(this).data('toggle');\n    $('#' + id).triggerHandler('toggle.zf.trigger', [$(this)]);\n  });\n\n  // Elements with [data-closable] will respond to close.zf.trigger events.\n  $(document).on('close.zf.trigger', '[data-closable]', function() {\n    var animation = $(this).data('closable') || 'fade-out';\n    if(Foundation.Motion){\n      Foundation.Motion.animateOut($(this), animation, function() {\n        $(this).trigger('closed.zf');\n      });\n    }else{\n      $(this).fadeOut().trigger('closed.zf');\n    }\n  });\n\n  var MutationObserver = (function () {\n    var prefixes = ['WebKit', 'Moz', 'O', 'Ms', ''];\n    for (var i=0; i < prefixes.length; i++) {\n      if (prefixes[i] + 'MutationObserver' in window) {\n        return window[prefixes[i] + 'MutationObserver'];\n      }\n    }\n    return false;\n  }());\n\n\n  var checkListeners = function(){\n    eventsListener();\n    resizeListener();\n    scrollListener();\n    closemeListener();\n  };\n  /**\n  * Fires once after all other scripts have loaded\n  * @function\n  * @private\n  */\n  $(window).load(function(){\n    checkListeners();\n  });\n\n  //******** only fires this function once on load, if there's something to watch ********\n  var closemeListener = function(pluginName){\n    var yetiBoxes = $('[data-yeti-box]'),\n        plugNames = ['dropdown', 'tooltip', 'reveal'];\n\n    if(pluginName){\n      if(typeof pluginName === 'string'){\n        plugNames.push(pluginName);\n      }else if(typeof pluginName === 'object' && typeof pluginName[0] === 'string'){\n        plugNames.concat(pluginName);\n      }else{\n        console.error('Plugin names must be strings');\n      }\n    }\n    if(yetiBoxes.length){\n      var listeners = plugNames.map(function(name){\n        return 'closeme.zf.' + name;\n      }).join(' ');\n\n      $(window).off(listeners).on(listeners, function(e, pluginId){\n        var plugin = e.namespace.split('.')[0];\n        var plugins = $('[data-' + plugin + ']').not('[data-yeti-box=\"' + pluginId + '\"]');\n\n        plugins.each(function(){\n          var _this = $(this);\n\n          _this.triggerHandler('close.zf.trigger', [_this]);\n        });\n      });\n    }\n  };\n  var resizeListener = function(debounce){\n    var timer,\n        $nodes = $('[data-resize]');\n    if($nodes.length){\n      $(window).off('resize.zf.trigger')\n      .on('resize.zf.trigger', function(e) {\n        if (timer) { clearTimeout(timer); }\n\n        timer = setTimeout(function(){\n\n          if(!MutationObserver){//fallback for IE 9\n            $nodes.each(function(){\n              $(this).triggerHandler('resizeme.zf.trigger');\n            });\n          }\n          //trigger all listening elements and signal a resize event\n          $nodes.attr('data-events', \"resize\");\n        }, debounce || 10);//default time to emit resize event\n      });\n    }\n  };\n  var scrollListener = function(debounce){\n    var timer,\n        $nodes = $('[data-scroll]');\n    if($nodes.length){\n      $(window).off('scroll.zf.trigger')\n      .on('scroll.zf.trigger', function(e){\n        if(timer){ clearTimeout(timer); }\n\n        timer = setTimeout(function(){\n\n          if(!MutationObserver){//fallback for IE 9\n            $nodes.each(function(){\n              $(this).triggerHandler('scrollme.zf.trigger');\n            });\n          }\n          //trigger all listening elements and signal a scroll event\n          $nodes.attr('data-events', \"scroll\");\n        }, debounce || 10);//default time to emit scroll event\n      });\n    }\n  };\n  // function domMutationObserver(debounce) {\n  //   // !!! This is coming soon and needs more work; not active  !!! //\n  //   var timer,\n  //   nodes = document.querySelectorAll('[data-mutate]');\n  //   //\n  //   if (nodes.length) {\n  //     // var MutationObserver = (function () {\n  //     //   var prefixes = ['WebKit', 'Moz', 'O', 'Ms', ''];\n  //     //   for (var i=0; i < prefixes.length; i++) {\n  //     //     if (prefixes[i] + 'MutationObserver' in window) {\n  //     //       return window[prefixes[i] + 'MutationObserver'];\n  //     //     }\n  //     //   }\n  //     //   return false;\n  //     // }());\n  //\n  //\n  //     //for the body, we need to listen for all changes effecting the style and class attributes\n  //     var bodyObserver = new MutationObserver(bodyMutation);\n  //     bodyObserver.observe(document.body, { attributes: true, childList: true, characterData: false, subtree:true, attributeFilter:[\"style\", \"class\"]});\n  //\n  //\n  //     //body callback\n  //     function bodyMutation(mutate) {\n  //       //trigger all listening elements and signal a mutation event\n  //       if (timer) { clearTimeout(timer); }\n  //\n  //       timer = setTimeout(function() {\n  //         bodyObserver.disconnect();\n  //         $('[data-mutate]').attr('data-events',\"mutate\");\n  //       }, debounce || 150);\n  //     }\n  //   }\n  // }\n  var eventsListener = function() {\n    if(!MutationObserver){ return false; }\n    var nodes = document.querySelectorAll('[data-resize], [data-scroll], [data-mutate]');\n\n    //element callback\n    var listeningElementsMutation = function(mutationRecordsList) {\n      var $target = $(mutationRecordsList[0].target);\n      //trigger the event handler for the element depending on type\n      switch ($target.attr(\"data-events\")) {\n\n        case \"resize\" :\n        $target.triggerHandler('resizeme.zf.trigger', [$target]);\n        break;\n\n        case \"scroll\" :\n        $target.triggerHandler('scrollme.zf.trigger', [$target, window.pageYOffset]);\n        break;\n\n        // case \"mutate\" :\n        // console.log('mutate', $target);\n        // $target.triggerHandler('mutate.zf.trigger');\n        //\n        // //make sure we don't get stuck in an infinite loop from sloppy codeing\n        // if ($target.index('[data-mutate]') == $(\"[data-mutate]\").length-1) {\n        //   domMutationObserver();\n        // }\n        // break;\n\n        default :\n        return false;\n        //nothing\n      }\n    }\n\n    if(nodes.length){\n      //for each element that needs to listen for resizing, scrolling, (or coming soon mutation) add a single observer\n      for (var i = 0; i <= nodes.length-1; i++) {\n        var elementObserver = new MutationObserver(listeningElementsMutation);\n        elementObserver.observe(nodes[i], { attributes: true, childList: false, characterData: false, subtree:false, attributeFilter:[\"data-events\"]});\n      }\n    }\n  };\n  // ------------------------------------\n\n  // [PH]\n  // Foundation.CheckWatchers = checkWatchers;\n  Foundation.IHearYou = checkListeners;\n  // Foundation.ISeeYou = scrollListener;\n  // Foundation.IFeelYou = closemeListener;\n\n}(window.Foundation, window.jQuery);\n\n!function(Foundation, $) {\n  'use strict';\n\n  /**\n   * Creates a new instance of Abide.\n   * @class\n   * @fires Abide#init\n   * @param {Object} element - jQuery object to add the trigger to.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n  function Abide(element, options) {\n    this.$element = element;\n    this.options  = $.extend({}, Abide.defaults, this.$element.data(), options);\n    this.$window  = $(window);\n    this.name     = 'Abide';\n    this.attr     = 'data-abide';\n\n    this._init();\n    this._events();\n\n    Foundation.registerPlugin(this);\n  }\n\n  /**\n   * Default settings for plugin\n   */\n  Abide.defaults = {\n    validateOn: 'fieldChange', // options: fieldChange, manual, submit\n    labelErrorClass: 'is-invalid-label',\n    inputErrorClass: 'is-invalid-input',\n    formErrorSelector: '.form-error',\n    formErrorClass: 'is-visible',\n    patterns: {\n      alpha : /^[a-zA-Z]+$/,\n      alpha_numeric : /^[a-zA-Z0-9]+$/,\n      integer : /^[-+]?\\d+$/,\n      number : /^[-+]?\\d*(?:[\\.\\,]\\d+)?$/,\n\n      // amex, visa, diners\n      card : /^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\\d{3})\\d{11})$/,\n      cvv : /^([0-9]){3,4}$/,\n\n      // http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#valid-e-mail-address\n      email : /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/,\n\n      url : /^(https?|ftp|file|ssh):\\/\\/(((([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-zA-Z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-zA-Z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-zA-Z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(\\#((([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/,\n      // abc.de\n      domain : /^([a-zA-Z0-9]([a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,8}$/,\n\n      datetime : /^([0-2][0-9]{3})\\-([0-1][0-9])\\-([0-3][0-9])T([0-5][0-9])\\:([0-5][0-9])\\:([0-5][0-9])(Z|([\\-\\+]([0-1][0-9])\\:00))$/,\n      // YYYY-MM-DD\n      date : /(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,\n      // HH:MM:SS\n      time : /^(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,\n      dateISO : /^\\d{4}[\\/\\-]\\d{1,2}[\\/\\-]\\d{1,2}$/,\n      // MM/DD/YYYY\n      month_day_year : /^(0[1-9]|1[012])[- \\/.](0[1-9]|[12][0-9]|3[01])[- \\/.]\\d{4}$/,\n      // DD/MM/YYYY\n      day_month_year : /^(0[1-9]|[12][0-9]|3[01])[- \\/.](0[1-9]|1[012])[- \\/.]\\d{4}$/,\n\n      // #FFF or #FFFFFF\n      color : /^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/\n    },\n    validators: {\n      equalTo: function (el, required, parent) {\n        var from  = document.getElementById(el.getAttribute(this.add_namespace('data-equalto'))).value,\n            to    = el.value,\n            valid = (from === to);\n\n        return valid;\n      }\n    }\n  };\n\n\n  /**\n   * Initializes the Abide plugin and calls functions to get Abide functioning on load.\n   * @private\n   */\n  Abide.prototype._init = function() {\n  };\n\n  /**\n   * Initializes events for Abide.\n   * @private\n   */\n  Abide.prototype._events = function() {\n    var self = this;\n    this.$element\n      .off('.abide')\n      .on('reset.fndtn.abide', function(e) {\n        self.resetForm($(this));\n      })\n      .on('submit.fndtn.abide', function(e) {\n        e.preventDefault();\n        self.validateForm(self.$element);\n      })\n      .find('input, textarea, select')\n        .off('.abide')\n        .on('blur.fndtn.abide change.fndtn.abide', function (e) {\n          if (self.options.validateOn === 'fieldChange') {\n            self.validateInput($(e.target), self.$element);\n          }\n          // self.validateForm(self.$element);\n        })\n        .on('keydown.fndtn.abide', function (e) {\n          // if (settings.live_validate === true && e.which != 9) {\n          //   clearTimeout(self.timer);\n          //   self.timer = setTimeout(function () {\n          //     self.validate([this], e);\n          //   }.bind(this), settings.timeout);\n          // }\n          // self.validateForm(self.$element);\n        });\n\n  },\n  /**\n   * Calls necessary functions to update Abide upon DOM change\n   * @private\n   */\n  Abide.prototype._reflow = function() {\n    var self = this;\n  };\n  /**\n   * Checks whether or not a form element has the required attribute and if it's checked or not\n   * @param {Object} element - jQuery object to check for required attribute\n   * @returns {Boolean} Boolean value depends on whether or not attribute is checked or empty\n   */\n  Abide.prototype.requiredCheck = function($el) {\n    switch ($el[0].type) {\n      case 'text':\n        if ($el.attr('required') && !$el.val()) {\n          // requirement check does not pass\n          return false;\n        } else {\n          return true;\n        }\n        break;\n      case 'checkbox':\n        if ($el.attr('required') && !$el.is(':checked')) {\n          return false;\n        } else {\n          return true;\n        }\n        break;\n      case 'radio':\n        if ($el.attr('required') && !$el.is(':checked')) {\n          return false;\n        } else {\n          return true;\n        }\n        break;\n      default:\n        if ($el.attr('required') && (!$el.val() || !$el.val().length || $el.is(':empty'))) {\n          return false;\n        } else {\n          return true;\n        }\n    }\n  };\n  /**\n   * Checks whether or not a form element has the required attribute and if it's checked or not\n   * @param {Object} element - jQuery object to check for required attribute\n   * @returns {Boolean} Boolean value depends on whether or not attribute is checked or empty\n   */\n  Abide.prototype.findLabel = function($el) {\n    if ($el.next('label').length) {\n      return $el.next('label');\n    }\n    else {\n      return $el.closest('label');\n    }\n  };\n  /**\n   * Adds the CSS error class as specified by the Abide settings to the label, input, and the form\n   * @param {Object} element - jQuery object to add the class to\n   */\n  Abide.prototype.addErrorClasses = function($el) {\n    var self = this,\n        $label = self.findLabel($el),\n        $formError = $el.next(self.options.formErrorSelector) || $el.find(self.options.formErrorSelector);\n\n    // label\n    if ($label) {\n      $label.addClass(self.options.labelErrorClass);\n    }\n    // form error\n    if ($formError) {\n      $formError.addClass(self.options.formErrorClass);\n    }\n    // input\n    $el.addClass(self.options.inputErrorClass);\n  };\n  /**\n   * Removes CSS error class as specified by the Abide settings from the label, input, and the form\n   * @param {Object} element - jQuery object to remove the class from\n   */\n  Abide.prototype.removeErrorClasses = function($el) {\n    var self = this,\n        $label = self.findLabel($el),\n        $formError = $el.next(self.options.formErrorSelector) || $el.find(self.options.formErrorSelector);\n    // label\n    if ($label && $label.hasClass(self.options.labelErrorClass)) {\n      $label.removeClass(self.options.labelErrorClass);\n    }\n    // form error\n    if ($formError && $formError.hasClass(self.options.formErrorClass)) {\n      $formError.removeClass(self.options.formErrorClass);\n    }\n    // input\n    if ($el.hasClass(self.options.inputErrorClass)) {\n      $el.removeClass(self.options.inputErrorClass);\n    }\n  };\n  /**\n   * Goes through a form to find inputs and proceeds to validate them in ways specific to their type\n   * @fires Abide#invalid\n   * @fires Abide#valid\n   * @param {Object} element - jQuery object to validate, should be an HTML input\n   * @param {Object} form - jQuery object of the entire form to find the various input elements\n   */\n  Abide.prototype.validateInput = function($el, $form) {\n    var self = this,\n        textInput = $form.find('input[type=\"text\"]'),\n        checkInput = $form.find('input[type=\"checkbox\"]'),\n        label,\n        radioGroupName;\n\n    if ($el[0].type === 'text') {\n      if (!self.requiredCheck($el) || !self.validateText($el)) {\n        self.addErrorClasses($el);\n        $el.trigger('invalid.fndtn.abide', $el[0]);\n      }\n      else {\n        self.removeErrorClasses($el);\n        $el.trigger('valid.fndtn.abide', $el[0]);\n      }\n    }\n    else if ($el[0].type === 'radio') {\n      radioGroupName = $el.attr('name');\n      label = $el.siblings('label');\n\n      if (self.validateRadio(radioGroupName)) {\n        $(label).each(function() {\n          if ($(this).hasClass(self.options.labelErrorClass)) {\n            $(this).removeClass(self.options.labelErrorClass);\n          }\n        });\n        $el.trigger('valid.fndtn.abide', $el[0]);\n      }\n      else {\n        $(label).each(function() {\n          $(this).addClass(self.options.labelErrorClass);\n        });\n        $el.trigger('invalid.fndtn.abide', $el[0]);\n      };\n    }\n    else if ($el[0].type === 'checkbox') {\n      if (!self.requiredCheck($el)) {\n        self.addErrorClasses($el);\n        $el.trigger('invalid.fndtn.abide', $el[0]);\n      }\n      else {\n        self.removeErrorClasses($el);\n        $el.trigger('valid.fndtn.abide', $el[0]);\n      }\n    }\n    else {\n      if (!self.requiredCheck($el) || !self.validateText($el)) {\n        self.addErrorClasses($el);\n        $el.trigger('invalid.fndtn.abide', $el[0]);\n      }\n      else {\n        self.removeErrorClasses($el);\n        $el.trigger('valid.fndtn.abide', $el[0]);\n      }\n    }\n  };\n  /**\n   * Goes through a form and if there are any invalid inputs, it will display the form error element\n   * @param {Object} element - jQuery object to validate, should be a form HTML element\n   */\n  Abide.prototype.validateForm = function($form) {\n    var self = this,\n        inputs = $form.find('input'),\n        inputCount = $form.find('input').length,\n        counter = 0;\n\n    while (counter < inputCount) {\n      self.validateInput($(inputs[counter]), $form);\n      counter++;\n    }\n\n    // what are all the things that can go wrong with a form?\n    if ($form.find('.form-error.is-visible').length || $form.find('.is-invalid-label').length) {\n      $form.find('[data-abide-error]').css('display', 'block');\n    }\n    else {\n      $form.find('[data-abide-error]').css('display', 'none');\n    }\n  };\n  /**\n   * Determines whether or a not a text input is valid based on the patterns specified in the attribute\n   * @param {Object} element - jQuery object to validate, should be a text input HTML element\n   * @returns {Boolean} Boolean value depends on whether or not the input value matches the pattern specified\n   */\n  Abide.prototype.validateText = function($el) {\n    var self = this,\n        valid = false,\n        patternLib = this.options.patterns,\n        inputText = $($el).val(),\n        // maybe have a different way of parsing this bc people might use type\n        pattern = $($el).attr('pattern');\n\n    // if there's no value, then return true\n    // since required check has already been done\n    if (inputText.length === 0) {\n      return true;\n    }\n    else {\n      if (inputText.match(patternLib[pattern])) {\n        return true;\n      }\n      else {\n        return false;\n      }\n    }\n  };\n  /**\n   * Determines whether or a not a radio input is valid based on whether or not it is required and selected\n   * @param {String} group - A string that specifies the name of a radio button group\n   * @returns {Boolean} Boolean value depends on whether or not at least one radio input has been selected (if it's required)\n   */\n  Abide.prototype.validateRadio = function(group) {\n    var self = this,\n        labels = $(':radio[name=\"' + group + '\"]').siblings('label'),\n        counter = 0;\n    // go through each radio button\n    $(':radio[name=\"' + group + '\"]').each(function() {\n      // put them through the required checkpoint\n      if (!self.requiredCheck($(this))) {\n        // if at least one doesn't pass, add a tally to the counter\n        counter++;\n      }\n      // if at least one is checked\n      // reset the counter\n      if ($(this).is(':checked')) {\n        counter = 0;\n      }\n    });\n\n    if (counter > 0) {\n      return false;\n    }\n    else {\n      return true;\n    }\n  };\n  Abide.prototype.matchValidation = function(val, validation) {\n\n  };\n  /**\n   * Resets form inputs and styles\n   * @param {Object} $form - A jQuery object that should be an HTML form element\n   */\n  Abide.prototype.resetForm = function($form) {\n    var self = this;\n    var invalidAttr = 'data-invalid';\n    // remove data attributes\n    $('[' + self.invalidAttr + ']', $form).removeAttr(invalidAttr);\n    // remove styles\n    $('.' + self.options.labelErrorClass, $form).not('small').removeClass(self.options.labelErrorClass);\n    $('.' + self.options.inputErrorClass, $form).not('small').removeClass(self.options.inputErrorClass);\n    $('.form-error.is-visible').removeClass('is-visible');\n    $form.find('[data-abide-error]').css('display', 'none');\n    $(':input', $form).not(':button, :submit, :reset, :hidden, [data-abide-ignore]').val('').removeAttr(invalidAttr);\n  };\n  Abide.prototype.destroy = function(){\n    //TODO this...\n  };\n\n  Foundation.plugin(Abide, 'Abide');\n\n  // Exports for AMD/Browserify\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined')\n    module.exports = Abide;\n  if (typeof define === 'function')\n    define(['foundation'], function() {\n      return Abide;\n    });\n\n}(Foundation, jQuery);\n\n/**\n * Accordion module.\n * @module foundation.accordion\n * @requires foundation.util.keyboard\n * @requires foundation.util.motion\n */\n!function($, Foundation) {\n  'use strict';\n\n  /**\n   * Creates a new instance of an accordion.\n   * @class\n   * @fires Accordion#init\n   * @param {jQuery} element - jQuery object to make into an accordion.\n   */\n  function Accordion(element, options){\n    this.$element = element;\n    this.options = $.extend({}, Accordion.defaults, this.$element.data(), options);\n\n    this._init();\n\n    Foundation.registerPlugin(this);\n    Foundation.Keyboard.register('Accordion', {\n      'ENTER': 'toggle',\n      'SPACE': 'toggle',\n      'ARROW_DOWN': 'next',\n      'ARROW_UP': 'previous'\n    });\n  }\n\n  Accordion.defaults = {\n    /**\n     * Amount of time to animate the opening of an accordion pane.\n     * @option\n     * @example 250\n     */\n    slideSpeed: 250,\n    /**\n     * Allow the accordion to have multiple open panes.\n     * @option\n     * @example false\n     */\n    multiExpand: false,\n    /**\n     * Allow the accordion to close all panes.\n     * @option\n     * @example false\n     */\n    allowAllClosed: false\n  };\n\n  /**\n   * Initializes the accordion by animating the preset active pane(s).\n   * @private\n   */\n  Accordion.prototype._init = function() {\n    this.$element.attr('role', 'tablist');\n    this.$tabs = this.$element.children('li');\n    this.$tabs.each(function(idx, el){\n\n      var $el = $(el),\n          $content = $el.find('[data-tab-content]'),\n          id = $content[0].id || Foundation.GetYoDigits(6, 'accordion'),\n          linkId = el.id || id + '-label';\n\n      $el.find('a:first').attr({\n        'aria-controls': id,\n        'role': 'tab',\n        'id': linkId,\n        'aria-expanded': false,\n        'aria-selected': false\n      });\n      $content.attr({'role': 'tabpanel', 'aria-labelledby': linkId, 'aria-hidden': true, 'id': id});\n    });\n    var $initActive = this.$element.find('.is-active').children('[data-tab-content]');\n    if($initActive.length){\n      this.down($initActive, true);\n    }\n    this._events();\n  };\n\n  /**\n   * Adds event handlers for items within the accordion.\n   * @private\n   */\n  Accordion.prototype._events = function() {\n    var _this = this;\n\n    this.$tabs.each(function(){\n      var $elem = $(this);\n      var $tabContent = $elem.children('[data-tab-content]');\n      if ($tabContent.length) {\n        $elem.children('a').off('click.zf.accordion keydown.zf.accordion')\n               .on('click.zf.accordion', function(e){\n        // $(this).children('a').on('click.zf.accordion', function(e) {\n          e.preventDefault();\n          if ($elem.hasClass('is-active')) {\n            if(_this.options.allowAllClosed || $elem.siblings().hasClass('is-active')){\n              _this.up($tabContent);\n            }\n          }\n          else {\n            _this.down($tabContent);\n          }\n        }).on('keydown.zf.accordion', function(e){\n          Foundation.Keyboard.handleKey(e, _this, {\n            toggle: function() {\n              _this.toggle($tabContent);\n            },\n            next: function() {\n              $elem.next().find('a').focus().trigger('click.zf.accordion');\n            },\n            previous: function() {\n              $elem.prev().find('a').focus().trigger('click.zf.accordion');\n            },\n            handled: function() {\n              e.preventDefault();\n              e.stopPropagation();\n            }\n          });\n        });\n      }\n    });\n  };\n  /**\n   * Toggles the selected content pane's open/close state.\n   * @param {jQuery} $target - jQuery object of the pane to toggle.\n   * @function\n   */\n  Accordion.prototype.toggle = function($target){\n    if($target.parent().hasClass('is-active')){\n      if(this.options.allowAllClosed || $target.parent().siblings().hasClass('is-active')){\n        this.up($target);\n      }else{ return; }\n    }else{\n      this.down($target);\n    }\n  };\n  /**\n   * Opens the accordion tab defined by `$target`.\n   * @param {jQuery} $target - Accordion pane to open.\n   * @param {Boolean} firstTime - flag to determine if reflow should happen.\n   * @fires Accordion#down\n   * @function\n   */\n  Accordion.prototype.down = function($target, firstTime) {\n    var _this = this;\n    if(!this.options.multiExpand && !firstTime){\n      var $currentActive = this.$element.find('.is-active').children('[data-tab-content]');\n      if($currentActive.length){\n        this.up($currentActive);\n      }\n    }\n\n    $target\n      .attr('aria-hidden', false)\n      .parent('[data-tab-content]')\n      .addBack()\n      .parent().addClass('is-active');\n\n    Foundation.Move(_this.options.slideSpeed, $target, function(){\n      $target.slideDown(_this.options.slideSpeed);\n    });\n\n    if(!firstTime){\n      Foundation._reflow(this.$element.attr('data-accordion'));\n    }\n    $('#' + $target.attr('aria-labelledby')).attr({\n      'aria-expanded': true,\n      'aria-selected': true\n    });\n    /**\n     * Fires when the tab is done opening.\n     * @event Accordion#down\n     */\n    this.$element.trigger('down.zf.accordion', [$target]);\n  };\n\n  /**\n   * Closes the tab defined by `$target`.\n   * @param {jQuery} $target - Accordion tab to close.\n   * @fires Accordion#up\n   * @function\n   */\n  Accordion.prototype.up = function($target) {\n    var $aunts = $target.parent().siblings(),\n        _this = this;\n    var canClose = this.options.multiExpand ? $aunts.hasClass('is-active') : $target.parent().hasClass('is-active');\n\n    if(!this.options.allowAllClosed && !canClose){\n      return;\n    }\n\n    Foundation.Move(this.options.slideSpeed, $target, function(){\n      $target.slideUp(_this.options.slideSpeed);\n    });\n\n    $target.attr('aria-hidden', true)\n           .parent().removeClass('is-active');\n\n    $('#' + $target.attr('aria-labelledby')).attr({\n     'aria-expanded': false,\n     'aria-selected': false\n   });\n\n    /**\n     * Fires when the tab is done collapsing up.\n     * @event Accordion#up\n     */\n    this.$element.trigger('up.zf.accordion', [$target]);\n  };\n\n  /**\n   * Destroys an instance of an accordion.\n   * @fires Accordion#destroyed\n   * @function\n   */\n  Accordion.prototype.destroy = function() {\n    this.$element.find('[data-tab-content]').slideUp(0).css('display', '');\n    this.$element.find('a').off('.zf.accordion');\n\n    Foundation.unregisterPlugin(this);\n  };\n\n  Foundation.plugin(Accordion, 'Accordion');\n}(jQuery, window.Foundation);\n\n/**\n * AccordionMenu module.\n * @module foundation.accordionMenu\n * @requires foundation.util.keyboard\n * @requires foundation.util.motion\n * @requires foundation.util.nest\n */\n!function($) {\n  'use strict';\n\n  /**\n   * Creates a new instance of an accordion menu.\n   * @class\n   * @fires AccordionMenu#init\n   * @param {jQuery} element - jQuery object to make into an accordion menu.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n  function AccordionMenu(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, AccordionMenu.defaults, this.$element.data(), options);\n\n    Foundation.Nest.Feather(this.$element, 'accordion');\n\n    this._init();\n\n    Foundation.registerPlugin(this);\n    Foundation.Keyboard.register('AccordionMenu', {\n      'ENTER': 'toggle',\n      'SPACE': 'toggle',\n      'ARROW_RIGHT': 'open',\n      'ARROW_UP': 'up',\n      'ARROW_DOWN': 'down',\n      'ARROW_LEFT': 'close',\n      'ESCAPE': 'closeAll',\n      'TAB': 'down',\n      'SHIFT_TAB': 'up'\n    });\n  }\n\n  AccordionMenu.defaults = {\n    /**\n     * Amount of time to animate the opening of a submenu in ms.\n     * @option\n     * @example 250\n     */\n    slideSpeed: 250,\n    /**\n     * Allow the menu to have multiple open panes.\n     * @option\n     * @example true\n     */\n    multiOpen: true\n  };\n\n  /**\n   * Initializes the accordion menu by hiding all nested menus.\n   * @private\n   */\n  AccordionMenu.prototype._init = function() {\n    this.$element.find('[data-submenu]').not('.is-active').slideUp(0);//.find('a').css('padding-left', '1rem');\n    this.$element.attr({\n      'role': 'tablist',\n      'aria-multiselectable': this.options.multiOpen\n    });\n\n    this.$menuLinks = this.$element.find('.has-submenu');\n    this.$menuLinks.each(function(){\n      var linkId = this.id || Foundation.GetYoDigits(6, 'acc-menu-link'),\n          $elem = $(this),\n          $sub = $elem.children('[data-submenu]'),\n          subId = $sub[0].id || Foundation.GetYoDigits(6, 'acc-menu'),\n          isActive = $sub.hasClass('is-active');\n      $elem.attr({\n        'aria-controls': subId,\n        'aria-expanded': isActive,\n        'aria-selected': false,\n        'role': 'tab',\n        'id': linkId\n      });\n      $sub.attr({\n        'aria-labelledby': linkId,\n        'aria-hidden': !isActive,\n        'role': 'tabpanel',\n        'id': subId\n      });\n    });\n    var initPanes = this.$element.find('.is-active');\n    if(initPanes.length){\n      var _this = this;\n      initPanes.each(function(){\n        _this.down($(this));\n      });\n    }\n    this._events();\n  };\n\n  /**\n   * Adds event handlers for items within the menu.\n   * @private\n   */\n  AccordionMenu.prototype._events = function() {\n    var _this = this;\n\n    this.$element.find('li').each(function() {\n      var $submenu = $(this).children('[data-submenu]');\n\n      if ($submenu.length) {\n        $(this).children('a').off('click.zf.accordionmenu').on('click.zf.accordionmenu', function(e) {\n          e.preventDefault();\n\n          _this.toggle($submenu);\n        });\n      }\n    }).on('keydown.zf.accordionmenu', function(e){\n      var $element = $(this),\n          $elements = $element.parent('ul').children('li'),\n          $prevElement,\n          $nextElement,\n          $target = $element.children('[data-submenu]');\n\n      $elements.each(function(i) {\n        if ($(this).is($element)) {\n          $prevElement = $elements.eq(Math.max(0, i-1));\n          $nextElement = $elements.eq(Math.min(i+1, $elements.length-1));\n\n          if ($(this).children('[data-submenu]:visible').length) { // has open sub menu\n            $nextElement = $element.find('li:first-child');\n          }\n          if ($(this).is(':first-child')) { // is first element of sub menu\n            $prevElement = $element.parents('li').first();\n          } else if ($prevElement.children('[data-submenu]:visible').length) { // if previous element has open sub menu\n            $prevElement = $prevElement.find('li:last-child');\n          }\n          if ($(this).is(':last-child')) { // is last element of sub menu\n            $nextElement = $element.parents('li').first().next('li');\n          }\n\n          return;\n        }\n      });\n      Foundation.Keyboard.handleKey(e, _this, {\n        open: function() {\n          if ($target.is(':hidden')) {\n            _this.down($target);\n            $target.find('li').first().focus();\n          }\n        },\n        close: function() {\n          if ($target.length && !$target.is(':hidden')) { // close active sub of this item\n            _this.up($target);\n          } else if ($element.parent('[data-submenu]').length) { // close currently open sub\n            _this.up($element.parent('[data-submenu]'));\n            $element.parents('li').first().focus();\n          }\n        },\n        up: function() {\n          $prevElement.focus();\n        },\n        down: function() {\n          $nextElement.focus();\n        },\n        toggle: function() {\n          if ($element.children('[data-submenu]').length) {\n            _this.toggle($element.children('[data-submenu]'));\n          }\n        },\n        closeAll: function() {\n          _this.hideAll();\n        },\n        handled: function() {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n      });\n    });//.attr('tabindex', 0);\n  };\n  /**\n   * Closes all panes of the menu.\n   * @function\n   */\n  AccordionMenu.prototype.hideAll = function(){\n    this.$element.find('[data-submenu]').slideUp(this.options.slideSpeed);\n  };\n  /**\n   * Toggles the open/close state of a submenu.\n   * @function\n   * @param {jQuery} $target - the submenu to toggle\n   */\n  AccordionMenu.prototype.toggle = function($target){\n    if (!$target.is(':hidden')) {\n      this.up($target);\n    }\n    else {\n      this.down($target);\n    }\n  };\n  /**\n   * Opens the sub-menu defined by `$target`.\n   * @param {jQuery} $target - Sub-menu to open.\n   * @fires AccordionMenu#down\n   */\n  AccordionMenu.prototype.down = function($target) {\n    var _this = this;\n    console.log($target);\n    if(!this.options.multiOpen){\n      this.up(this.$element.find('.is-active').not($target.parentsUntil(this.$element)));\n    }\n\n    $target.addClass('is-active').attr({'aria-hidden': false})\n      .parent('.has-submenu').attr({'aria-expanded': true, 'aria-selected': true});\n\n      Foundation.Move(this.options.slideSpeed, $target, function(){\n        $target.slideDown(_this.options.slideSpeed);\n      });\n    /**\n     * Fires when the menu is done collapsing up.\n     * @event AccordionMenu#down\n     */\n    this.$element.trigger('down.zf.accordionMenu', [$target]);\n  };\n\n  /**\n   * Closes the sub-menu defined by `$target`. All sub-menus inside the target will be closed as well.\n   * @param {jQuery} $target - Sub-menu to close.\n   * @fires AccordionMenu#up\n   */\n  AccordionMenu.prototype.up = function($target) {\n    var _this = this;\n    Foundation.Move(this.options.slideSpeed, $target, function(){\n      $target.slideUp(_this.options.slideSpeed);\n    });\n    $target.attr('aria-hidden', true)\n           .find('[data-submenu]').slideUp(0).attr('aria-hidden', true).end()\n           .parent('.has-submenu')\n           .attr({'aria-expanded': false, 'aria-selected': false});\n    // $target.slideUp(this.options.slideSpeed, function() {\n    //   $target.find('[data-submenu]').slideUp(0).attr('aria-hidden', true);\n    // }).attr('aria-hidden', true).parent('.has-submenu').attr({'aria-expanded': false, 'aria-selected': false});\n\n    /**\n     * Fires when the menu is done collapsing up.\n     * @event AccordionMenu#up\n     */\n    this.$element.trigger('up.zf.accordionMenu', [$target]);\n  };\n\n  /**\n   * Destroys an instance of accordion menu.\n   * @fires AccordionMenu#destroyed\n   */\n  AccordionMenu.prototype.destroy = function(){\n    this.$element.find('[data-submenu]').slideDown(0).css('display', '');\n    this.$element.find('a').off('click.zf.accordionMenu');\n\n    Foundation.Nest.Burn(this.$element, 'accordion');\n    Foundation.unregisterPlugin(this);\n  };\n\n  Foundation.plugin(AccordionMenu, 'AccordionMenu');\n}(jQuery, window.Foundation);\n\n/**\n * Drilldown module.\n * @module foundation.drilldown\n * @requires foundation.util.keyboard\n * @requires foundation.util.motion\n * @requires foundation.util.nest\n */\n!function($, Foundation){\n  'use strict';\n\n  /**\n   * Creates a new instance of a drilldown menu.\n   * @class\n   * @param {jQuery} element - jQuery object to make into an accordion menu.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n  function Drilldown(element, options){\n    this.$element = element;\n    this.options = $.extend({}, Drilldown.defaults, this.$element.data(), options);\n\n    Foundation.Nest.Feather(this.$element, 'drilldown');\n\n    this._init();\n\n    Foundation.registerPlugin(this);\n    Foundation.Keyboard.register('Drilldown', {\n      'ENTER': 'open',\n      'SPACE': 'open',\n      'ARROW_RIGHT': 'next',\n      'ARROW_UP': 'up',\n      'ARROW_DOWN': 'down',\n      'ARROW_LEFT': 'previous',\n      'ESCAPE': 'close',\n      'TAB': 'down',\n      'SHIFT_TAB': 'up'\n    });\n  }\n  Drilldown.defaults = {\n    /**\n     * Markup used for JS generated back button. Prepended to submenu lists and deleted on `destroy` method.\n     * @option\n     * @example '<li><a>Back</a></li>'\n     */\n    backButton: '<li class=\"js-drilldown-back\" tabindex=\"0\"><a>Back</a></li>',\n    /**\n     * Markup used to wrap drilldown menu. Use a class name for independent styling, or the JS applied class: `is-drilldown`.\n     * @option\n     * @example '<div></div>'\n     */\n    wrapper: '<div></div>',\n    /**\n     * Allow the menu to return to root list on body click.\n     * @option\n     * @example false\n     */\n    closeOnClick: false,\n    // holdOpen: false\n  };\n  /**\n   * Initializes the drilldown by creating jQuery collections of elements\n   * @private\n   */\n  Drilldown.prototype._init = function(){\n    this.$submenuAnchors = this.$element.find('li.has-submenu');\n    this.$submenus = this.$submenuAnchors.children('[data-submenu]').addClass('is-drilldown-sub')/*.wrap($(this.options.wrapper).addClass('is-drilldown-sub'))*/;\n    // this.$rootElems = this.$element.children('[data-submenu]')/*.addClass('first-sub')*/;\n    this.$menuItems = this.$element.find('li').not('.js-drilldown-back').attr('role', 'menuitem');\n    // this.$submenus;\n\n\n    this._prepareMenu();\n    // this._getMaxDims();\n    this._keyboardEvents();\n  };\n  /**\n   * prepares drilldown menu by setting attributes to links and elements\n   * sets a min height to prevent content jumping\n   * wraps the element if not already wrapped\n   * @private\n   * @function\n   */\n  Drilldown.prototype._prepareMenu = function(){\n    var _this = this;\n    // if(!this.options.holdOpen){\n    //   this._menuLinkEvents();\n    // }\n    this.$submenuAnchors.each(function(){\n      var $sub = $(this);\n      $sub.find('a')[0].removeAttribute('href');\n      $sub.children('[data-submenu]')\n          .attr({\n            'aria-hidden': true,\n            'tabindex': 0,\n            'role': 'menu'\n          });\n      _this._events($sub);\n    });\n    this.$submenus.each(function(){\n      var $menu = $(this),\n          $back = $menu.find('.js-drilldown-back');\n      if(!$back.length){\n        $menu.prepend(_this.options.backButton);\n        _this._back($menu);\n      }\n    });\n    if(!this.$element.parent().hasClass('is-drilldown')){\n      this.$wrapper = $(this.options.wrapper).addClass('is-drilldown').css(this._getMaxDims());\n      this.$element.wrap(this.$wrapper);\n    }\n\n  };\n  /**\n   * Adds event handlers to elements in the menu.\n   * @function\n   * @private\n   * @param {jQuery} $elem - the current menu item to add handlers to.\n   */\n  Drilldown.prototype._events = function($elem){\n    var _this = this;\n\n    $elem.off('click.zf.drilldown')\n    .on('click.zf.drilldown', function(e){\n      e.stopImmediatePropagation();\n      e.preventDefault();\n\n      if(e.target !== e.currentTarget.firstElementChild){\n        return false;\n      }\n      _this._show($elem);\n\n      if(_this.options.closeOnClick){\n        var $body = $('body').not(_this.$wrapper);\n        $body.off('.zf.drilldown').on('click.zf.drilldown', function(e){\n          e.preventDefault();\n          _this._hideAll();\n          $body.off('.zf.drilldown');\n        });\n      }\n    });\n  };\n  /**\n   * Adds keydown event listener to `li`'s in the menu.\n   * @private\n   */\n  Drilldown.prototype._keyboardEvents = function() {\n    var _this = this;\n    this.$menuItems.add(this.$element.find('.js-drilldown-back')).on('keydown.zf.drilldown', function(e){\n      var $element = $(this),\n          $elements = $element.parent('ul').children('li'),\n          $prevElement,\n          $nextElement;\n\n      $elements.each(function(i) {\n        if ($(this).is($element)) {\n          $prevElement = $elements.eq(Math.max(0, i-1));\n          $nextElement = $elements.eq(Math.min(i+1, $elements.length-1));\n          return;\n        }\n      });\n      Foundation.Keyboard.handleKey(e, _this, {\n        next: function() {\n          if ($element.is(_this.$submenuAnchors)) {\n            _this._show($element);\n            $element.on(Foundation.transitionend($element), function(){\n              $element.find('ul li').filter(_this.$menuItems).first().focus();\n            });\n          }\n        },\n        previous: function() {\n          _this._hide($element.parent('ul'));\n          $element.parent('ul').on(Foundation.transitionend($element), function(){\n            setTimeout(function() {\n              $element.parent('ul').parent('li').focus();\n            }, 1);\n          });\n        },\n        up: function() {\n          $prevElement.focus();\n        },\n        down: function() {\n          $nextElement.focus();\n        },\n        close: function() {\n          _this._back();\n          //_this.$menuItems.first().focus(); // focus to first element\n        },\n        open: function() {\n          if (!$element.is(_this.$menuItems)) { // not menu item means back button\n            _this._hide($element.parent('ul'));\n            setTimeout(function(){$element.parent('ul').parent('li').focus();}, 1);\n          } else if ($element.is(_this.$submenuAnchors)) {\n            _this._show($element);\n            setTimeout(function(){$element.find('ul li').filter(_this.$menuItems).first().focus();}, 1);\n          }\n        },\n        handled: function() {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n      });\n    }); // end keyboardAccess\n  };\n\n  /**\n   * Closes all open elements, and returns to root menu.\n   * @function\n   * @fires Drilldown#closed\n   */\n  Drilldown.prototype._hideAll = function(){\n    var $elem = this.$element.find('.is-drilldown-sub.is-active').addClass('is-closing');\n    $elem.one(Foundation.transitionend($elem), function(e){\n      $elem.removeClass('is-active is-closing');\n    });\n        /**\n         * Fires when the menu is fully closed.\n         * @event Drilldown#closed\n         */\n    this.$element.trigger('closed.zf.drilldown');\n  };\n  /**\n   * Adds event listener for each `back` button, and closes open menus.\n   * @function\n   * @fires Drilldown#back\n   * @param {jQuery} $elem - the current sub-menu to add `back` event.\n   */\n  Drilldown.prototype._back = function($elem){\n    var _this = this;\n    $elem.off('click.zf.drilldown');\n    $elem.children('.js-drilldown-back')\n      .on('click.zf.drilldown', function(e){\n        e.stopImmediatePropagation();\n        // console.log('mouseup on back');\n        _this._hide($elem);\n      });\n  };\n  /**\n   * Adds event listener to menu items w/o submenus to close open menus on click.\n   * @function\n   * @private\n   */\n  Drilldown.prototype._menuLinkEvents = function(){\n    var _this = this;\n    this.$menuItems.not('.has-submenu')\n        .off('click.zf.drilldown')\n        .on('click.zf.drilldown', function(e){\n          // e.stopImmediatePropagation();\n          setTimeout(function(){\n            _this._hideAll();\n          }, 0);\n      });\n  };\n  /**\n   * Opens a submenu.\n   * @function\n   * @fires Drilldown#open\n   * @param {jQuery} $elem - the current element with a submenu to open.\n   */\n  Drilldown.prototype._show = function($elem){\n    $elem.children('[data-submenu]').addClass('is-active');\n\n    this.$element.trigger('open.zf.drilldown', [$elem]);\n  };\n  /**\n   * Hides a submenu\n   * @function\n   * @fires Drilldown#hide\n   * @param {jQuery} $elem - the current sub-menu to hide.\n   */\n  Drilldown.prototype._hide = function($elem){\n    var _this = this;\n    $elem.addClass('is-closing')\n         .one(Foundation.transitionend($elem), function(){\n           $elem.removeClass('is-active is-closing');\n         });\n    /**\n     * Fires when the submenu is has closed.\n     * @event Drilldown#hide\n     */\n    $elem.trigger('hide.zf.drilldown', [$elem]);\n\n  };\n  /**\n   * Iterates through the nested menus to calculate the min-height, and max-width for the menu.\n   * Prevents content jumping.\n   * @function\n   * @private\n   */\n  Drilldown.prototype._getMaxDims = function(){\n    var max = 0, result = {};\n    this.$submenus.add(this.$element).each(function(){\n      var numOfElems = $(this).children('li').length;\n      max = numOfElems > max ? numOfElems : max;\n    });\n\n    result.height = max * this.$menuItems[0].getBoundingClientRect().height + 'px';\n    result.width = this.$element[0].getBoundingClientRect().width + 'px';\n\n    return result;\n  };\n  /**\n   * Destroys the Drilldown Menu\n   * @function\n   */\n  Drilldown.prototype.destroy = function(){\n    this._hideAll();\n    Foundation.Nest.Burn(this.$element, 'drilldown');\n    this.$element.unwrap()\n                 .find('.js-drilldown-back').remove()\n                 .end().find('.is-active, .is-closing, .is-drilldown-sub').removeClass('is-active is-closing is-drilldown-sub')\n                 .end().find('[data-submenu]').removeAttr('aria-hidden tabindex role')\n                 .off('.zf.drilldown').end().off('zf.drilldown');\n\n    Foundation.unregisterPlugin(this);\n  };\n  Foundation.plugin(Drilldown, 'Drilldown');\n}(jQuery, window.Foundation);\n\n/**\n * Dropdown module.\n * @module foundation.dropdown\n * @requires foundation.util.keyboard\n * @requires foundation.util.box\n */\n!function($, Foundation){\n  'use strict';\n  /**\n   * Creates a new instance of a dropdown.\n   * @class\n   * @param {jQuery} element - jQuery object to make into an accordion menu.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n  function Dropdown(element, options){\n    this.$element = element;\n    this.options = $.extend({}, Dropdown.defaults, this.$element.data(), options);\n    this._init();\n\n    Foundation.registerPlugin(this);\n    Foundation.Keyboard.register('Dropdown', {\n      'ENTER': 'open',\n      'SPACE': 'open',\n      'ESCAPE': 'close',\n      'TAB': 'tab_forward',\n      'SHIFT_TAB': 'tab_backward'\n    });\n  }\n\n  Dropdown.defaults = {\n    /**\n     * Amount of time to delay opening a submenu on hover event.\n     * @option\n     * @example 250\n     */\n    hoverDelay: 250,\n    /**\n     * Allow submenus to open on hover events\n     * @option\n     * @example false\n     */\n    hover: false,\n    /**\n     * Number of pixels between the dropdown pane and the triggering element on open.\n     * @option\n     * @example 1\n     */\n    vOffset: 1,\n    /**\n     * Number of pixels between the dropdown pane and the triggering element on open.\n     * @option\n     * @example 1\n     */\n    hOffset: 1,\n    /**\n     * Class applied to adjust open position. JS will test and fill this in.\n     * @option\n     * @example 'top'\n     */\n    positionClass: '',\n    /**\n     * Allow the plugin to trap focus to the dropdown pane on open.\n     * @option\n     * @example false\n     */\n    trapFocus: false\n  };\n  /**\n   * Initializes the plugin by setting/checking options and attributes, adding helper variables, and saving the anchor.\n   * @function\n   * @private\n   */\n  Dropdown.prototype._init = function(){\n    var $id = this.$element.attr('id');\n\n    this.$anchor = $('[data-toggle=\"' + $id + '\"]') || $('[data-open=\"' + $id + '\"]');\n    this.$anchor.attr({\n      'aria-controls': $id,\n      'data-is-focus': false,\n      'data-yeti-box': $id,\n      'aria-haspopup': true,\n      'aria-expanded': false\n      // 'data-resize': $id\n    });\n\n    this.options.positionClass = this.getPositionClass();\n    this.counter = 4;\n    this.usedPositions = [];\n    this.$element.attr({\n      'aria-hidden': 'true',\n      'data-yeti-box': $id,\n      'data-resize': $id,\n      'aria-labelledby': this.$anchor[0].id || Foundation.GetYoDigits(6, 'dd-anchor')\n    });\n    this._events();\n  };\n  /**\n   * Helper function to determine current orientation of dropdown pane.\n   * @function\n   * @returns {String} position - string value of a position class.\n   */\n  Dropdown.prototype.getPositionClass = function(){\n    var position = this.$element[0].className.match(/(top|left|right)/g);\n        position = position ? position[0] : '';\n    return position;\n  };\n  /**\n   * Adjusts the dropdown panes orientation by adding/removing positioning classes.\n   * @function\n   * @private\n   * @param {String} position - position class to remove.\n   */\n  Dropdown.prototype._reposition = function(position){\n    this.usedPositions.push(position ? position : 'bottom');\n    //default, try switching to opposite side\n    if(!position && (this.usedPositions.indexOf('top') < 0)){\n      this.$element.addClass('top');\n    }else if(position === 'top' && (this.usedPositions.indexOf('bottom') < 0)){\n      this.$element.removeClass(position);\n    }else if(position === 'left' && (this.usedPositions.indexOf('right') < 0)){\n      this.$element.removeClass(position)\n          .addClass('right');\n    }else if(position === 'right' && (this.usedPositions.indexOf('left') < 0)){\n      this.$element.removeClass(position)\n          .addClass('left');\n    }\n\n    //if default change didn't work, try bottom or left first\n    else if(!position && (this.usedPositions.indexOf('top') > -1) && (this.usedPositions.indexOf('left') < 0)){\n      this.$element.addClass('left');\n    }else if(position === 'top' && (this.usedPositions.indexOf('bottom') > -1) && (this.usedPositions.indexOf('left') < 0)){\n      this.$element.removeClass(position)\n          .addClass('left');\n    }else if(position === 'left' && (this.usedPositions.indexOf('right') > -1) && (this.usedPositions.indexOf('bottom') < 0)){\n      this.$element.removeClass(position);\n    }else if(position === 'right' && (this.usedPositions.indexOf('left') > -1) && (this.usedPositions.indexOf('bottom') < 0)){\n      this.$element.removeClass(position);\n    }\n    //if nothing cleared, set to bottom\n    else{\n      this.$element.removeClass(position);\n    }\n    this.classChanged = true;\n    this.counter--;\n  };\n  /**\n   * Sets the position and orientation of the dropdown pane, checks for collisions.\n   * Recursively calls itself if a collision is detected, with a new position class.\n   * @function\n   * @private\n   */\n  Dropdown.prototype._setPosition = function(){\n    if(this.$anchor.attr('aria-expanded') === 'false'){ return false; }\n    var position = this.getPositionClass(),\n        $eleDims = Foundation.Box.GetDimensions(this.$element),\n        $anchorDims = Foundation.Box.GetDimensions(this.$anchor),\n        _this = this,\n        direction = (position === 'left' ? 'left' : ((position === 'right') ? 'left' : 'top')),\n        param = (direction === 'top') ? 'height' : 'width',\n        offset = (param === 'height') ? this.options.vOffset : this.options.hOffset;\n\n    if(($eleDims.width >= $eleDims.windowDims.width) || (!this.counter && !Foundation.Box.ImNotTouchingYou(this.$element))){\n      this.$element.offset(Foundation.Box.GetOffsets(this.$element, this.$anchor, 'center bottom', this.options.vOffset, this.options.hOffset, true)).css({\n        'width': $eleDims.windowDims.width - (this.options.hOffset * 2),\n        'height': 'auto',\n      });\n      this.classChanged = true;\n      return false;\n    }\n\n    this.$element.offset(Foundation.Box.GetOffsets(this.$element, this.$anchor, position, this.options.vOffset, this.options.hOffset));\n\n    while(!Foundation.Box.ImNotTouchingYou(this.$element) && this.counter){\n      this._reposition(position);\n      this._setPosition();\n    }\n  };\n  /**\n   * Adds event listeners to the element utilizing the triggers utility library.\n   * @function\n   * @private\n   */\n  Dropdown.prototype._events = function(){\n    var _this = this;\n    this.$element.on({\n      'open.zf.trigger': this.open.bind(this),\n      'close.zf.trigger': this.close.bind(this),\n      'toggle.zf.trigger': this.toggle.bind(this),\n      'resizeme.zf.trigger': this._setPosition.bind(this)\n    });\n\n    if(this.options.hover){\n      clearTimeout(_this.timeout);\n      this.$anchor.on('mouseenter.zf.dropdown mouseleave.zf.dropdown', function(){\n        _this.timeOut = setTimeout(function(){\n          _this.toggle();\n        }, _this.options.hoverDelay);\n      });\n    }\n    this.$anchor.add(this.$element).on('keydown.zf.dropdown', function(e) {\n\n      var visibleFocusableElements = Foundation.Keyboard.findFocusable(_this.$element);\n\n      Foundation.Keyboard.handleKey(e, _this, {\n        tab_forward: function() {\n          if (this.$element.find(':focus').is(visibleFocusableElements.eq(-1))) { // left modal downwards, setting focus to first element\n            if (this.options.trapFocus) { // if focus shall be trapped\n              visibleFocusableElements.eq(0).focus();\n              e.preventDefault();\n            } else { // if focus is not trapped, close dropdown on focus out\n              this.close();\n            }\n          }\n        },\n        tab_backward: function() {\n          if (this.$element.find(':focus').is(visibleFocusableElements.eq(0)) || this.$element.is(':focus')) { // left modal upwards, setting focus to last element\n            if (this.options.trapFocus) { // if focus shall be trapped\n              visibleFocusableElements.eq(-1).focus();\n              e.preventDefault();\n            } else { // if focus is not trapped, close dropdown on focus out\n              this.close();\n            }\n          }\n        },\n        open: function() {\n          _this.open();\n          _this.$element.attr('tabindex', -1).focus();\n        },\n        close: function() {\n          _this.close();\n          _this.$anchor.focus();\n        }\n      });\n    });\n  };\n  /**\n   * Opens the dropdown pane, and fires a bubbling event to close other dropdowns.\n   * @function\n   * @fires Dropdown#closeme\n   * @fires Dropdown#show\n   */\n  Dropdown.prototype.open = function(){\n    // var _this = this;\n    /**\n     * Fires to close other open dropdowns\n     * @event Dropdown#closeme\n     */\n    this.$element.trigger('closeme.zf.dropdown', this.$element.attr('id'));\n    this.$anchor.addClass('hover')\n        .attr({'aria-expanded': true});\n    // this.$element/*.show()*/;\n    this._setPosition();\n    this.$element.addClass('is-open')\n        .attr({'aria-hidden': false});\n\n\n\n    /**\n     * Fires once the dropdown is visible.\n     * @event Dropdown#show\n     */\n     this.$element.trigger('show.zf.dropdown', [this.$element]);\n    //why does this not work correctly for this plugin?\n    // Foundation.reflow(this.$element, 'dropdown');\n    // Foundation._reflow(this.$element.attr('data-dropdown'));\n  };\n\n  /**\n   * Closes the open dropdown pane.\n   * @function\n   * @fires Dropdown#hide\n   */\n  Dropdown.prototype.close = function(){\n    if(!this.$element.hasClass('is-open')){\n      return false;\n    }\n    this.$element.removeClass('is-open')\n        .attr({'aria-hidden': true});\n\n    this.$anchor.removeClass('hover')\n        .attr('aria-expanded', false);\n\n    if(this.classChanged){\n      var curPositionClass = this.getPositionClass();\n      if(curPositionClass){\n        this.$element.removeClass(curPositionClass);\n      }\n      this.$element.addClass(this.options.positionClass)\n          /*.hide()*/.css({height: '', width: ''});\n      this.classChanged = false;\n      this.counter = 4;\n      this.usedPositions.length = 0;\n    }\n    this.$element.trigger('hide.zf.dropdown', [this.$element]);\n    // Foundation.reflow(this.$element, 'dropdown');\n  };\n  /**\n   * Toggles the dropdown pane's visibility.\n   * @function\n   */\n  Dropdown.prototype.toggle = function(){\n    if(this.$element.hasClass('is-open')){\n      this.close();\n    }else{\n      this.open();\n    }\n  };\n  /**\n   * Destroys the dropdown.\n   * @function\n   */\n  Dropdown.prototype.destroy = function(){\n    this.$element.off('.zf.trigger').hide();\n    this.$anchor.off('.zf.dropdown');\n\n    Foundation.unregisterPlugin(this);\n  };\n\n  Foundation.plugin(Dropdown, 'Dropdown');\n}(jQuery, window.Foundation);\n\n/**\n * DropdownMenu module.\n * @module foundation.dropdown-menu\n * @requires foundation.util.keyboard\n * @requires foundation.util.box\n * @requires foundation.util.nest\n */\n!function(Foundation, $) {\n  'use strict';\n\n  /**\n   * Creates a new instance of DropdownMenu.\n   * @class\n   * @fires DropdownMenu#init\n   * @param {jQuery} element - jQuery object to make into a dropdown menu.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n  function DropdownMenu(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, DropdownMenu.defaults, this.$element.data(), options);\n\n    Foundation.Nest.Feather(this.$element, 'dropdown');\n\n    this._init();\n\n    Foundation.registerPlugin(this);\n    Foundation.Keyboard.register('DropdownMenu', {\n      'ENTER': 'open',\n      'SPACE': 'open',\n      'ARROW_RIGHT': 'next',\n      'ARROW_UP': 'up',\n      'ARROW_DOWN': 'down',\n      'ARROW_LEFT': 'previous',\n      'ESCAPE': 'close'\n    });\n\n    // /**\n    //  * Fires when the plugin has been successfuly initialized.\n    //  * @event DropdownMenu#init\n    //  */\n    // this.$element.trigger('init.zf.dropdown');\n  }\n\n  /**\n   * Default settings for plugin\n   */\n  DropdownMenu.defaults = {\n    // toggleOn: 'both',\n    /**\n     * Allow a submenu to open/remain open on parent click event. Allows cursor to move away from menu.\n     * @option\n     * @example true\n     */\n    clickOpen: true,\n    /**\n     * Allow clicks on the body to close any open submenus.\n     * @option\n     * @example false\n     */\n    closeOnClick: false,\n    /**\n     * Disallows hover events from opening submenus\n     * @option\n     * @example false\n     */\n    disableHover: false,\n    /**\n     * Allow a submenu to automatically close on a mouseleave event.\n     * @option\n     * @example true\n     */\n    autoclose: true,\n    /**\n     * Amount of time to delay opening a submenu on hover event.\n     * @option\n     * @example 150\n     */\n    hoverDelay: 150,\n    /**\n     * Amount of time to delay closing a submenu on a mouseleave event.\n     * @option\n     * @example 500\n     */\n    closingTime: 500,\n    // wrapOnKeys: true,\n    /**\n     * Position of the menu relative to what direction the submenus should open. Handled by JS.\n     * @option\n     * @example 'left'\n     */\n    alignment: 'left',\n    /**\n     * Class applied to vertical oriented menus, Foundation default is `vertical`. Update this if using your own class.\n     * @option\n     * @example 'vertical'\n     */\n    verticalClass: 'vertical',\n    /**\n     * Class applied to right-side oriented menus, Foundation default is `align-right`. Update this if using your own class.\n     * @option\n     * @example 'align-right'\n     */\n    rightClass: 'align-right'\n  };\n  /**\n   * Initializes the plugin, and calls _prepareMenu\n   * @private\n   * @function\n   */\n  DropdownMenu.prototype._init = function(){\n    if(this.$element.hasClass(this.options.verticalClass)){\n      this.vertical = true;\n    }\n    // this.vertical = this.$element.hasClass(this.options.verticalClass);\n    this._prepareMenu();\n    // this._addTopLevelKeyHandler();\n  };\n  /**\n   * Prepares the menu by checking alignment and orientation, setting attributes for elements, and creating jQuery collections of elements.\n   * @private\n   * @function\n   */\n  DropdownMenu.prototype._prepareMenu = function(){\n    var _this = this;\n    this.$tabs = this.$element.children('li.has-submenu');\n    this.$tabs.children('[data-submenu]').addClass('first-sub');\n    this.$submenus = this.$element.find('li.has-submenu');\n    this.$menuItems = this.$element.find('li').attr({'role': 'menuitem', 'tabindex': 0});\n    this.$menuItems.children('a').attr('tabindex', -1);\n    if(this.$element.hasClass(this.options.rightClass)){\n      this.options.alignment = 'right';\n      this.$submenus.addClass('is-left-arrow opens-left');\n    }else{\n      this.$submenus.addClass('is-right-arrow opens-right');\n    }\n    if(!this.vertical){\n      this.$tabs.removeClass('is-right-arrow is-left-arrow opens-left opens-right').addClass('is-down-arrow');\n    }\n\n    this.$tabs.each(function(){\n      var $tab = $(this);\n      $tab.attr({\n        'role': 'menuitem',\n        'tabindex': 0,\n        'title': $tab.children('a:first-child').text()/*.match(/\\w/ig).join('')*/\n      }).children('a').attr('tabindex', -1);//maybe add a more specific regex to match alphanumeric characters and join them appropriately\n      if($tab.children('[data-submenu]')){\n        $tab.attr('aria-haspopup', true);\n      }\n    });\n\n\n    this.$submenus.each(function(){\n      var $sub = $(this);\n\n      // if(_this.options.alignment === 'right'){\n      //   $sub.children('[data-submenu]').addClass('is-right-arrow');\n      // }\n\n      $sub.children('[data-submenu]')\n          .attr({\n            'aria-hidden': true,\n            'tabindex': -1,\n            'role': 'menu'\n          }).addClass('vertical');\n      _this._events($sub);\n    });\n  };\n\n  /**\n   * Adds event listeners to elements within the menu\n   * @param {jQuery} $elem - the element to attach listeners too.\n   * @private\n   * @function\n   */\n  DropdownMenu.prototype._events = function($elem){\n    var _this = this;\n\n    if(this.options.clickOpen){\n      $elem.off('click.zf.dropdownmenu')\n          .on('click.zf.dropdownmenu', function(e){\n            if(!$(this).hasClass('is-dropdown-submenu-parent')){ return; }\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            if($elem.data('isClick')){\n              _this._hide($elem);\n            }else{\n              _this._hideOthers($elem);\n              _this._show($elem);\n              $elem.data('isClick', true)\n                  .parentsUntil('[data-dropdown-menu]', '.is-dropdown-submenu-parent')\n                  .data('isClick', true);\n              if(_this.options.closeOnClick){\n                _this._addBodyHandler();\n              }\n            }\n          });\n    }\n\n    if(!this.options.disableHover){\n      //add ability for all menu items to close an open menu on the same level//\n      this.$menuItems.on('mouseenter.zf.dropdownmenu', function(e){\n        var $el = $(this);\n        if(!$el.hasClass('is-active')){\n          _this._hideOthers($el);\n        }\n      });\n      //elements with submenus\n      $elem.on('mouseenter.zf.dropdownmenu', function(e){\n        clearTimeout($elem.closeTimer);\n        if(!$elem.hasClass('is-active')){\n          $elem.openTimer = setTimeout(function(){\n              // _this._hideOthers($elem);\n              _this._show($elem);\n          }, _this.options.hoverDelay);\n        }\n      }).on('mouseleave.zf.dropdownmenu', function(e){\n        if(!$elem.data('isClick') && _this.options.autoclose){\n        clearTimeout($elem.openTimer);\n          $elem.closeTimer = setTimeout(function(){\n            _this._hide($elem);\n          }, _this.options.closingTime);\n        }\n      });\n    }\n\n    this.$menuItems.on('keydown.zf.dropdownmenu', function(e){\n      var $element = $(this),\n          $tabs = _this.$element.children('li'),\n          isTab = $element.is($tabs),\n          $elements = isTab ? $tabs : $element.parents('li').first().add($element.parent('ul').children('li')),\n          $prevElement,\n          $nextElement;\n\n      $elements.each(function(i) {\n        if ($(this).is($element)) {\n          $prevElement = $elements.eq(i-1);\n          $nextElement = $elements.eq(i+1);\n          return;\n        }\n      });\n      var nextSibling = function() {\n        if (!$element.is(':last-child')) $nextElement.focus();\n      }, prevSibling = function() {\n        $prevElement.focus();\n      }, openSub = function() {\n        if ($element.has('ul').length) {\n          _this._show($element);\n          $element.find('li').first().focus();\n        }\n      }, closeSub = function() {\n        //if ($element.is(':first-child')) {\n          $element.parents('li').first().focus();\n          _this._hide($element.parents('li').first());\n        //}\n      };\n      var functions = {\n        open: openSub,\n        close: function() {\n          _this._hideAll();\n          _this.$menuItems.first().focus(); // focus to first element\n        },\n        handled: function() {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n      };\n\n      if (isTab) {\n        if (_this.vertical) { // vertical menu\n          if (_this.options.alignment === 'left') { // left aligned\n            $.extend(functions, {\n              down: nextSibling,\n              up: prevSibling,\n              next: openSub,\n              previous: closeSub,\n            });\n          } else { // right aligned\n            $.extend(functions, {\n              down: nextSibling,\n              up: prevSibling,\n              next: closeSub,\n              previous: openSub,\n            });\n          }\n        } else { // horizontal menu\n          $.extend(functions, {\n            next: nextSibling,\n            previous: prevSibling,\n            down: openSub,\n            up: closeSub,\n          });\n        }\n      } else { // not tabs -> one sub\n        if (_this.options.alignment === 'left') { // left aligned\n          $.extend(functions, {\n            next: openSub,\n            previous: closeSub,\n            down: nextSibling,\n            up: prevSibling\n          });\n        } else { // right aligned\n          $.extend(functions, {\n            next: closeSub,\n            previous: openSub,\n            down: nextSibling,\n            up: prevSibling\n          });\n        }\n      }\n      Foundation.Keyboard.handleKey(e, _this, functions);\n    });\n     // end keyboardAccess\n  };\n  /**\n   * Toggles the current dropdown pane.\n   * @param {jQuery} $elem - the current element with a submenu to toggle.\n   * @function\n   * @private\n   */\n  DropdownMenu.prototype._toggle = function($elem){\n    if($elem.hasClass('is-active')){\n      this._hide($elem);\n    }else{\n      this._show($elem);\n    }\n  };\n  /**\n   * Adds an event handler to the body to close any dropdowns on a click.\n   * @function\n   * @private\n   */\n  DropdownMenu.prototype._addBodyHandler = function(){\n    var $body = $('body'),\n        _this = this;\n    $body.not(_this.$element).on('click.zf.dropdownmenu tap.zf.dropdownmenu touchend.zf.dropdownmenu', function(e){\n      _this._hideAll();\n      $body.off('click.zf.dropdownmenu tap.zf.dropdownmenu touchend.zf.dropdownmenu');\n    });\n  };\n//show & hide stuff @private\n  /**\n   * Opens a dropdown pane, and checks for collisions first.\n   * @param {jQuery} $elem - current element with a submenu to show\n   * @function\n   * @private\n   * @fires DropdownMenu#show\n   */\n  DropdownMenu.prototype._show = function($elem){\n    this._hideOthers($elem);\n    $elem.focus();\n    // console.log('showing some stuff', $elem.find('li:first-child'));\n    var $sub = $elem.children('[data-submenu]:first-of-type');\n    $elem.addClass('is-active');\n    $sub.css('visibility', 'hidden').addClass('js-dropdown-active')\n        .attr('aria-hidden', false);\n\n\n    //break this into own function\n    var clear = Foundation.Box.ImNotTouchingYou($sub, null, true);\n    if(!clear){\n      if(this.options.alignment === 'left'){\n        $elem.removeClass('opens-left').addClass('opens-right');\n      }else{\n        $elem.removeClass('opens-right').addClass('opens-left');\n      }\n      this.changed = true;\n\n      // still not clear, small screen, add inner class\n      clear = Foundation.Box.ImNotTouchingYou($sub, null, true);\n      if (!clear) {\n        $elem.removeClass('opens-left opens-right').addClass('opens-inner');\n        this.changed = true;\n      }\n    }\n    $sub.css('visibility', '');\n    /**\n     * Fires when the new dropdown pane is visible.\n     * @event DropdownMenu#show\n     */\n    this.$element.trigger('show.zf.dropdownmenu', [$elem]);\n  };\n  /**\n   * Hides a single, currently open dropdown pane.\n   * @function\n   * @param {jQuery} $elem - element with a submenu to hide\n   * @private\n   */\n  DropdownMenu.prototype._hide = function($elem){\n    this._hideSome($elem);\n  };\n  /**\n   * Hides currently open dropdown panes from a jQuery collection passed by other functions.\n   * Resets the position classes if the element was mutated due to a collision.\n   * @function\n   * @param {jQuery} $elems - element(s) with a submenu to hide\n   * @private\n   * @fires DropdownMenu#hide\n   */\n  DropdownMenu.prototype._hideSome = function($elems){\n    if($elems.length){\n      // if($elems.hasClass('first-sub')){\n      //   console.log('true');\n      //   $elems.blur();\n      // }\n      $elems.removeClass('is-active opens-inner').data('isClick', false)\n\n            .find('.is-active').removeClass('is-active').data('isClick', false).end()\n\n            .find('.js-dropdown-active').removeClass('js-dropdown-active')\n                                        .attr('aria-hidden', true);\n      $elems.parent('.has-submenu').removeClass('is-active');\n      if(this.changed){\n        //remove position class\n        if(this.options.alignment === 'left'){\n          $elems.find('.opens-left').removeClass('opens-left').addClass('opens-right');\n        }else{\n          $elems.find('.opens-right').removeClass('opens-right').addClass('opens-left');\n        }\n      }\n      /**\n       * Fires when the open menus are closed.\n       * @event DropdownMenu#hide\n       */\n      this.$element.trigger('hide.zf.dropdownmenu');\n    }\n  };\n  /**\n   * Hides a submenu's siblings.\n   * @param {jQuery} $elem - the element that should remain open.\n   * @function\n   * @private\n   */\n  DropdownMenu.prototype._hideOthers = function($elem){\n    this._hideSome($elem.siblings('.has-submenu.is-active'));\n  };\n  /**\n   * Hides everything.\n   * @function\n   */\n  DropdownMenu.prototype._hideAll = function(){\n    this._hideSome(this.$element);\n  };\n  /**\n   * Destroys the plugin.\n   * @function\n   */\n  DropdownMenu.prototype.destroy = function() {\n    this._hideAll();\n    this.$element\n        .removeData('zf-plugin')\n        .find('li')\n        .removeClass('js-dropdown-nohover is-right-arrow is-left-arrow opens-left opens-inner opens-right')\n        .add('a').off('.zf.dropdownmenu')\n        .end().find('ul').removeClass('first-sub');\n    Foundation.Nest.Burn(this.$element, 'dropdown');\n    Foundation.unregisterPlugin(this);\n  };\n\n  Foundation.plugin(DropdownMenu, 'DropdownMenu');\n\n  var checkClass = function($elem){\n    return $elem.hasClass('is-active');\n  };\n\n}(Foundation, jQuery);\n\n!function(Foundation, $) {\n  'use strict';\n\n  /**\n   * Creates a new instance of Equalizer.\n   * @class\n   * @fires Equalizer#init\n   * @param {Object} element - jQuery object to add the trigger to.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n  function Equalizer(element, options) {\n    this.$element = element;\n    this.options  = $.extend({}, Equalizer.defaults, this.$element.data(), options);\n    this.$window  = $(window);\n    this.name     = 'equalizer';\n    this.attr     = 'data-equalizer';\n\n    this._init();\n    this._events();\n\n    Foundation.registerPlugin(this);\n  }\n\n  /**\n   * Default settings for plugin\n   */\n  Equalizer.defaults = {\n    /**\n     * Enable height equalization when stacked on smaller screens.\n     * @option\n     * @example true\n     */\n    equalizeOnStack: true,\n    /**\n     * Amount of time, in ms, to debounce the size checking/equalization. Lower times mean smoother transitions/less performance on mobile.\n     * @option\n     * @example 50\n     */\n    throttleInterval: 50\n  };\n\n  /**\n   * Initializes the Equalizer plugin and calls functions to get equalizer functioning on load.\n   * @private\n   */\n  Equalizer.prototype._init = function() {\n    this._reflow();\n  };\n\n  /**\n   * Initializes events for Equalizer.\n   * @private\n   */\n  Equalizer.prototype._events = function() {\n    var self = this;\n\n    this.$window\n      .off('.equalizer')\n      .on('resize.fndtn.equalizer', Foundation.util.throttle(function () {\n        self._reflow();\n      }, self.options.throttleInterval));\n  };\n\n  /**\n   * A noop version for the plugin\n   * @private\n   */\n  Equalizer.prototype._killswitch = function() {\n    return;\n  };\n  /**\n   * Calls necessary functions to update Equalizer upon DOM change\n   * @private\n   */\n  Equalizer.prototype._reflow = function() {\n    var self = this;\n\n    $('[' + this.attr + ']').each(function() {\n      var $eqParent       = $(this),\n          adjustedHeights = [],\n          $images = $eqParent.find('img');\n\n      if ($images.length) {\n        Foundation.onImagesLoaded($images, function() {\n          adjustedHeights = self.getHeights($eqParent);\n          self.applyHeight($eqParent, adjustedHeights);\n        });\n      }\n      else {\n        adjustedHeights = self.getHeights($eqParent);\n        self.applyHeight($eqParent, adjustedHeights);\n      }\n    });\n  };\n  /**\n   * Finds the outer heights of children contained within an Equalizer parent and returns them in an array\n   * @param {Object} $eqParent A jQuery instance of an Equalizer container\n   * @returns {Array} heights An array of heights of children within Equalizer container\n   */\n  Equalizer.prototype.getHeights = function($eqParent) {\n    var eqGroupName = $eqParent.data('equalizer'),\n        eqGroup     = eqGroupName ? $eqParent.find('[' + this.attr + '-watch=\"' + eqGroupName + '\"]:visible') : $eqParent.find('[' + this.attr + '-watch]:visible'),\n        heights;\n\n    eqGroup.height('inherit');\n    heights = eqGroup.map(function () { return $(this).outerHeight(false);}).get();\n    console.log(heights);\n    return heights;\n  };\n  /**\n   * Changes the CSS height property of each child in an Equalizer parent to match the tallest\n   * @param {Object} $eqParent - A jQuery instance of an Equalizer container\n   * @param {array} heights - An array of heights of children within Equalizer container\n   * @fires Equalizer#preEqualized\n   * @fires Equalizer#postEqualized\n   */\n  Equalizer.prototype.applyHeight = function($eqParent, heights) {\n    var eqGroupName = $eqParent.data('equalizer'),\n        eqGroup     = eqGroupName ? $eqParent.find('['+this.attr+'-watch=\"'+eqGroupName+'\"]:visible') : $eqParent.find('['+this.attr+'-watch]:visible'),\n        max         = Math.max.apply(null, heights);\n\n    /**\n     * Fires before the heights are applied\n     * @event Equalizer#preEqualized\n     */\n    $eqParent.trigger('preEqualized.zf.Equalizer');\n\n    // for now, apply the max height found in the array\n    for (var i = 0; i < eqGroup.length; i++) {\n      $(eqGroup[i]).css('height', max);\n    }\n    // console.log(max);\n    /**\n     * Fires when the heights have been applied\n     * @event Equalizer#postEqualized\n     */\n    $eqParent.trigger('postEqualized.zf.Equalizer');\n  };\n  /**\n   * Destroys an instance of Equalizer.\n   * @function\n   */\n  Equalizer.prototype.destroy = function(){\n    //TODO this.\n  };\n\n  Foundation.plugin(Equalizer, 'Equalizer');\n\n  // Exports for AMD/Browserify\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined')\n    module.exports = Equalizer;\n  if (typeof define === 'function')\n    define(['foundation'], function() {\n      return Equalizer;\n    });\n\n}(Foundation, jQuery);\n\n/**\n * Interchange module.\n * @module foundation.interchange\n * @requires foundation.util.mediaQuery\n * @requires foundation.util.timerAndImageLoader\n */\n!function(Foundation, $) {\n  'use strict';\n\n  /**\n   * Creates a new instance of Interchange.\n   * @class\n   * @fires Interchange#init\n   * @param {Object} element - jQuery object to add the trigger to.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n  function Interchange(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, Interchange.defaults, options);\n    this.rules = [];\n    this.currentPath = '';\n\n    this._init();\n    this._events();\n\n    Foundation.registerPlugin(this);\n  }\n\n  /**\n   * Default settings for plugin\n   */\n  Interchange.defaults = {\n    /**\n     * Rules to be applied to Interchange elements. Set with the `data-interchange` array notation.\n     * @option\n     */\n    rules: null\n  };\n\n  Interchange.SPECIAL_QUERIES = {\n    'landscape': 'screen and (orientation: landscape)',\n    'portrait': 'screen and (orientation: portrait)',\n    'retina': 'only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min-device-pixel-ratio: 2), only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx)'\n  };\n\n  /**\n   * Initializes the Interchange plugin and calls functions to get interchange functioning on load.\n   * @function\n   * @private\n   */\n  Interchange.prototype._init = function() {\n    this._addBreakpoints();\n    this._generateRules();\n    this._reflow();\n  };\n\n  /**\n   * Initializes events for Interchange.\n   * @function\n   * @private\n   */\n  Interchange.prototype._events = function() {\n    $(window).on('resize.fndtn.interchange', Foundation.util.throttle(this._reflow.bind(this), 50));\n  };\n\n  /**\n   * Calls necessary functions to update Interchange upon DOM change\n   * @function\n   * @private\n   */\n  Interchange.prototype._reflow = function() {\n    var match;\n\n    // Iterate through each rule, but only save the last match\n    for (var i in this.rules) {\n      var rule = this.rules[i];\n\n      if (window.matchMedia(rule.query).matches) {\n        match = rule;\n      }\n    }\n\n    if (match) {\n      this.replace(match.path);\n    }\n  };\n\n  /**\n   * Gets the Foundation breakpoints and adds them to the Interchange.SPECIAL_QUERIES object.\n   * @function\n   * @private\n   */\n  Interchange.prototype._addBreakpoints = function() {\n    for (var i in Foundation.MediaQuery.queries) {\n      var query = Foundation.MediaQuery.queries[i];\n      Interchange.SPECIAL_QUERIES[query.name] = query.value;\n    }\n  };\n\n  /**\n   * Checks the Interchange element for the provided media query + content pairings\n   * @function\n   * @private\n   * @param {Object} element - jQuery object that is an Interchange instance\n   * @returns {Array} scenarios - Array of objects that have 'mq' and 'path' keys with corresponding keys\n   */\n  Interchange.prototype._generateRules = function() {\n    var rulesList = [];\n    var rules;\n\n    if (this.options.rules) {\n      rules = this.options.rules;\n    }\n    else {\n      rules = this.$element.data('interchange').match(/\\[.*?\\]/g);\n    }\n\n    for (var i in rules) {\n      var rule = rules[i].slice(1, -1).split(', ');\n      var path = rule.slice(0, -1).join('');\n      var query = rule[rule.length - 1];\n\n      if (Interchange.SPECIAL_QUERIES[query]) {\n        query = Interchange.SPECIAL_QUERIES[query];\n      }\n\n      rulesList.push({\n        path: path,\n        query: query\n      });\n    }\n\n    this.rules = rulesList;\n  };\n\n  /**\n   * Update the `src` property of an image, or change the HTML of a container, to the specified path.\n   * @function\n   * @param {String} path - Path to the image or HTML partial.\n   * @fires Interchange#replaced\n   */\n  Interchange.prototype.replace = function(path) {\n    if (this.currentPath === path) return;\n\n    var _this = this;\n\n    // Replacing images\n    if (this.$element[0].nodeName === 'IMG') {\n      this.$element.attr('src', path).load(function() {\n        _this.$element.trigger('replaced.zf.interchange');\n        _this.currentPath = path;\n      });\n    }\n    // Replacing background images\n    else if (path.match(/\\.(gif|jpg|jpeg|tiff|png)([?#].*)?/i)) {\n      this.$element.css({ 'background-image': 'url('+path+')' });\n    }\n    // Replacing HTML\n    else {\n      $.get(path, function(response) {\n        _this.$element.html(response);\n        _this.$element.trigger('replaced.zf.interchange');\n        _this.currentPath = path;\n      });\n    }\n  };\n  /**\n   * Destroys an instance of interchange.\n   * @function\n   */\n  Interchange.prototype.destroy = function(){\n    //TODO this.\n  };\n  Foundation.plugin(Interchange, 'Interchange');\n\n  // Exports for AMD/Browserify\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined')\n    module.exports = Interchange;\n  if (typeof define === 'function')\n    define(['foundation'], function() {\n      return Interchange;\n    });\n\n}(Foundation, jQuery);\n\n/**\n * Magellan module.\n * @module foundation.magellan\n */\n!function(Foundation, $) {\n  'use strict';\n\n  /**\n   * Creates a new instance of Magellan.\n   * @class\n   * @fires Magellan#init\n   * @param {Object} element - jQuery object to add the trigger to.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n  function Magellan(element, options) {\n    this.$element = element;\n    this.options  = $.extend({}, Magellan.defaults, options);\n\n    this._init();\n\n    Foundation.registerPlugin(this);\n  }\n\n  /**\n   * Default settings for plugin\n   */\n  Magellan.defaults = {\n    /**\n     * Amount of time, in ms, the animated scrolling should take between locations.\n     * @option\n     * @example 500\n     */\n    animationDuration: 500,\n    /**\n     * Animation style to use when scrolling between locations.\n     * @option\n     * @example 'ease-in-out'\n     */\n    animationEasing: 'linear',\n    /**\n     * Number of pixels to use as a marker for location changes.\n     * @option\n     * @example 50\n     */\n    threshold: 50,\n    /**\n     * Class applied to the active locations link on the magellan container.\n     * @option\n     * @example 'active'\n     */\n    activeClass: 'active',\n    /**\n     * Allows the script to manipulate the url of the current page, and if supported, alter the history.\n     * @option\n     * @example true\n     */\n    deepLinking: false\n  };\n\n  /**\n   * Initializes the Magellan plugin and calls functions to get equalizer functioning on load.\n   * @private\n   */\n  Magellan.prototype._init = function() {\n    var id = this.$element[0].id || Foundation.GetYoDigits(6, 'magellan'),\n        _this = this;\n    this.$targets = $('[data-magellan-target]');\n    this.$links = this.$element.find('a');\n    this.$element.attr({\n      'data-resize': id,\n      'data-scroll': id,\n      'id': id\n    });\n    this.$active = $();\n    this.scrollPos = parseInt(window.pageYOffset, 10);\n\n    this._events();\n  };\n  /**\n   * Calculates an array of pixel values that are the demarcation lines between locations on the page.\n   * Can be invoked if new elements are added or the size of a location changes.\n   * @function\n   */\n  Magellan.prototype.calcPoints = function(){\n    var _this = this,\n        body = document.body,\n        html = document.documentElement;\n\n    this.points = [];\n    this.winHeight = Math.round(Math.max(window.innerHeight, document.body.clientHeight));\n    this.docHeight = Math.round(Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight));\n\n    this.$targets.each(function(){\n      var $tar = $(this),\n          pt = Math.round($tar.offset().top - _this.options.threshold);\n      $tar.targetPoint = pt;\n      _this.points.push(pt);\n    });\n  };\n  /**\n   * Initializes events for Magellan.\n   * @private\n   */\n  Magellan.prototype._events = function() {\n    var _this = this,\n        $body = $('html, body'),\n        opts = {\n          duration: _this.options.animationDuration,\n          easing:   _this.options.animationEasing\n        };\n\n    $(window).one('load', function(){\n      _this.calcPoints();\n      _this._updateActive();\n    });\n\n    this.$element.on({\n      'resizeme.zf.trigger': this.reflow.bind(this),\n      'scrollme.zf.trigger': this._updateActive.bind(this)\n    }).on('click.zf.magellan', 'a[href^=\"#\"]', function(e) {\n        e.preventDefault();\n        var arrival   = this.getAttribute('href'),\n            scrollPos = $(arrival).offset().top - _this.options.threshold / 2;\n\n        // requestAnimationFrame is disabled for this plugin currently\n        // Foundation.Move(_this.options.animationDuration, $body, function(){\n          $body.stop(true).animate({\n            scrollTop: scrollPos\n          }, opts);\n        });\n      // });\n  };\n  /**\n   * Calls necessary functions to update Magellan upon DOM change\n   * @function\n   */\n  Magellan.prototype.reflow = function(){\n    this.calcPoints();\n    this._updateActive();\n  };\n  /**\n   * Updates the visibility of an active location link, and updates the url hash for the page, if deepLinking enabled.\n   * @private\n   * @function\n   * @fires Magellan#update\n   */\n  Magellan.prototype._updateActive = function(/*evt, elem, scrollPos*/){\n    var winPos = /*scrollPos ||*/ parseInt(window.pageYOffset, 10),\n        curIdx;\n\n    if(winPos + this.winHeight === this.docHeight){ curIdx = this.points.length - 1; }\n    else if(winPos < this.points[0]){ curIdx = 0; }\n    else{\n      var isDown = this.scrollPos < winPos,\n          _this = this,\n          curVisible = this.points.filter(function(p, i){\n            return isDown ? p <= winPos : p - _this.options.threshold <= winPos;//&& winPos >= _this.points[i -1] - _this.options.threshold;\n          });\n      curIdx = curVisible.length ? curVisible.length - 1 : 0;\n    }\n\n    this.$active.removeClass(this.options.activeClass);\n    this.$active = this.$links.eq(curIdx).addClass(this.options.activeClass);\n\n    if(this.options.deepLinking){\n      var hash = this.$active[0].getAttribute('href');\n      if(window.history.pushState){\n        window.history.pushState(null, null, hash);\n      }else{\n        window.location.hash = hash;\n      }\n    }\n\n    this.scrollPos = winPos;\n    /**\n     * Fires when magellan is finished updating to the new active element.\n     * @event Magellan#update\n     */\n    this.$element.trigger('update.zf.magellan', [this.$active]);\n  };\n  /**\n   * Destroys an instance of Magellan and resets the url of the window.\n   * @function\n   */\n  Magellan.prototype.destroy = function(){\n    this.$element.off('.zf.trigger .zf.magellan')\n        .find('.' + this.options.activeClass).removeClass(this.options.activeClass);\n\n    var hash = this.$active[0].getAttribute('href');\n\n    window.location.hash.replace(hash, '');\n\n    Foundation.unregisterPlugin(this);\n  };\n  Foundation.plugin(Magellan, 'Magellan');\n\n  // Exports for AMD/Browserify\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined')\n    module.exports = Magellan;\n  if (typeof define === 'function')\n    define(['foundation'], function() {\n      return Magellan;\n    });\n\n}(Foundation, jQuery);\n\n/**\n * OffCanvas module.\n * @module foundation.offcanvas\n * @requires foundation.util.triggers\n * @requires foundation.util.motion\n */\n!function($, Foundation) {\n\n'use strict';\n\n/**\n * Creates a new instance of an off-canvas wrapper.\n * @class\n * @fires OffCanvas#init\n * @param {Object} element - jQuery object to initialize.\n * @param {Object} options - Overrides to the default plugin settings.\n */\nfunction OffCanvas(element, options) {\n  this.$element = element;\n  this.options = $.extend({}, OffCanvas.defaults, this.$element.data(), options);\n  this.$lastTrigger = $();\n\n  this._init();\n  this._events();\n\n  Foundation.registerPlugin(this);\n}\n\nOffCanvas.defaults = {\n  /**\n   * Allow the user to click outside of the menu to close it.\n   * @option\n   * @example true\n   */\n  closeOnClick: true,\n  /**\n   * Amount of time in ms the open and close transition requires. If none selected, pulls from body style.\n   * @option\n   * @example 500\n   */\n  transitionTime: 0,\n  /**\n   * Direction the offcanvas opens from. Determines class applied to body.\n   * @option\n   * @example left\n   */\n  position: 'left',\n  /**\n   * Force the page to scroll to top on open.\n   */\n  forceTop: true,\n  /**\n   * Allow the offcanvas to be sticky while open. Does nothing if Sass option `$maincontent-prevent-scroll === true`.\n   * Performance in Safari OSX/iOS is not great.\n   */\n  // isSticky: false,\n  /**\n   * Allow the offcanvas to remain open for certain breakpoints. Can be used with `isSticky`.\n   * @option\n   * @example false\n   */\n  isRevealed: false,\n  /**\n   * Breakpoint at which to reveal. JS will use a RegExp to target standard classes, if changing classnames, pass your class @`revealClass`.\n   * @option\n   * @example reveal-for-large\n   */\n  revealOn: null,\n  /**\n   * Force focus to the offcanvas on open. If true, will focus the opening trigger on close.\n   * @option\n   * @example true\n   */\n  autoFocus: true,\n  /**\n   * Class used to force an offcanvas to remain open. Foundation defaults for this are `reveal-for-large` & `reveal-for-medium`.\n   * @option\n   * TODO improve the regex testing for this.\n   * @example reveal-for-large\n   */\n  revealClass: 'reveal-for-'\n};\n\n/**\n * Initializes the off-canvas wrapper by adding the exit overlay (if needed).\n * @function\n * @private\n */\nOffCanvas.prototype._init = function() {\n  var id = this.$element.attr('id');\n\n  this.$element.attr('aria-hidden', 'true');\n\n  // Find triggers that affect this element and add aria-expanded to them\n  $(document)\n    .find('[data-open=\"'+id+'\"], [data-close=\"'+id+'\"], [data-toggle=\"'+id+'\"]')\n    .attr('aria-expanded', 'false')\n    .attr('aria-controls', id);\n\n  // Add a close trigger over the body if necessary\n  if (this.options.closeOnClick){\n    if($('.js-off-canvas-exit').length){\n      this.$exiter = $('.js-off-canvas-exit');\n    }else{\n      var exiter = document.createElement('div');\n      exiter.setAttribute('class', 'js-off-canvas-exit');\n      $('[data-off-canvas-content]').append(exiter);\n\n      this.$exiter = $(exiter);\n    }\n  }\n\n  this.options.isRevealed = this.options.isRevealed || new RegExp(this.options.revealClass, 'g').test(this.$element[0].className);\n\n  if(this.options.isRevealed){\n    this.options.revealOn = this.options.revealOn || this.$element[0].className.match(/(reveal-for-medium|reveal-for-large)/g)[0].split('-')[2];\n    this._setMQChecker();\n  }\n  if(!this.options.transitionTime){\n    this.options.transitionTime = parseFloat(window.getComputedStyle($('[data-off-canvas-wrapper]')[0]).transitionDuration) * 1000;\n  }\n};\n\n/**\n * Adds event handlers to the off-canvas wrapper and the exit overlay.\n * @function\n * @private\n */\nOffCanvas.prototype._events = function() {\n  this.$element.on({\n    'open.zf.trigger': this.open.bind(this),\n    'close.zf.trigger': this.close.bind(this),\n    'toggle.zf.trigger': this.toggle.bind(this),\n    'keydown.zf.offcanvas': this._handleKeyboard.bind(this)\n  });\n\n  if (this.$exiter.length) {\n    var _this = this;\n    this.$exiter.on({'click.zf.offcanvas': this.close.bind(this)});\n  }\n};\n/**\n * Applies event listener for elements that will reveal at certain breakpoints.\n * @private\n */\nOffCanvas.prototype._setMQChecker = function(){\n  var _this = this;\n\n  $(window).on('changed.zf.mediaquery', function(){\n    if(Foundation.MediaQuery.atLeast(_this.options.revealOn)){\n      _this.reveal(true);\n    }else{\n      _this.reveal(false);\n    }\n  }).one('load.zf.offcanvas', function(){\n    if(Foundation.MediaQuery.atLeast(_this.options.revealOn)){\n      _this.reveal(true);\n    }\n  });\n};\n/**\n * Handles the revealing/hiding the off-canvas at breakpoints, not the same as open.\n * @param {Boolean} isRevealed - true if element should be revealed.\n * @function\n */\nOffCanvas.prototype.reveal = function(isRevealed){\n  var $closer = this.$element.find('[data-close]');\n  if(isRevealed){\n    // if(!this.options.forceTop){\n    //   var scrollPos = parseInt(window.pageYOffset);\n    //   this.$element[0].style.transform = 'translate(0,' + scrollPos + 'px)';\n    // }\n    // if(this.options.isSticky){ this._stick(); }\n    if($closer.length){ $closer.hide(); }\n  }else{\n    // if(this.options.isSticky || !this.options.forceTop){\n    //   this.$element[0].style.transform = '';\n    //   $(window).off('scroll.zf.offcanvas');\n    // }\n    if($closer.length){\n      $closer.show();\n    }\n  }\n};\n\n/**\n * Opens the off-canvas menu.\n * @function\n * @param {Object} event - Event object passed from listener.\n * @param {jQuery} trigger - element that triggered the off-canvas to open.\n * @fires OffCanvas#opened\n */\nOffCanvas.prototype.open = function(event, trigger) {\n  if (this.$element.hasClass('is-open')){ return; }\n  var _this = this,\n      $body = $(document.body);\n  $('body').scrollTop(0);\n  // window.pageYOffset = 0;\n\n  // if(!this.options.forceTop){\n  //   var scrollPos = parseInt(window.pageYOffset);\n  //   this.$element[0].style.transform = 'translate(0,' + scrollPos + 'px)';\n  //   if(this.$exiter.length){\n  //     this.$exiter[0].style.transform = 'translate(0,' + scrollPos + 'px)';\n  //   }\n  // }\n  /**\n   * Fires when the off-canvas menu opens.\n   * @event OffCanvas#opened\n   */\n  Foundation.Move(this.options.transitionTime, this.$element, function(){\n    $('[data-off-canvas-wrapper]').addClass('is-off-canvas-open is-open-'+ _this.options.position);\n\n    _this.$element\n      .addClass('is-open')\n      .attr('aria-hidden', 'false')\n      .trigger('opened.zf.offcanvas');\n\n    // if(_this.options.isSticky){\n    //   _this._stick();\n    // }\n  });\n  if(trigger){\n    this.$lastTrigger = trigger.attr('aria-expanded', 'true');\n  }\n  if(this.options.autoFocus){\n    this.$element.one('finished.zf.animate', function(){\n      _this.$element.find('a, button').eq(0).focus();\n    });\n  }\n};\n/**\n * Allows the offcanvas to appear sticky utilizing translate properties.\n * @private\n */\n// OffCanvas.prototype._stick = function(){\n//   var elStyle = this.$element[0].style;\n//\n//   if(this.options.closeOnClick){\n//     var exitStyle = this.$exiter[0].style;\n//   }\n//\n//   $(window).on('scroll.zf.offcanvas', function(e){\n//     console.log(e);\n//     var pageY = window.pageYOffset;\n//     elStyle.transform = 'translate(0,' + pageY + 'px)';\n//     if(exitStyle !== undefined){ exitStyle.transform = 'translate(0,' + pageY + 'px)'; }\n//   });\n//   // this.$element.trigger('stuck.zf.offcanvas');\n// };\n/**\n * Closes the off-canvas menu.\n * @function\n * @fires OffCanvas#closed\n */\nOffCanvas.prototype.close = function() {\n  if(!this.$element.hasClass('is-open')){ return; }\n\n  var _this = this;\n\n   Foundation.Move(this.options.transitionTime, this.$element, function(){\n    $('[data-off-canvas-wrapper]').removeClass('is-off-canvas-open is-open-'+_this.options.position);\n\n    _this.$element.removeClass('is-open');\n    // Foundation._reflow();\n  });\n  this.$element.attr('aria-hidden', 'true')\n    /**\n     * Fires when the off-canvas menu opens.\n     * @event OffCanvas#closed\n     */\n      .trigger('closed.zf.offcanvas');\n  // if(_this.options.isSticky || !_this.options.forceTop){\n  //   setTimeout(function(){\n  //     _this.$element[0].style.transform = '';\n  //     $(window).off('scroll.zf.offcanvas');\n  //   }, this.options.transitionTime);\n  // }\n\n  this.$lastTrigger.attr('aria-expanded', 'false');\n};\n\n/**\n * Toggles the off-canvas menu open or closed.\n * @function\n * @param {Object} event - Event object passed from listener.\n * @param {jQuery} trigger - element that triggered the off-canvas to open.\n */\nOffCanvas.prototype.toggle = function(event, trigger) {\n  if (this.$element.hasClass('is-open')) {\n    this.close(event, trigger);\n  }\n  else {\n    this.open(event, trigger);\n  }\n};\n\n/**\n * Handles keyboard input when detected. When the escape key is pressed, the off-canvas menu closes, and focus is restored to the element that opened the menu.\n * @function\n * @private\n */\nOffCanvas.prototype._handleKeyboard = function(event) {\n  if (event.which !== 27) return;\n\n  event.stopPropagation();\n  event.preventDefault();\n  this.close();\n  this.$lastTrigger.focus();\n};\n/**\n * Destroys the offcanvas plugin.\n * @function\n */\nOffCanvas.prototype.destroy = function(){\n  //TODO make this...\n};\n\nFoundation.plugin(OffCanvas, 'OffCanvas');\n\n}(jQuery, Foundation);\n\n/**\n * Orbit module.\n * @module foundation.orbit\n * @requires foundation.util.keyboard\n * @requires foundation.util.motion\n * @requires foundation.util.timerAndImageLoader\n * @requires foundation.util.touch\n */\n!function($, Foundation){\n  'use strict';\n  /**\n   * Creates a new instance of an orbit carousel.\n   * @class\n   * @param {jQuery} element - jQuery object to make into an accordion menu.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n  function Orbit(element, options){\n    this.$element = element;\n    this.options = $.extend({}, Orbit.defaults, this.$element.data(), options);\n\n    this._init();\n\n    Foundation.registerPlugin(this);\n    Foundation.Keyboard.register('Orbit', {\n        'ltr': {\n          'ARROW_RIGHT': 'next',\n          'ARROW_LEFT': 'previous'\n        },\n        'rtl': {\n          'ARROW_LEFT': 'next',\n          'ARROW_RIGHT': 'previous'\n        }\n    });\n  }\n  Orbit.defaults = {\n    /**\n     * Tells the JS to loadBullets.\n     * @option\n     * @example true\n     */\n    bullets: true,\n    /**\n     * Tells the JS to apply event listeners to nav buttons\n     * @option\n     * @example true\n     */\n    navButtons: true,\n    /**\n     * motion-ui animation class to apply\n     * @option\n     * @example 'slide-in-right'\n     */\n    animInFromRight: 'slide-in-right',\n    /**\n     * motion-ui animation class to apply\n     * @option\n     * @example 'slide-out-right'\n     */\n    animOutToRight: 'slide-out-right',\n    /**\n     * motion-ui animation class to apply\n     * @option\n     * @example 'slide-in-left'\n     *\n     */\n    animInFromLeft: 'slide-in-left',\n    /**\n     * motion-ui animation class to apply\n     * @option\n     * @example 'slide-out-left'\n     */\n    animOutToLeft: 'slide-out-left',\n    /**\n     * Allows Orbit to automatically animate on page load.\n     * @option\n     * @example true\n     */\n    autoPlay: true,\n    /**\n     * Amount of time, in ms, between slide transitions\n     * @option\n     * @example 5000\n     */\n    timerDelay: 5000,\n    /**\n     * Allows Orbit to infinitely loop through the slides\n     * @option\n     * @example true\n     */\n    infiniteWrap: true,\n    /**\n     * Allows the Orbit slides to bind to swipe events for mobile, requires an additional util library\n     * @option\n     * @example true\n     */\n    swipe: true,\n    /**\n     * Allows the timing function to pause animation on hover.\n     * @option\n     * @example true\n     */\n    pauseOnHover: true,\n    /**\n     * Allows Orbit to bind keyboard events to the slider, to animate frames with arrow keys\n     * @option\n     * @example true\n     */\n    accessible: true,\n    /**\n     * Class applied to the container of Orbit\n     * @option\n     * @example 'orbit-container'\n     */\n    containerClass: 'orbit-container',\n    /**\n     * Class applied to individual slides.\n     * @option\n     * @example 'orbit-slide'\n     */\n    slideClass: 'orbit-slide',\n    /**\n     * Class applied to the bullet container. You're welcome.\n     * @option\n     * @example 'orbit-bullets'\n     */\n    boxOfBullets: 'orbit-bullets',\n    /**\n     * Class applied to the `next` navigation button.\n     * @option\n     * @example 'orbit-next'\n     */\n    nextClass: 'orbit-next',\n    /**\n     * Class applied to the `previous` navigation button.\n     * @option\n     * @example 'orbit-previous'\n     */\n    prevClass: 'orbit-previous'\n  };\n  /**\n   * Initializes the plugin by creating jQuery collections, setting attributes, and starting the animation.\n   * @function\n   * @private\n   */\n  Orbit.prototype._init = function(){\n    this.$wrapper = this.$element.find('.' + this.options.containerClass);\n    this.$slides = this.$element.find('.' + this.options.slideClass);\n    var $images = this.$element.find('img');\n\n    if($images.length){\n      Foundation.onImagesLoaded($images, this._prepareForOrbit.bind(this));\n    }else{\n      this._prepareForOrbit();//hehe\n    }\n\n    if(this.options.bullets){\n      this._loadBullets();\n    }\n\n    this._events();\n\n    if(this.options.autoPlay){\n      this.geoSync();\n    }\n    if(this.options.accessible){ // allow wrapper to be focusable to enable arrow navigation\n      this.$wrapper.attr('tabindex', 0);\n    }\n  };\n  /**\n   * Creates a jQuery collection of bullets, if they are being used.\n   * @function\n   * @private\n   */\n  Orbit.prototype._loadBullets = function(){\n    this.$bullets = this.$element.find('.' + this.options.boxOfBullets).find('button');\n  };\n  /**\n   * Sets a `timer` object on the orbit, and starts the counter for the next slide.\n   * @function\n   */\n  Orbit.prototype.geoSync = function(){\n    var _this = this;\n    this.timer = new Foundation.Timer(\n                      this.$element,\n                      {duration: this.options.timerDelay,\n                       infinite: false},\n                      function(){\n                        _this.changeSlide(true);\n                      });\n    this.timer.start();\n  };\n  /**\n   * Sets wrapper and slide heights for the orbit.\n   * @function\n   * @private\n   */\n  Orbit.prototype._prepareForOrbit = function(){\n    var _this = this;\n    this._setWrapperHeight(function(max){\n      _this._setSlideHeight(max);\n    });\n  };\n  /**\n   * Calulates the height of each slide in the collection, and uses the tallest one for the wrapper height.\n   * @function\n   * @private\n   * @param {Function} cb - a callback function to fire when complete.\n   */\n  Orbit.prototype._setWrapperHeight = function(cb){//rewrite this to `for` loop\n    var max = 0, temp, counter = 0;\n\n    this.$slides.each(function(){\n      temp = this.getBoundingClientRect().height;\n      $(this).attr('data-slide', counter);\n\n      if(counter){//if not the first slide, set css position and display property\n        $(this).css({'position': 'relative', 'display': 'none'});\n      }\n      max = temp > max ? temp : max;\n      counter++;\n    });\n\n    if(counter === this.$slides.length){\n      this.$wrapper.css({'height': max});//only change the wrapper height property once.\n      cb(max);//fire callback with max height dimension.\n    }\n  };\n  /**\n   * Sets the max-height of each slide.\n   * @function\n   * @private\n   */\n  Orbit.prototype._setSlideHeight = function(height){\n    this.$slides.each(function(){\n      $(this).css('max-height', height);\n    });\n  };\n  /**\n   * Adds event listeners to basically everything within the element.\n   * @function\n   * @private\n   */\n  Orbit.prototype._events = function(){\n    var _this = this;\n\n    //***************************************\n    //**Now using custom event - thanks to:**\n    //**      Yohai Ararat of Toronto      **\n    //***************************************\n    if(this.options.swipe){\n      this.$slides.off('swipeleft.zf.orbit swiperight.zf.orbit')\n      .on('swipeleft.zf.orbit', function(e){\n        e.preventDefault();\n        _this.changeSlide(true);\n      }).on('swiperight.zf.orbit', function(e){\n        e.preventDefault();\n        _this.changeSlide(false);\n      });\n    }\n    //***************************************\n\n    if(this.options.autoPlay){\n      this.$slides.on('click.zf.orbit', function(){\n        _this.$element.data('clickedOn', _this.$element.data('clickedOn') ? false : true);\n        _this.timer[_this.$element.data('clickedOn') ? 'pause' : 'start']();\n      });\n      if(this.options.pauseOnHover){\n        this.$element.on('mouseenter.zf.orbit', function(){\n          _this.timer.pause();\n        }).on('mouseleave.zf.orbit', function(){\n          if(!_this.$element.data('clickedOn')){\n            _this.timer.start();\n          }\n        });\n      }\n    }\n\n    if(this.options.navButtons){\n      var $controls = this.$element.find('.' + this.options.nextClass + ', .' + this.options.prevClass);\n      $controls.attr('tabindex', 0)\n        //also need to handle enter/return and spacebar key presses\n               .on('click.zf.orbit touchend.zf.orbit', function(){\n                 _this.changeSlide($(this).hasClass(_this.options.nextClass));\n               });\n    }\n\n    if(this.options.bullets){\n      this.$bullets.on('click.zf.orbit touchend.zf.orbit', function(){\n        if(/is-active/g.test(this.className)){ return false; }//if this is active, kick out of function.\n        var idx = $(this).data('slide'),\n            ltr = idx > _this.$slides.filter('.is-active').data('slide'),\n            $slide = _this.$slides.eq(idx);\n\n        _this.changeSlide(ltr, $slide, idx);\n      });\n    }\n\n    this.$wrapper.add(this.$bullets).on('keydown.zf.orbit', function(e){\n      // handle keyboard event with keyboard util\n      Foundation.Keyboard.handleKey(e, _this, {\n        next: function() {\n          _this.changeSlide(true);\n        },\n        previous: function() {\n          _this.changeSlide(false);\n        },\n        handled: function() { // if bullet is focused, make sure focus moves\n          if ($(e.target).is(_this.$bullets)) {\n            _this.$bullets.filter('.is-active').focus();\n          }\n        }\n      });\n    });\n  };\n  /**\n   * Changes the current slide to a new one.\n   * @function\n   * @param {Boolean} isLTR - flag if the slide should move left to right.\n   * @param {jQuery} chosenSlide - the jQuery element of the slide to show next, if one is selected.\n   * @param {Number} idx - the index of the new slide in its collection, if one chosen.\n   * @fires Orbit#slidechange\n   */\n  Orbit.prototype.changeSlide = function(isLTR, chosenSlide, idx){\n    var $curSlide = this.$slides.filter('.is-active').eq(0);\n\n\n    if(/mui/g.test($curSlide[0].className)){ return false; }//if the slide is currently animating, kick out of the function\n\n    var $firstSlide = this.$slides.first(),\n        $lastSlide = this.$slides.last(),\n        dirIn = isLTR ? 'Right' : 'Left',\n        dirOut = isLTR ? 'Left' : 'Right',\n        _this = this,\n        $newSlide;\n\n    if(!chosenSlide){//most of the time, this will be auto played or clicked from the navButtons.\n      $newSlide = isLTR ? //if wrapping enabled, check to see if there is a `next` or `prev` sibling, if not, select the first or last slide to fill in. if wrapping not enabled, attempt to select `next` or `prev`, if there's nothing there, the function will kick out on next step. CRAZY NESTED TERNARIES!!!!!\n                    (this.options.infiniteWrap ? $curSlide.next('.' + this.options.slideClass).length ? $curSlide.next('.' + this.options.slideClass) : $firstSlide : $curSlide.next('.' + this.options.slideClass))//pick next slide if moving left to right\n                    :\n                    (this.options.infiniteWrap ? $curSlide.prev('.' + this.options.slideClass).length ? $curSlide.prev('.' + this.options.slideClass) : $lastSlide : $curSlide.prev('.' + this.options.slideClass));//pick prev slide if moving right to left\n    }else{\n      $newSlide = chosenSlide;\n    }\n    if($newSlide.length){\n      if(this.options.bullets){\n        idx = idx || this.$slides.index($newSlide);//grab index to update bullets\n        this._updateBullets(idx);\n      }\n      Foundation.Motion.animateIn(\n        $newSlide.addClass('is-active').css({'position': 'absolute', 'top': 0}),\n        this.options['animInFrom' + dirIn],\n        function(){\n          $newSlide.css({'position': 'relative', 'display': 'block'})\n                   .attr('aria-live', 'polite');\n        });\n\n      Foundation.Motion.animateOut(\n        $curSlide.removeClass('is-active'),\n        this.options['animOutTo' + dirOut],\n        function(){\n          $curSlide.removeAttr('aria-live');\n          if(_this.options.autoPlay){\n            _this.timer.restart();\n          }\n          //do stuff?\n          /**\n           * Triggers when the slide has finished animating in.\n           * @event Orbit#slidechange\n           */\n          _this.$element.trigger('slidechange.zf.orbit', [$newSlide]);\n        });\n    }\n  };\n  /**\n   * Updates the active state of the bullets, if displayed.\n   * @function\n   * @private\n   * @param {Number} idx - the index of the current slide.\n   */\n  Orbit.prototype._updateBullets = function(idx){\n    var $oldBullet = this.$element.find('.' + this.options.boxOfBullets)\n                                  .find('.is-active').removeClass('is-active').blur(),\n        span = $oldBullet.find('span:last').detach(),\n        $newBullet = this.$bullets.eq(idx).addClass('is-active').append(span);\n  };\n  /**\n   * Destroys the carousel and hides the element.\n   * @function\n   */\n  Orbit.prototype.destroy = function(){\n    delete this.timer;\n    this.$element.off('.zf.orbit').find('*').off('.zf.orbit').end().hide();\n    Foundation.unregisterPlugin(this);\n  };\n\n  Foundation.plugin(Orbit, 'Orbit');\n\n}(jQuery, window.Foundation);\n\n/**\n * ResponsiveMenu module.\n * @module foundation.responsiveMenu\n * @requires foundation.util.triggers\n * @requires foundation.util.mediaQuery\n * @requires foundation.util.accordionMenu\n * @requires foundation.util.drilldown\n * @requires foundation.util.dropdown-menu\n */\n!function(Foundation, $) {\n  'use strict';\n\n  // The plugin matches the plugin classes with these plugin instances.\n  var MenuPlugins = {\n    dropdown: {\n      cssClass: 'dropdown',\n      plugin: Foundation._plugins['dropdown-menu'] || null\n    },\n    drilldown: {\n      cssClass: 'drilldown',\n      plugin: Foundation._plugins['drilldown'] || null\n    },\n    accordion: {\n      cssClass: 'accordion-menu',\n      plugin: Foundation._plugins['accordion-menu'] || null\n    }\n  };\n\n  // [PH] Media queries\n  var phMedia = {\n    small: '(min-width: 0px)',\n    medium: '(min-width: 640px)'\n  };\n\n  /**\n   * Creates a new instance of a responsive menu.\n   * @class\n   * @fires ResponsiveMenu#init\n   * @param {jQuery} element - jQuery object to make into a dropdown menu.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n  function ResponsiveMenu(element) {\n    this.$element = $(element);\n    this.rules = this.$element.data('responsive-menu');\n    this.currentMq = null;\n    this.currentPlugin = null;\n\n    this._init();\n    this._events();\n\n    Foundation.registerPlugin(this);\n  }\n\n  ResponsiveMenu.defaults = {};\n\n  /**\n   * Initializes the Menu by parsing the classes from the 'data-ResponsiveMenu' attribute on the element.\n   * @function\n   * @private\n   */\n  ResponsiveMenu.prototype._init = function() {\n    var rulesTree = {};\n\n    // Parse rules from \"classes\" in data attribute\n    var rules = this.rules.split(' ');\n\n    // Iterate through every rule found\n    for (var i = 0; i < rules.length; i++) {\n      var rule = rules[i].split('-');\n      var ruleSize = rule.length > 1 ? rule[0] : 'small';\n      var rulePlugin = rule.length > 1 ? rule[1] : rule[0];\n\n      if (MenuPlugins[rulePlugin] !== null) {\n        rulesTree[ruleSize] = MenuPlugins[rulePlugin];\n      }\n    }\n\n    this.rules = rulesTree;\n\n    if (!$.isEmptyObject(rulesTree)) {\n      this._checkMediaQueries();\n    }\n  };\n\n  /**\n   * Initializes events for the Menu.\n   * @function\n   * @private\n   */\n  ResponsiveMenu.prototype._events = function() {\n    var _this = this;\n\n    $(window).on('changed.zf.mediaquery', function() {\n      _this._checkMediaQueries();\n    });\n    // $(window).on('resize.zf.ResponsiveMenu', function() {\n    //   _this._checkMediaQueries();\n    // });\n  };\n\n  /**\n   * Checks the current screen width against available media queries. If the media query has changed, and the plugin needed has changed, the plugins will swap out.\n   * @function\n   * @private\n   */\n  ResponsiveMenu.prototype._checkMediaQueries = function() {\n    var matchedMq, _this = this;\n    // Iterate through each rule and find the last matching rule\n    $.each(this.rules, function(key) {\n      if (Foundation.MediaQuery.atLeast(key)) {\n        matchedMq = key;\n      }\n    });\n\n    // No match? No dice\n    if (!matchedMq) return;\n\n    // Plugin already initialized? We good\n    if (this.currentPlugin instanceof this.rules[matchedMq].plugin) return;\n\n    // Remove existing plugin-specific CSS classes\n    $.each(MenuPlugins, function(key, value) {\n      _this.$element.removeClass(value.cssClass);\n    });\n\n    // Add the CSS class for the new plugin\n    this.$element.addClass(this.rules[matchedMq].cssClass);\n\n    // Create an instance of the new plugin\n    if (this.currentPlugin) this.currentPlugin.destroy();\n    this.currentPlugin = new this.rules[matchedMq].plugin(this.$element, {});\n  };\n\n  /**\n   * Destroys the instance of the current plugin on this element, as well as the window resize handler that switches the plugins out.\n   * @function\n   */\n  ResponsiveMenu.prototype.destroy = function() {\n    this.currentPlugin.destroy();\n    $(window).off('.zf.ResponsiveMenu');\n    Foundation.unregisterPlugin(this);\n  };\n  Foundation.plugin(ResponsiveMenu, 'ResponsiveMenu');\n\n}(Foundation, jQuery);\n\n/**\n * ResponsiveToggle module.\n * @module foundation.responsiveToggle\n * @requires foundation.util.mediaQuery\n */\n!function($, Foundation) {\n\n'use strict';\n\n/**\n * Creates a new instance of Tab Bar.\n * @class\n * @fires ResponsiveToggle#init\n * @param {jQuery} element - jQuery object to attach tab bar functionality to.\n * @param {Object} options - Overrides to the default plugin settings.\n */\nfunction ResponsiveToggle(element, options) {\n  this.$element = $(element);\n  this.options = $.extend({}, ResponsiveToggle.defaults, options);\n\n  this._init();\n  this._events();\n\n  Foundation.registerPlugin(this);\n}\n\nResponsiveToggle.defaults = {\n  /**\n   * The breakpoint after which the menu is always shown, and the tab bar is hidden.\n   * @option\n   * @example 'medium'\n   */\n  hideFor: 'medium'\n};\n\n/**\n * Initializes the tab bar by finding the target element, toggling element, and running update().\n * @function\n * @private\n */\nResponsiveToggle.prototype._init = function() {\n  var targetID = this.$element.data('responsive-toggle');\n  if (!targetID) {\n    console.error('Your tab bar needs an ID of a Menu as the value of data-tab-bar.');\n  }\n\n  this.$targetMenu = $('#'+targetID);\n  this.$toggler = this.$element.find('[data-toggle]');\n\n  this._update();\n};\n\n/**\n * Adds necessary event handlers for the tab bar to work.\n * @function\n * @private\n */\nResponsiveToggle.prototype._events = function() {\n  var _this = this;\n\n  $(window).on('changed.zf.mediaquery', this._update.bind(this));\n\n  this.$toggler.on('click.zf.responsiveToggle', this.toggleMenu.bind(this));\n};\n\n/**\n * Checks the current media query to determine if the tab bar should be visible or hidden.\n * @function\n * @private\n */\nResponsiveToggle.prototype._update = function() {\n  // Mobile\n  if (!Foundation.MediaQuery.atLeast(this.options.hideFor)) {\n    this.$element.show();\n    this.$targetMenu.hide();\n  }\n\n  // Desktop\n  else {\n    this.$element.hide();\n    this.$targetMenu.show();\n  }\n};\n\n/**\n * Toggles the element attached to the tab bar. The toggle only happens if the screen is small enough to allow it.\n * @function\n * @fires ResponsiveToggle#toggled\n */\nResponsiveToggle.prototype.toggleMenu = function() {\n  if (!Foundation.MediaQuery.atLeast(this.options.hideFor)) {\n    this.$targetMenu.toggle(0);\n\n    /**\n     * Fires when the element attached to the tab bar toggles.\n     * @event ResponsiveToggle#toggled\n     */\n    this.$element.trigger('toggled.zf.responsiveToggle');\n  }\n};\nResponsiveToggle.prototype.destroy = function(){\n  //TODO this...\n};\nFoundation.plugin(ResponsiveToggle, 'ResponsiveToggle');\n\n}(jQuery, Foundation);\n\n/**\n * Reveal module.\n * @module foundation.reveal\n * @requires foundation.util.keyboard\n * @requires foundation.util.box\n * @requires foundation.util.triggers\n * @requires foundation.util.mediaQuery\n * @requires foundation.util.motion if using animations\n */\n!function(Foundation, $) {\n  'use strict';\n\n  /**\n   * Creates a new instance of Reveal.\n   * @class\n   * @param {jQuery} element - jQuery object to use for the modal.\n   * @param {Object} options - optional parameters.\n   */\n\n  function Reveal(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, Reveal.defaults, this.$element.data(), options);\n    this._init();\n\n    Foundation.registerPlugin(this);\n    Foundation.Keyboard.register('Reveal', {\n      'ENTER': 'open',\n      'SPACE': 'open',\n      'ESCAPE': 'close',\n      'TAB': 'tab_forward',\n      'SHIFT_TAB': 'tab_backward'\n    });\n  }\n\n  Reveal.defaults = {\n    /**\n     * Motion-UI class to use for animated elements. If none used, defaults to simple show/hide.\n     * @option\n     * @example 'slide-in-left'\n     */\n    animationIn: '',\n    /**\n     * Motion-UI class to use for animated elements. If none used, defaults to simple show/hide.\n     * @option\n     * @example 'slide-out-right'\n     */\n    animationOut: '',\n    /**\n     * Time, in ms, to delay the opening of a modal after a click if no animation used.\n     * @option\n     * @example 10\n     */\n    showDelay: 0,\n    /**\n     * Time, in ms, to delay the closing of a modal after a click if no animation used.\n     * @option\n     * @example 10\n     */\n    hideDelay: 0,\n    /**\n     * Allows a click on the body/overlay to close the modal.\n     * @option\n     * @example true\n     */\n    closeOnClick: true,\n    /**\n     * Allows the modal to close if the user presses the `ESCAPE` key.\n     * @option\n     * @example true\n     */\n    closeOnEsc: true,\n    /**\n     * If true, allows multiple modals to be displayed at once.\n     * @option\n     * @example false\n     */\n    multipleOpened: false,\n    /**\n     * Distance, in pixels, the modal should push down from the top of the screen.\n     * @option\n     * @example 100\n     */\n    vOffset: 100,\n    /**\n     * Distance, in pixels, the modal should push in from the side of the screen.\n     * @option\n     * @example 0\n     */\n    hOffset: 0,\n    /**\n     * Allows the modal to be fullscreen, completely blocking out the rest of the view. JS checks for this as well.\n     * @option\n     * @example false\n     */\n    fullScreen: false,\n    /**\n     * Percentage of screen height the modal should push up from the bottom of the view.\n     * @option\n     * @example 10\n     */\n    btmOffsetPct: 10,\n    /**\n     * Allows the modal to generate an overlay div, which will cover the view when modal opens.\n     * @option\n     * @example true\n     */\n    overlay: true,\n    /**\n     * Allows the modal to remove and reinject markup on close. Should be true if using video elements w/o using provider's api.\n     * @option\n     * @example false\n     */\n    resetOnClose: false\n  };\n\n  /**\n   * Initializes the modal by adding the overlay and close buttons, (if selected).\n   * @private\n   */\n  Reveal.prototype._init = function(){\n    this.id = this.$element.attr('id');\n    this.isActive = false;\n\n    this.$anchor = $('[data-open=\"' + this.id + '\"]').length ? $('[data-open=\"' + this.id + '\"]') : $('[data-toggle=\"' + this.id + '\"]');\n\n    if(this.$anchor.length){\n      var anchorId = this.$anchor[0].id || Foundation.GetYoDigits(6, 'reveal');\n\n      this.$anchor.attr({\n        'aria-controls': this.id,\n        'id': anchorId,\n        'aria-haspopup': true,\n        'tabindex': 0\n      });\n      this.$element.attr({'aria-labelledby': anchorId});\n    }\n\n    // this.options.fullScreen = this.$element.hasClass('full');\n    if(this.options.fullScreen || this.$element.hasClass('full')){\n      this.options.fullScreen = true;\n      this.options.overlay = false;\n    }\n    if(this.options.overlay){\n      this.$overlay = this._makeOverlay(this.id);\n    }\n\n    this.$element.attr({\n        'role': 'dialog',\n        'aria-hidden': true,\n        'data-yeti-box': this.id,\n        'data-resize': this.id\n    });\n\n    this._events();\n  };\n\n  /**\n   * Creates an overlay div to display behind the modal.\n   * @private\n   */\n  Reveal.prototype._makeOverlay = function(id){\n    var $overlay = $('<div></div>')\n                    .addClass('reveal-overlay')\n                    .attr({'tabindex': -1, 'aria-hidden': true})\n                    .appendTo('body');\n    if(this.options.closeOnClick){\n      $overlay.attr({\n        'data-close': id\n      });\n    }\n    return $overlay;\n  };\n\n  /**\n   * Adds event handlers for the modal.\n   * @private\n   */\n  Reveal.prototype._events = function(){\n    var _this = this;\n\n    this.$element.on({\n      'open.zf.trigger': this.open.bind(this),\n      'close.zf.trigger': this.close.bind(this),\n      'toggle.zf.trigger': this.toggle.bind(this),\n      'resizeme.zf.trigger': function(){\n        if(_this.$element.is(':visible')){\n          _this._setPosition(function(){});\n        }\n      }\n    });\n\n    if(this.$anchor.length){\n      this.$anchor.on('keydown.zf.reveal', function(e){\n        if(e.which === 13 || e.which === 32){\n          e.stopPropagation();\n          e.preventDefault();\n          _this.open();\n        }\n      });\n    }\n\n\n    if(this.options.closeOnClick && this.options.overlay){\n      this.$overlay.off('.zf.reveal').on('click.zf.reveal', this.close.bind(this));\n    }\n  };\n  /**\n   * Sets the position of the modal before opening\n   * @param {Function} cb - a callback function to execute when positioning is complete.\n   * @private\n   */\n  Reveal.prototype._setPosition = function(cb){\n    var eleDims = Foundation.Box.GetDimensions(this.$element);\n    var elePos = this.options.fullScreen ? 'reveal full' : (eleDims.height >= (0.5 * eleDims.windowDims.height)) ? 'reveal' : 'center';\n\n    if(elePos === 'reveal full'){\n      console.log('full');\n      //set to full height/width\n      this.$element\n          .offset(Foundation.Box.GetOffsets(this.$element, null, elePos, this.options.vOffset))\n          .css({\n            'height': eleDims.windowDims.height,\n            'width': eleDims.windowDims.width\n          });\n    }else if(!Foundation.MediaQuery.atLeast('medium') || !Foundation.Box.ImNotTouchingYou(this.$element, null, true, false)){\n      //if smaller than medium, resize to 100% width minus any custom L/R margin\n      this.$element\n          .css({\n            'width': eleDims.windowDims.width - (this.options.hOffset * 2)\n          })\n          .offset(Foundation.Box.GetOffsets(this.$element, null, 'center', this.options.vOffset, this.options.hOffset));\n      //flag a boolean so we can reset the size after the element is closed.\n      this.changedSize = true;\n    }else{\n      this.$element\n          .css({\n            'max-height': eleDims.windowDims.height - (this.options.vOffset * (this.options.btmOffsetPct / 100 + 1)),\n            'width': ''\n          })\n          .offset(Foundation.Box.GetOffsets(this.$element, null, elePos, this.options.vOffset));\n          //the max height based on a percentage of vertical offset plus vertical offset\n    }\n\n    cb();\n  };\n\n  /**\n   * Opens the modal controlled by `this.$anchor`, and closes all others by default.\n   * @function\n   * @fires Reveal#closeAll\n   * @fires Reveal#open\n   */\n  Reveal.prototype.open = function(){\n    var _this = this;\n    this.isActive = true;\n    //make element invisible, but remove display: none so we can get size and positioning\n    this.$element\n        .css({'visibility': 'hidden'})\n        .show()\n        .scrollTop(0);\n\n    this._setPosition(function(){\n      _this.$element.hide()\n                   .css({'visibility': ''});\n      if(!_this.options.multipleOpened){\n        /**\n         * Fires immediately before the modal opens.\n         * Closes any other modals that are currently open\n         * @event Reveal#closeAll\n         */\n        _this.$element.trigger('closeme.zf.reveal', _this.id);\n      }\n      if(_this.options.animationIn){\n        if(_this.options.overlay){\n          Foundation.Motion.animateIn(_this.$overlay, 'fade-in', function(){\n            Foundation.Motion.animateIn(_this.$element, _this.options.animationIn, function(){\n            });\n          });\n        }else{\n          Foundation.Motion.animateIn(_this.$element, _this.options.animationIn, function(){\n          });\n        }\n      }else{\n        if(_this.options.overlay){\n          _this.$overlay.show(0, function(){\n            _this.$element.show(_this.options.showDelay, function(){\n            });\n          });\n        }else{\n          _this.$element.show(_this.options.showDelay, function(){\n          });\n        }\n      }\n    });\n\n\n    // handle accessibility\n    this.$element.attr({'aria-hidden': false}).attr('tabindex', -1).focus()\n    /**\n     * Fires when the modal has successfully opened.\n     * @event Reveal#open\n     */\n                 .trigger('open.zf.reveal');\n\n    $('body').addClass('is-reveal-open')\n             .attr({'aria-hidden': (this.options.overlay || this.options.fullScreen) ? true : false});\n    setTimeout(function(){\n      _this._extraHandlers();\n      // Foundation.reflow();\n    }, 0);\n  };\n\n  /**\n   * Adds extra event handlers for the body and window if necessary.\n   * @private\n   */\n  Reveal.prototype._extraHandlers = function(){\n    var _this = this;\n    var visibleFocusableElements = this.$element.find('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]').filter(function() {\n      if (!$(this).is(':visible') || $(this).attr('tabindex') < 0){ return false; }//only have visible elements and those that have a tabindex greater or equal 0\n      return true;\n    });\n\n    if(!this.options.overlay && this.options.closeOnClick && !this.options.fullScreen){\n      $('body').on('click.zf.reveal', function(e){\n        // if()\n          _this.close();\n      });\n    }\n    if(this.options.closeOnEsc){\n      $(window).on('keydown.zf.reveal', function(e){\n        if (visibleFocusableElements.length === 0) { // no focusable elements inside the modal at all, prevent tabbing in general\n          e.preventDefault();\n        }\n        Foundation.Keyboard.handleKey(e, _this, {\n          close: function() {\n            if (this.options.closeOnEsc) {\n              this.close();\n            }\n          }\n        });\n      });\n    }\n\n    // lock focus within modal while tabbing\n    this.$element.on('keydown.zf.reveal', function(e) {\n      var $target = $(this);\n      // handle keyboard event with keyboard util\n      Foundation.Keyboard.handleKey(e, _this, {\n        tab_forward: function() {\n          if (this.$element.find(':focus').is(visibleFocusableElements.eq(-1))) { // left modal downwards, setting focus to first element\n            visibleFocusableElements.eq(0).focus();\n            e.preventDefault();\n          }\n        },\n        tab_backward: function() {\n          if (this.$element.find(':focus').is(visibleFocusableElements.eq(0)) || this.$element.is(':focus')) { // left modal upwards, setting focus to last element\n            visibleFocusableElements.eq(-1).focus();\n            e.preventDefault();\n          }\n        },\n        open: function() {\n          if ($target.is(visibleFocusableElements)) { // dont't trigger if acual element has focus (i.e. inputs, links, ...)\n            this.open();\n          }\n        },\n        close: function() {\n          if (this.options.closeOnEsc) {\n            this.close();\n          }\n        }\n      });\n      if (visibleFocusableElements.length === 0) { // no focusable elements inside the modal at all, prevent tabbing in general\n        e.preventDefault();\n      }\n    });\n\n  };\n\n  /**\n   * Closes the modal.\n   * @function\n   * @fires Reveal#closed\n   */\n  Reveal.prototype.close = function(){\n    if(!this.isActive || !this.$element.is(':visible')){\n      return false;\n    }\n    var _this = this;\n\n    if(this.options.animationOut){\n      Foundation.Motion.animateOut(this.$element, this.options.animationOut, function(){\n        if(_this.options.overlay){\n          Foundation.Motion.animateOut(_this.$overlay, 'fade-out', function(){\n          });\n        }\n      });\n    }else{\n      this.$element.hide(_this.options.hideDelay, function(){\n        if(_this.options.overlay){\n          _this.$overlay.hide(0, function(){\n          });\n        }\n      });\n    }\n    //conditionals to remove extra event listeners added on open\n    if(this.options.closeOnEsc){\n      $(window).off('keydown.zf.reveal');\n    }\n    if(!this.options.overlay && this.options.closeOnClick){\n      $('body').off('click.zf.reveal');\n    }\n    this.$element.off('keydown.zf.reveal');\n\n    //if the modal changed size, reset it\n    if(this.changedSize){\n      this.$element.css({\n        'height': '',\n        'width': ''\n      });\n    }\n\n    $('body').removeClass('is-reveal-open').attr({'aria-hidden': false, 'tabindex': ''});\n\n    /**\n    * Resets the modal content\n    * This prevents a running video to keep going in the background\n    */\n    if(this.options.resetOnClose) {\n      this.$element.html(this.$element.html());\n    }\n\n    this.isActive = false;\n    this.$element.attr({'aria-hidden': true})\n    /**\n     * Fires when the modal is done closing.\n     * @event Reveal#closed\n     */\n                 .trigger('closed.zf.reveal');\n  };\n  /**\n   * Toggles the open/closed state of a modal.\n   * @function\n   */\n  Reveal.prototype.toggle = function(){\n    if(this.isActive){\n      this.close();\n    }else{\n      this.open();\n    }\n  };\n\n  /**\n   * Destroys an instance of a modal.\n   * @function\n   */\n  Reveal.prototype.destroy = function() {\n    if(this.options.overlay){\n      this.$overlay.hide().off().remove();\n    }\n    this.$element.hide();\n    this.$anchor.off();\n\n    Foundation.unregisterPlugin(this);\n  };\n\n  Foundation.plugin(Reveal, 'Reveal');\n\n  // Exports for AMD/Browserify\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined')\n    module.exports = Reveal;\n  if (typeof define === 'function')\n    define(['foundation'], function() {\n      return Reveal;\n    });\n\n}(Foundation, jQuery);\n\n/**\n * Slider module.\n * @module foundation.slider\n * @requires foundation.util.motion\n * @requires foundation.util.triggers\n * @requires foundation.util.keyboard\n * @requires foundation.util.touch\n */\n!function($, Foundation){\n  'use strict';\n\n  /**\n   * Creates a new instance of a drilldown menu.\n   * @class\n   * @param {jQuery} element - jQuery object to make into an accordion menu.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n  function Slider(element, options){\n    this.$element = element;\n    this.options = $.extend({}, Slider.defaults, this.$element.data(), options);\n\n    this._init();\n\n    Foundation.registerPlugin(this);\n    Foundation.Keyboard.register('Slider', {\n      'ltr': {\n        'ARROW_RIGHT': 'increase',\n        'ARROW_UP': 'increase',\n        'ARROW_DOWN': 'decrease',\n        'ARROW_LEFT': 'decrease',\n        'SHIFT_ARROW_RIGHT': 'increase_fast',\n        'SHIFT_ARROW_UP': 'increase_fast',\n        'SHIFT_ARROW_DOWN': 'decrease_fast',\n        'SHIFT_ARROW_LEFT': 'decrease_fast'\n      },\n      'rtl': {\n        'ARROW_LEFT': 'increase',\n        'ARROW_RIGHT': 'decrease',\n        'SHIFT_ARROW_LEFT': 'increase_fast',\n        'SHIFT_ARROW_RIGHT': 'decrease_fast'\n      }\n    });\n  }\n\n  Slider.defaults = {\n    /**\n     * Minimum value for the slider scale.\n     * @option\n     * @example 0\n     */\n    start: 0,\n    /**\n     * Maximum value for the slider scale.\n     * @option\n     * @example 100\n     */\n    end: 100,\n    /**\n     * Minimum value change per change event. Not Currently Implemented!\n\n     */\n    step: 1,\n    /**\n     * Value at which the handle/input *(left handle/first input)* should be set to on initialization.\n     * @option\n     * @example 0\n     */\n    initialStart: 0,\n    /**\n     * Value at which the right handle/second input should be set to on initialization.\n     * @option\n     * @example 100\n     */\n    initialEnd: 100,\n    /**\n     * Allows the input to be located outside the container and visible. Set to by the JS\n     * @option\n     * @example false\n     */\n    binding: false,\n    /**\n     * Allows the user to click/tap on the slider bar to select a value.\n     * @option\n     * @example true\n     */\n    clickSelect: true,\n    /**\n     * Set to true and use the `vertical` class to change alignment to vertical.\n     * @option\n     * @example false\n     */\n    vertical: false,\n    /**\n     * Allows the user to drag the slider handle(s) to select a value.\n     * @option\n     * @example true\n     */\n    draggable: true,\n    /**\n     * Disables the slider and prevents event listeners from being applied. Double checked by JS with `disabledClass`.\n     * @option\n     * @example false\n     */\n    disabled: false,\n    /**\n     * Allows the use of two handles. Double checked by the JS. Changes some logic handling.\n     * @option\n     * @example false\n     */\n    doubleSided: false,\n    /**\n     * Potential future feature.\n     */\n    // steps: 100,\n    /**\n     * Number of decimal places the plugin should go to for floating point precision.\n     * @option\n     * @example 2\n     */\n    decimal: 2,\n    /**\n     * Time delay for dragged elements.\n     */\n    // dragDelay: 0,\n    /**\n     * Time, in ms, to animate the movement of a slider handle if user clicks/taps on the bar. Needs to be manually set if updating the transition time in the Sass settings.\n     * @option\n     * @example 200\n     */\n    moveTime: 200,//update this if changing the transition time in the sass\n    /**\n     * Class applied to disabled sliders.\n     * @option\n     * @example 'disabled'\n     */\n    disabledClass: 'disabled'\n  };\n  /**\n   * Initilizes the plugin by reading/setting attributes, creating collections and setting the initial position of the handle(s).\n   * @function\n   * @private\n   */\n  Slider.prototype._init = function(){\n    this.inputs = this.$element.find('input');\n    this.handles = this.$element.find('[data-slider-handle]');\n\n    this.$handle = this.handles.eq(0);\n    this.$input = this.inputs.length ? this.inputs.eq(0) : $('#' + this.$handle.attr('aria-controls'));\n    this.$fill = this.$element.find('[data-slider-fill]').css(this.options.vertical ? 'height' : 'width', 0);\n\n    var isDbl = false,\n        _this = this;\n    if(this.options.disabled || this.$element.hasClass(this.options.disabledClass)){\n      this.options.disabled = true;\n      this.$element.addClass(this.options.disabledClass);\n    }\n    if(!this.inputs.length){\n      this.inputs = $().add(this.$input);\n      this.options.binding = true;\n    }\n    this._setInitAttr(0);\n    this._events(this.$handle);\n\n    if(this.handles[1]){\n      this.options.doubleSided = true;\n      this.$handle2 = this.handles.eq(1);\n      this.$input2 = this.inputs.length ? this.inputs.eq(1) : $('#' + this.$handle2.attr('aria-controls'));\n\n      if(!this.inputs[1]){\n        this.inputs = this.inputs.add(this.$input2);\n      }\n      isDbl = true;\n\n      this._setHandlePos(this.$handle, this.options.initialStart, true, function(){\n\n        _this._setHandlePos(_this.$handle2, _this.options.initialEnd);\n      });\n      // this.$handle.triggerHandler('click.zf.slider');\n      this._setInitAttr(1);\n      this._events(this.$handle2);\n    }\n\n    if(!isDbl){\n      this._setHandlePos(this.$handle, this.options.initialStart, true);\n    }\n  };\n  /**\n   * Sets the position of the selected handle and fill bar.\n   * @function\n   * @private\n   * @param {jQuery} $hndl - the selected handle to move.\n   * @param {Number} location - floating point between the start and end values of the slider bar.\n   * @param {Function} cb - callback function to fire on completion.\n   * @fires Slider#moved\n   */\n  Slider.prototype._setHandlePos = function($hndl, location, noInvert, cb){\n  //might need to alter that slightly for bars that will have odd number selections.\n    location = parseFloat(location);//on input change events, convert string to number...grumble.\n    // prevent slider from running out of bounds\n    if(location < this.options.start){ location = this.options.start; }\n    else if(location > this.options.end){ location = this.options.end; }\n\n    var isDbl = this.options.doubleSided,\n        callback = cb || null;\n\n    if(isDbl){\n      if(this.handles.index($hndl) === 0){\n        var h2Val = parseFloat(this.$handle2.attr('aria-valuenow'));\n        location = location >= h2Val ? h2Val - this.options.step : location;\n      }else{\n        var h1Val = parseFloat(this.$handle.attr('aria-valuenow'));\n        location = location <= h1Val ? h1Val + this.options.step : location;\n      }\n    }\n\n    if(this.options.vertical && !noInvert){\n      location = this.options.end - location;\n    }\n    var _this = this,\n        vert = this.options.vertical,\n        hOrW = vert ? 'height' : 'width',\n        lOrT = vert ? 'top' : 'left',\n        halfOfHandle = $hndl[0].getBoundingClientRect()[hOrW] / 2,\n        elemDim = this.$element[0].getBoundingClientRect()[hOrW],\n        pctOfBar = percent(location, this.options.end).toFixed(this.options.decimal),\n        pxToMove = (elemDim - halfOfHandle) * pctOfBar,\n        movement = (percent(pxToMove, elemDim) * 100).toFixed(this.options.decimal),\n        location = location > 0 ? parseFloat(location.toFixed(this.options.decimal)) : 0,\n        anim, prog, start = null, css = {};\n\n    this._setValues($hndl, location);\n\n    if(this.options.doubleSided){//update to calculate based on values set to respective inputs??\n      var isLeftHndl = this.handles.index($hndl) === 0,\n          dim,\n          idx = this.handles.index($hndl);\n\n      if(isLeftHndl){\n        css[lOrT] = (pctOfBar > 0 ? pctOfBar * 100 : 0) + '%';//\n        dim = /*Math.abs*/((percent(this.$handle2.position()[lOrT] + halfOfHandle, elemDim) - parseFloat(pctOfBar)) * 100).toFixed(this.options.decimal) + '%';\n        css['min-' + hOrW] = dim;\n        if(cb && typeof cb === 'function'){ cb(); }\n      }else{\n        location = (location < 100 ? location : 100) - (parseFloat(this.$handle[0].style.left) || this.options.end - location);\n        css['min-' + hOrW] = location + '%';\n      }\n    }\n\n    this.$element.one('finished.zf.animate', function(){\n                    _this.animComplete = true;\n                    /**\n                     * Fires when the handle is done moving.\n                     * @event Slider#moved\n                     */\n                    _this.$element.trigger('moved.zf.slider', [$hndl]);\n                });\n    var moveTime = _this.$element.data('dragging') ? 1000/60 : _this.options.moveTime;\n    /*var move = new */Foundation.Move(moveTime, $hndl, function(){\n      $hndl.css(lOrT, movement + '%');\n      if(!_this.options.doubleSided){\n        _this.$fill.css(hOrW, pctOfBar * 100 + '%');\n      }else{\n        _this.$fill.css(css);\n      }\n    });\n    // move.do();\n  };\n  /**\n   * Sets the initial attribute for the slider element.\n   * @function\n   * @private\n   * @param {Number} idx - index of the current handle/input to use.\n   */\n  Slider.prototype._setInitAttr = function(idx){\n    var id = this.inputs.eq(idx).attr('id') || Foundation.GetYoDigits(6, 'slider');\n    this.inputs.eq(idx).attr({\n      'id': id,\n      'max': this.options.end,\n      'min': this.options.start\n\n    });\n    this.handles.eq(idx).attr({\n      'role': 'slider',\n      'aria-controls': id,\n      'aria-valuemax': this.options.end,\n      'aria-valuemin': this.options.start,\n      'aria-valuenow': idx === 0 ? this.options.initialStart : this.options.initialEnd,\n      'aria-orientation': this.options.vertical ? 'vertical' : 'horizontal',\n      'tabindex': 0\n    });\n  };\n  /**\n   * Sets the input and `aria-valuenow` values for the slider element.\n   * @function\n   * @private\n   * @param {jQuery} $handle - the currently selected handle.\n   * @param {Number} val - floating point of the new value.\n   */\n  Slider.prototype._setValues = function($handle, val){\n    var idx = this.options.doubleSided ? this.handles.index($handle) : 0;\n    this.inputs.eq(idx).val(val);\n    $handle.attr('aria-valuenow', val);\n  };\n  /**\n   * Handles events on the slider element.\n   * Calculates the new location of the current handle.\n   * If there are two handles and the bar was clicked, it determines which handle to move.\n   * @function\n   * @private\n   * @param {Object} e - the `event` object passed from the listener.\n   * @param {jQuery} $handle - the current handle to calculate for, if selected.\n   * @param {Number} val - floating point number for the new value of the slider.\n   */\n  Slider.prototype._handleEvent = function(e, $handle, val){\n    var value, hasVal;\n    if(!val){//click or drag events\n      e.preventDefault();\n      var _this = this,\n          vertical = this.options.vertical,\n          param = vertical ? 'height' : 'width',\n          direction = vertical ? 'top' : 'left',\n          pageXY = vertical ? e.pageY : e.pageX,\n          halfOfHandle = this.$handle[0].getBoundingClientRect()[param] / 2,\n          barDim = this.$element[0].getBoundingClientRect()[param],\n          barOffset = (this.$element.offset()[direction] -  pageXY),\n          barXY = barOffset > 0 ? -halfOfHandle : (barOffset - halfOfHandle) < -barDim ? barDim : Math.abs(barOffset),//if the cursor position is less than or greater than the elements bounding coordinates, set coordinates within those bounds\n          // eleDim = this.$element[0].getBoundingClientRect()[param],\n          offsetPct = percent(barXY, barDim);\n      value = (this.options.end - this.options.start) * offsetPct;\n      hasVal = false;\n\n      if(!$handle){//figure out which handle it is, pass it to the next function.\n        var firstHndlPos = absPosition(this.$handle, direction, barXY, param),\n            secndHndlPos = absPosition(this.$handle2, direction, barXY, param);\n            $handle = firstHndlPos <= secndHndlPos ? this.$handle : this.$handle2;\n      }\n\n    }else{//change event on input\n      value = val;\n      hasVal = true;\n    }\n\n    this._setHandlePos($handle, value, hasVal);\n  };\n  /**\n   * Adds event listeners to the slider elements.\n   * @function\n   * @private\n   * @param {jQuery} $handle - the current handle to apply listeners to.\n   */\n  Slider.prototype._events = function($handle){\n    if(this.options.disabled){ return false; }\n\n    var _this = this,\n        curHandle,\n        timer;\n\n      this.inputs.off('change.zf.slider').on('change.zf.slider', function(e){\n        var idx = _this.inputs.index($(this));\n        _this._handleEvent(e, _this.handles.eq(idx), $(this).val());\n      });\n\n    if(this.options.clickSelect){\n      this.$element.off('click.zf.slider').on('click.zf.slider', function(e){\n        if(_this.$element.data('dragging')){ return false; }\n        _this.animComplete = false;\n        if(_this.options.doubleSided){\n          _this._handleEvent(e);\n        }else{\n          _this._handleEvent(e, _this.$handle);\n        }\n      });\n    }\n\n    if(this.options.draggable){\n      this.handles.addTouch();\n      // var curHandle,\n      //     timer,\n      var $body = $('body');\n      $handle\n        .off('mousedown.zf.slider')\n        .on('mousedown.zf.slider', function(e){\n          $handle.addClass('is-dragging');\n          _this.$fill.addClass('is-dragging');//\n          _this.$element.data('dragging', true);\n          _this.animComplete = false;\n          curHandle = $(e.currentTarget);\n\n          $body.on('mousemove.zf.slider', function(e){\n            e.preventDefault();\n\n            // timer = setTimeout(function(){\n            _this._handleEvent(e, curHandle);\n            // }, _this.options.dragDelay);\n          }).on('mouseup.zf.slider', function(e){\n            // clearTimeout(timer);\n            _this.animComplete = true;\n            _this._handleEvent(e, curHandle);\n            $handle.removeClass('is-dragging');\n            _this.$fill.removeClass('is-dragging');\n            _this.$element.data('dragging', false);\n            // Foundation.reflow(_this.$element, 'slider');\n            $body.off('mousemove.zf.slider mouseup.zf.slider');\n          });\n      });\n    }\n    $handle.off('keydown.zf.slider').on('keydown.zf.slider', function(e){\n      var idx = _this.options.doubleSided ? _this.handles.index($(this)) : 0,\n        oldValue = parseFloat(_this.inputs.eq(idx).val()),\n        newValue;\n\n      var _$handle = $(this);\n\n      // handle keyboard event with keyboard util\n      Foundation.Keyboard.handleKey(e, _this, {\n        decrease: function() {\n          newValue = oldValue - _this.options.step;\n        },\n        increase: function() {\n          newValue = oldValue + _this.options.step;\n        },\n        decrease_fast: function() {\n          newValue = oldValue - _this.options.step * 10;\n        },\n        increase_fast: function() {\n          newValue = oldValue + _this.options.step * 10;\n        },\n        handled: function() { // only set handle pos when event was handled specially\n          e.preventDefault();\n          _this._setHandlePos(_$handle, newValue, true);\n        }\n      });\n      /*if (newValue) { // if pressed key has special function, update value\n        e.preventDefault();\n        _this._setHandlePos(_$handle, newValue);\n      }*/\n    });\n  };\n  /**\n   * Destroys the slider plugin.\n   */\n   Slider.prototype.destroy = function(){\n     this.handles.off('.zf.slider');\n     this.inputs.off('.zf.slider');\n     this.$element.off('.zf.slider');\n\n     Foundation.unregisterPlugin(this);\n   };\n\n  Foundation.plugin(Slider, 'Slider');\n\n  function percent(frac, num){\n    return (frac / num);\n  }\n  function absPosition($handle, dir, clickPos, param){\n    return Math.abs(($handle.position()[dir] + ($handle[param]() / 2)) - clickPos);\n  }\n}(jQuery, window.Foundation);\n\n//*********this is in case we go to static, absolute positions instead of dynamic positioning********\n// this.setSteps(function(){\n//   _this._events();\n//   var initStart = _this.options.positions[_this.options.initialStart - 1] || null;\n//   var initEnd = _this.options.initialEnd ? _this.options.position[_this.options.initialEnd - 1] : null;\n//   if(initStart || initEnd){\n//     _this._handleEvent(initStart, initEnd);\n//   }\n// });\n\n//***********the other part of absolute positions*************\n// Slider.prototype.setSteps = function(cb){\n//   var posChange = this.$element.outerWidth() / this.options.steps;\n//   var counter = 0\n//   while(counter < this.options.steps){\n//     if(counter){\n//       this.options.positions.push(this.options.positions[counter - 1] + posChange);\n//     }else{\n//       this.options.positions.push(posChange);\n//     }\n//     counter++;\n//   }\n//   cb();\n// };\n\n/**\n * Sticky module.\n * @module foundation.sticky\n * @requires foundation.util.triggers\n * @requires foundation.util.mediaQuery\n */\n!function($, Foundation){\n  'use strict';\n\n  /**\n   * Creates a new instance of a sticky thing.\n   * @class\n   * @param {jQuery} element - jQuery object to make sticky.\n   * @param {Object} options - options object passed when creating the element programmatically.\n   */\n  function Sticky(element, options){\n    this.$element = element;\n    this.options = $.extend({}, Sticky.defaults, this.$element.data(), options);\n\n    this._init();\n\n    Foundation.registerPlugin(this);\n  }\n  Sticky.defaults = {\n    /**\n     * Customizable container template. Add your own classes for styling and sizing.\n     * @option\n     * @example '<div data-sticky-container class=\"small-6 columns\"></div>'\n     */\n    container: '<div data-sticky-container></div>',\n    /**\n     * Location in the view the element sticks to.\n     * @option\n     * @example 'top'\n     */\n    stickTo: 'top',\n    /**\n     * If anchored to a single element, the id of that element.\n     * @option\n     * @example 'exampleId'\n     */\n    anchor: '',\n    /**\n     * If using more than one element as anchor points, the id of the top anchor.\n     * @option\n     * @example 'exampleId:top'\n     */\n    topAnchor: '',\n    /**\n     * If using more than one element as anchor points, the id of the bottom anchor.\n     * @option\n     * @example 'exampleId:bottom'\n     */\n    btmAnchor: '',\n    /**\n     * Margin, in `em`'s to apply to the top of the element when it becomes sticky.\n     * @option\n     * @example 1\n     */\n    marginTop: 1,\n    /**\n     * Margin, in `em`'s to apply to the bottom of the element when it becomes sticky.\n     * @option\n     * @example 1\n     */\n    marginBottom: 1,\n    /**\n     * Breakpoint string that is the minimum screen size an element should become sticky.\n     * @option\n     * @example 'medium'\n     */\n    stickyOn: 'medium',\n    /**\n     * Class applied to sticky element, and removed on destruction. Foundation defaults to `sticky`.\n     * @option\n     * @example 'sticky'\n     */\n    stickyClass: 'sticky',\n    /**\n     * Class applied to sticky container. Foundation defaults to `sticky-container`.\n     * @option\n     * @example 'sticky-container'\n     */\n    containerClass: 'sticky-container',\n    /**\n     * Number of scroll events between the plugin's recalculating sticky points. Setting it to `0` will cause it to recalc every scroll event, setting it to `-1` will prevent recalc on scroll.\n     * @option\n     * @example 50\n     */\n    checkEvery: -1\n  };\n\n  /**\n   * Initializes the sticky element by adding classes, getting/setting dimensions, breakpoints and attributes\n   * Also triggered by Foundation._reflow\n   * @function\n   * @private\n   */\n  Sticky.prototype._init = function(){\n    var $parent = this.$element.parent('[data-sticky-container]'),\n        id = this.$element[0].id || Foundation.GetYoDigits(6, 'sticky'),\n        _this = this;\n\n    if(!$parent.length){\n      this.wasWrapped = true;\n    }\n    this.$container = $parent.length ? $parent : $(this.options.container).wrapInner(this.$element);\n    this.$container.addClass(this.options.containerClass);\n\n\n    this.$element.addClass(this.options.stickyClass)\n                 .attr({'data-resize': id});\n\n    this.scrollCount = this.options.checkEvery;\n    this.isStuck = false;\n    // console.log(this.options.anchor, this.options.topAnchor);\n    if(this.options.topAnchor !== ''){\n      this._parsePoints();\n      // console.log(this.points[0]);\n    }else{\n      this.$anchor = this.options.anchor ? $('#' + this.options.anchor) : $(document.body);\n    }\n\n\n    this._setSizes(function(){\n      _this._calc(false);\n    });\n    this._events(id.split('-').reverse().join('-'));\n  };\n  /**\n   * If using multiple elements as anchors, calculates the top and bottom pixel values the sticky thing should stick and unstick on.\n   * @function\n   * @private\n   */\n  Sticky.prototype._parsePoints = function(){\n    var top = this.options.topAnchor,\n        btm = this.options.btmAnchor,\n        pts = [top, btm],\n        breaks = {};\n    for(var i = 0, len = pts.length; i < len && pts[i]; i++){\n      var pt;\n      if(typeof pts[i] === 'number'){\n        pt = pts[i];\n      }else{\n        var place = pts[i].split(':'),\n            anchor = $('#' + place[0]);\n\n        pt = anchor.offset().top;\n        if(place[1] && place[1].toLowerCase() === 'bottom'){\n          pt += anchor[0].getBoundingClientRect().height;\n        }\n      }\n      breaks[i] = pt;\n    }\n      // console.log(breaks);\n    this.points = breaks;\n    // console.log(this.points);\n    return;\n  };\n\n  /**\n   * Adds event handlers for the scrolling element.\n   * @private\n   * @param {String} id - psuedo-random id for unique scroll event listener.\n   */\n  Sticky.prototype._events = function(id){\n    // console.log('called');\n    var _this = this,\n        scrollListener = 'scroll.zf.' + id;\n    if(this.isOn){ return; }\n    if(this.canStick){\n      this.isOn = true;\n      // this.$anchor.off('change.zf.sticky')\n      //             .on('change.zf.sticky', function(){\n      //               _this._setSizes(function(){\n      //                 _this._calc(false);\n      //               });\n      //             });\n\n      $(window).off(scrollListener)\n               .on(scrollListener, function(e){\n                 if(_this.scrollCount === 0){\n                   _this.scrollCount = _this.options.checkEvery;\n                   _this._setSizes(function(){\n                     _this._calc(false, window.pageYOffset);\n                   });\n                 }else{\n                   _this.scrollCount--;\n                   _this._calc(false, window.pageYOffset);\n                 }\n              });\n    }\n\n    this.$element.off('resizeme.zf.trigger')\n                 .on('resizeme.zf.trigger', function(e, el){\n                     _this._setSizes(function(){\n                       _this._calc(false);\n                       if(_this.canStick){\n                         if(!_this.isOn){\n                           _this._events(id);\n                         }\n                       }else if(_this.isOn){\n                         _this._pauseListeners(scrollListener);\n                       }\n                     });\n    });\n  };\n\n  /**\n   * Removes event handlers for scroll and change events on anchor.\n   * @fires Sticky#pause\n   * @param {String} scrollListener - unique, namespaced scroll listener attached to `window`\n   */\n  Sticky.prototype._pauseListeners = function(scrollListener){\n    this.isOn = false;\n    // this.$anchor.off('change.zf.sticky');\n    $(window).off(scrollListener);\n\n    /**\n     * Fires when the plugin is paused due to resize event shrinking the view.\n     * @event Sticky#pause\n     * @private\n     */\n     this.$element.trigger('pause.zf.sticky');\n  };\n\n  /**\n   * Called on every `scroll` event and on `_init`\n   * fires functions based on booleans and cached values\n   * @param {Boolean} checkSizes - true if plugin should recalculate sizes and breakpoints.\n   * @param {Number} scroll - current scroll position passed from scroll event cb function. If not passed, defaults to `window.pageYOffset`.\n   */\n  Sticky.prototype._calc = function(checkSizes, scroll){\n    if(checkSizes){ this._setSizes(); }\n\n    if(!this.canStick){\n      if(this.isStuck){\n        this._removeSticky(true);\n      }\n      return false;\n    }\n\n    if(!scroll){ scroll = window.pageYOffset; }\n\n    if(scroll >= this.topPoint){\n      if(scroll <= this.bottomPoint){\n        if(!this.isStuck){\n          this._setSticky();\n        }\n      }else{\n        if(this.isStuck){\n          this._removeSticky(false);\n        }\n      }\n    }else{\n      if(this.isStuck){\n        this._removeSticky(true);\n      }\n    }\n  };\n  /**\n   * Causes the $element to become stuck.\n   * Adds `position: fixed;`, and helper classes.\n   * @fires Sticky#stuckto\n   * @function\n   * @private\n   */\n  Sticky.prototype._setSticky = function(){\n    var stickTo = this.options.stickTo,\n        mrgn = stickTo === 'top' ? 'marginTop' : 'marginBottom',\n        notStuckTo = stickTo === 'top' ? 'bottom' : 'top',\n        css = {};\n\n    css[mrgn] = this.options[mrgn] + 'em';\n    css[stickTo] = 0;\n    css[notStuckTo] = 'auto';\n    css['left'] = this.$container.offset().left + parseInt(window.getComputedStyle(this.$container[0])[\"padding-left\"], 10);\n    this.isStuck = true;\n    this.$element.removeClass('is-anchored is-at-' + notStuckTo)\n                 .addClass('is-stuck is-at-' + stickTo)\n                 .css(css)\n                 /**\n                  * Fires when the $element has become `position: fixed;`\n                  * Namespaced to `top` or `bottom`.\n                  * @event Sticky#stuckto\n                  */\n                 .trigger('sticky.zf.stuckto:' + stickTo);\n  };\n\n  /**\n   * Causes the $element to become unstuck.\n   * Removes `position: fixed;`, and helper classes.\n   * Adds other helper classes.\n   * @param {Boolean} isTop - tells the function if the $element should anchor to the top or bottom of its $anchor element.\n   * @fires Sticky#unstuckfrom\n   * @private\n   */\n  Sticky.prototype._removeSticky = function(isTop){\n    var stickTo = this.options.stickTo,\n        stickToTop = stickTo === 'top',\n        css = {}, mrgn, notStuckTo,\n        anchorPt = (this.points ? this.points[1] - this.points[0] : this.anchorHeight) - this.elemHeight;\n        mrgn = stickToTop ? 'marginTop' : 'marginBottom';\n        notStuckTo = stickToTop ? 'bottom' : 'top';\n      css[mrgn] = 0;\n    if((isTop && !stickToTop) || (stickToTop && !isTop)){\n      css[stickTo] = anchorPt;\n      css[notStuckTo] = 0;\n    }else{\n      css[stickTo] = 0;\n      css[notStuckTo] = anchorPt;\n    }\n    css['left'] = '';\n    this.isStuck = false;\n    this.$element.removeClass('is-stuck is-at-' + stickTo)\n                 .addClass('is-anchored is-at-' + (isTop ? 'top' : 'bottom'))\n                 .css(css)\n                 /**\n                  * Fires when the $element has become anchored.\n                  * Namespaced to `top` or `bottom`.\n                  * @event Sticky#unstuckfrom\n                  */\n                 .trigger('sticky.zf.unstuckfrom:' + isTop ? 'top' : 'bottom');\n  };\n\n  /**\n   * Sets the $element and $container sizes for plugin.\n   * Calls `_setBreakPoints`.\n   * @param {Function} cb - optional callback function to fire on completion of `_setBreakPoints`.\n   * @private\n   */\n  Sticky.prototype._setSizes = function(cb){\n    this.canStick = Foundation.MediaQuery.atLeast(this.options.stickyOn);\n    if(!this.canStick){ cb(); }\n    var _this = this,\n        newElemWidth = this.$container[0].getBoundingClientRect().width,\n        comp = window.getComputedStyle(this.$container[0]),\n        pdng = parseInt(comp['padding-right'], 10);\n\n    // console.log(this.$anchor);\n    if(this.$anchor && this.$anchor.length){\n      this.anchorHeight = this.$anchor[0].getBoundingClientRect().height;\n    }else{\n      this._parsePoints();\n    }\n\n    this.$element.css({\n      'max-width': newElemWidth - pdng + 'px'\n    });\n\n    var newContainerHeight = this.$element[0].getBoundingClientRect().height || this.containerHeight;\n    this.containerHeight = newContainerHeight;\n    this.$container.css({\n      height: newContainerHeight\n    });\n    this.elemHeight = newContainerHeight;\n\n  \tif (this.isStuck) {\n  \t\tthis.$element.css({\"left\":this.$container.offset().left + parseInt(comp['padding-left'], 10)});\n  \t}\n\n    this._setBreakPoints(newContainerHeight, function(){\n      if(cb){ cb(); }\n    });\n\n  };\n  /**\n   * Sets the upper and lower breakpoints for the element to become sticky/unsticky.\n   * @param {Number} elemHeight - px value for sticky.$element height, calculated by `_setSizes`.\n   * @param {Function} cb - optional callback function to be called on completion.\n   * @private\n   */\n  Sticky.prototype._setBreakPoints = function(elemHeight, cb){\n    if(!this.canStick){\n      if(cb){ cb(); }\n      else{ return false; }\n    }\n    var mTop = emCalc(this.options.marginTop),\n        mBtm = emCalc(this.options.marginBottom),\n        topPoint = this.points ? this.points[0] : this.$anchor.offset().top,\n        bottomPoint = this.points ? this.points[1] : topPoint + this.anchorHeight,\n        // topPoint = this.$anchor.offset().top || this.points[0],\n        // bottomPoint = topPoint + this.anchorHeight || this.points[1],\n        winHeight = window.innerHeight;\n\n    if(this.options.stickTo === 'top'){\n      topPoint -= mTop;\n      bottomPoint -= (elemHeight + mTop);\n    }else if(this.options.stickTo === 'bottom'){\n      topPoint -= (winHeight - (elemHeight + mBtm));\n      bottomPoint -= (winHeight - mBtm);\n    }else{\n      //this would be the stickTo: both option... tricky\n    }\n\n    this.topPoint = topPoint;\n    this.bottomPoint = bottomPoint;\n\n    if(cb){ cb(); }\n  };\n\n  /**\n   * Destroys the current sticky element.\n   * Resets the element to the top position first.\n   * Removes event listeners, JS-added css properties and classes, and unwraps the $element if the JS added the $container.\n   * @function\n   */\n  Sticky.prototype.destroy = function(){\n    this._removeSticky(true);\n\n    this.$element.removeClass(this.options.stickyClass + ' is-anchored is-at-top')\n                 .css({\n                   height: '',\n                   top: '',\n                   bottom: '',\n                   'max-width': ''\n                 })\n                 .off('resizeme.zf.trigger');\n\n    this.$anchor.off('change.zf.sticky');\n    $(window).off('scroll.zf.sticky');\n\n    if(this.wasWrapped){\n      this.$element.unwrap();\n    }else{\n      this.$container.removeClass(this.options.containerClass)\n                     .css({\n                       height: ''\n                     });\n    }\n    Foundation.unregisterPlugin(this);\n  };\n  /**\n   * Helper function to calculate em values\n   * @param Number {em} - number of em's to calculate into pixels\n   */\n  function emCalc(em){\n    return parseInt(window.getComputedStyle(document.body, null).fontSize, 10) * em;\n  }\n  Foundation.plugin(Sticky, 'Sticky');\n}(jQuery, window.Foundation);\n\n/**\n * Tabs module.\n * @module foundation.tabs\n * @requires foundation.util.keyboard\n * @requires foundation.util.timerAndImageLoader if tabs contain images\n */\n!function($, Foundation) {\n  'use strict';\n\n  /**\n   * Creates a new instance of tabs.\n   * @class\n   * @fires Tabs#init\n   * @param {jQuery} element - jQuery object to make into tabs.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n  function Tabs(element, options){\n    this.$element = element;\n    this.options = $.extend({}, Tabs.defaults, this.$element.data(), options);\n\n    this._init();\n    Foundation.registerPlugin(this);\n    Foundation.Keyboard.register('Tabs', {\n      'ENTER': 'open',\n      'SPACE': 'open',\n      'ARROW_RIGHT': 'next',\n      'ARROW_UP': 'previous',\n      'ARROW_DOWN': 'next',\n      'ARROW_LEFT': 'previous',\n      // 'TAB': 'next',\n      // 'SHIFT_TAB': 'previous'\n    });\n  }\n\n  Tabs.defaults = {\n    // /**\n    //  * Allows the JS to alter the url of the window. Not yet implemented.\n    //  */\n    // deepLinking: false,\n    // /**\n    //  * If deepLinking is enabled, allows the window to scroll to content if window is loaded with a hash including a tab-pane id\n    //  */\n    // scrollToContent: false,\n    /**\n     * Allows the window to scroll to content of active pane on load if set to true.\n     * @option\n     * @example false\n     */\n    autoFocus: false,\n    /**\n     * Allows keyboard input to 'wrap' around the tab links.\n     * @option\n     * @example true\n     */\n    wrapOnKeys: true,\n    /**\n     * Allows the tab content panes to match heights if set to true.\n     * @option\n     * @example false\n     */\n    matchHeight: false,\n    /**\n     * Class applied to `li`'s in tab link list.\n     * @option\n     * @example 'tabs-title'\n     */\n    linkClass: 'tabs-title',\n    // contentClass: 'tabs-content',\n    /**\n     * Class applied to the content containers.\n     * @option\n     * @example 'tabs-panel'\n     */\n    panelClass: 'tabs-panel'\n  };\n\n  /**\n   * Initializes the tabs by showing and focusing (if autoFocus=true) the preset active tab.\n   * @private\n   */\n  Tabs.prototype._init = function(){\n    var _this = this;\n\n    this.$tabTitles = this.$element.find('.' + this.options.linkClass);\n    this.$tabContent = $('[data-tabs-content=\"' + this.$element[0].id + '\"]');\n\n    this.$tabTitles.each(function(){\n      var $elem = $(this),\n          $link = $elem.find('a'),\n          isActive = $elem.hasClass('is-active'),\n          hash = $link.attr('href').slice(1),\n          linkId = hash + '-label',\n          $tabContent = $(hash);\n\n      $elem.attr({'role': 'presentation'});\n\n      $link.attr({\n        'role': 'tab',\n        'aria-controls': hash,\n        'aria-selected': isActive,\n        'id': linkId\n      });\n\n      $tabContent.attr({\n        'role': 'tabpanel',\n        'aria-hidden': !isActive,\n        'aria-labelledby': linkId\n      });\n\n      if(isActive && _this.options.autoFocus){\n        $link.focus();\n      }\n    });\n    if(this.options.matchHeight){\n      var $images = this.$tabContent.find('img');\n      if($images.length){\n        Foundation.onImagesLoaded($images, this._setHeight.bind(this));\n      }else{\n        this._setHeight();\n      }\n    }\n    this._events();\n  };\n  /**\n   * Adds event handlers for items within the tabs.\n   * @private\n   */\n   Tabs.prototype._events = function(){\n    this._addKeyHandler();\n    this._addClickHandler();\n    if(this.options.matchHeight){\n      $(window).on('changed.zf.mediaquery', this._setHeight.bind(this));\n    }\n  };\n\n  /**\n   * Adds click handlers for items within the tabs.\n   * @private\n   */\n  Tabs.prototype._addClickHandler = function(){\n    var _this = this;\n    this.$tabTitles.off('click.zf.tabs')\n                   .on('click.zf.tabs', function(e){\n                     e.preventDefault();\n                     e.stopPropagation();\n                     if($(this).hasClass('is-active')){\n                       return;\n                     }\n                     _this._handleTabChange($(this));\n                   });\n  };\n\n  /**\n   * Adds keyboard event handlers for items within the tabs.\n   * @private\n   */\n  Tabs.prototype._addKeyHandler = function(){\n    var _this = this;\n    var $firstTab = _this.$element.find('li:first-of-type');\n    var $lastTab = _this.$element.find('li:last-of-type');\n\n    this.$tabTitles.off('keydown.zf.tabs').on('keydown.zf.tabs', function(e){\n      e.stopPropagation();\n      e.preventDefault();\n\n      var $element = $(this),\n        $elements = $element.parent('ul').children('li'),\n        $prevElement,\n        $nextElement;\n\n      $elements.each(function(i) {\n        if ($(this).is($element)) {\n          if (_this.options.wrapOnKeys) {\n            $prevElement = i === 0 ? $elements.last() : $elements.eq(i-1);\n            $nextElement = i === $elements.length -1 ? $elements.first() : $elements.eq(i+1);\n          } else {\n            $prevElement = $elements.eq(Math.max(0, i-1));\n            $nextElement = $elements.eq(Math.min(i+1, $elements.length-1));\n          }\n          return;\n        }\n      });\n\n      // handle keyboard event with keyboard util\n      Foundation.Keyboard.handleKey(e, _this, {\n        open: function() {\n          $element.find('[role=\"tab\"]').focus();\n          _this._handleTabChange($element);\n        },\n        previous: function() {\n          $prevElement.find('[role=\"tab\"]').focus();\n          _this._handleTabChange($prevElement);\n        },\n        next: function() {\n          $nextElement.find('[role=\"tab\"]').focus();\n          _this._handleTabChange($nextElement);\n        }\n      });\n    });\n  };\n\n\n  /**\n   * Opens the tab `$targetContent` defined by `$target`.\n   * @param {jQuery} $target - Tab to open.\n   * @fires Tabs#change\n   * @function\n   */\n  Tabs.prototype._handleTabChange = function($target){\n    var $tabLink = $target.find('[role=\"tab\"]'),\n        hash = $tabLink.attr('href'),\n        $targetContent = $(hash),\n\n        $oldTab = this.$element.find('.' + this.options.linkClass + '.is-active')\n                  .removeClass('is-active').find('[role=\"tab\"]')\n                  .attr({'aria-selected': 'false'}).attr('href');\n\n    $($oldTab).removeClass('is-active').attr({'aria-hidden': 'true'});\n\n    $target.addClass('is-active');\n\n    $tabLink.attr({'aria-selected': 'true'});\n\n    $targetContent\n      .addClass('is-active')\n      .attr({'aria-hidden': 'false'});\n\n    /**\n     * Fires when the plugin has successfully changed tabs.\n     * @event Tabs#change\n     */\n    this.$element.trigger('change.zf.tabs', [$target]);\n    // Foundation.reflow(this.$element, 'tabs');\n  };\n\n  /**\n   * Public method for selecting a content pane to display.\n   * @param {jQuery | String} elem - jQuery object or string of the id of the pane to display.\n   * @function\n   */\n  Tabs.prototype.selectTab = function(elem){\n    var idStr;\n    if(typeof elem === 'object'){\n      idStr = elem[0].id;\n    }else{\n      idStr = elem;\n    }\n\n    if(idStr.indexOf('#') < 0){\n      idStr = '#' + idStr;\n    }\n    var $target = this.$tabTitles.find('[href=\"' + idStr + '\"]').parent('.' + this.options.linkClass);\n\n    this._handleTabChange($target);\n  };\n  /**\n   * Sets the height of each panel to the height of the tallest panel.\n   * If enabled in options, gets called on media query change.\n   * If loading content via external source, can be called directly or with _reflow.\n   * @function\n   * @private\n   */\n  Tabs.prototype._setHeight = function(){\n    var max = 0;\n    this.$tabContent.find('.' + this.options.panelClass)\n                    .css('height', '')\n                    .each(function(){\n                      var panel = $(this),\n                          isActive = panel.hasClass('is-active');\n\n                      if(!isActive){\n                        panel.css({'visibility': 'hidden', 'display': 'block'});\n                      }\n                      var temp = this.getBoundingClientRect().height;\n\n                      if(!isActive){\n                        panel.css({'visibility': '', 'display': ''});\n                      }\n\n                      max = temp > max ? temp : max;\n                    })\n                    .css('height', max + 'px');\n  };\n\n  /**\n   * Destroys an instance of an tabs.\n   * @fires Tabs#destroyed\n   */\n  Tabs.prototype.destroy = function() {\n    this.$element.find('.' + this.options.linkClass)\n                 .off('.zf.tabs').hide().end()\n                 .find('.' + this.options.panelClass)\n                 .hide();\n    if(this.options.matchHeight){\n      $(window).off('changed.zf.mediaquery');\n    }\n    Foundation.unregisterPlugin(this);\n  };\n\n  Foundation.plugin(Tabs, 'Tabs');\n\n  function checkClass($elem){\n    return $elem.hasClass('is-active');\n  }\n}(jQuery, window.Foundation);\n\n/**\n * Toggler module.\n * @module foundation.toggler\n * @requires foundation.util.motion\n */\n\n!function(Foundation, $) {\n  'use strict';\n\n  /**\n   * Creates a new instance of Toggler.\n   * @class\n   * @fires Toggler#init\n   * @param {Object} element - jQuery object to add the trigger to.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n  function Toggler(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, Toggler.defaults, element.data(), options);\n    this.className = '';\n\n    this._init();\n    this._events();\n\n    Foundation.registerPlugin(this);\n  }\n\n  Toggler.defaults = {\n    /**\n     * Tells the plugin if the element should animated when toggled.\n     * @option\n     * @example false\n     */\n    animate: false\n  };\n\n  /**\n   * Initializes the Toggler plugin by parsing the toggle class from data-toggler, or animation classes from data-animate.\n   * @function\n   * @private\n   */\n  Toggler.prototype._init = function() {\n    var input;\n    // Parse animation classes if they were set\n    if (this.options.animate) {\n      input = this.options.animate.split(' ');\n\n      this.animationIn = input[0];\n      this.animationOut = input[1] || null;\n    }\n    // Otherwise, parse toggle class\n    else {\n      input = this.$element.data('toggler');\n\n      // Allow for a . at the beginning of the string\n      if (input[0] === '.') {\n        this.className = input.slice(1);\n      }\n      else {\n        this.className = input;\n      }\n    }\n\n    // Add ARIA attributes to triggers\n    var id = this.$element[0].id;\n    $('[data-open=\"'+id+'\"], [data-close=\"'+id+'\"], [data-toggle=\"'+id+'\"]')\n      .attr('aria-controls', id);\n\n    // If the target is hidden, add aria-hidden\n    if (this.$element.is(':hidden')) {\n      this.$element.attr('aria-expanded', 'false');\n    }\n  };\n\n  /**\n   * Initializes events for the toggle trigger.\n   * @function\n   * @private\n   */\n  Toggler.prototype._events = function() {\n    var _this = this;\n\n    this.$element.on('toggle.zf.trigger', function() {\n      _this.toggle();\n      return false;\n    });\n  };\n\n  /**\n   * Toggles the target class on the target element. An event is fired from the original trigger depending on if the resultant state was \"on\" or \"off\".\n   * @function\n   * @fires Toggler#on\n   * @fires Toggler#off\n   */\n  Toggler.prototype.toggle = function() {\n    if (!this.options.animate) {\n      this._toggleClass();\n    }\n    else {\n      this._toggleAnimate();\n    }\n  };\n\n  Toggler.prototype._toggleClass = function() {\n    var _this = this;\n    this.$element.toggleClass(this.className);\n\n    if (this.$element.hasClass(this.className)) {\n      /**\n       * Fires if the target element has the class after a toggle.\n       * @event Toggler#on\n       */\n      this.$element.trigger('on.zf.toggler');\n    }\n    else {\n      /**\n       * Fires if the target element does not have the class after a toggle.\n       * @event Toggler#off\n       */\n      this.$element.trigger('off.zf.toggler');\n    }\n\n    _this._updateARIA();\n  };\n\n  Toggler.prototype._toggleAnimate = function() {\n    var _this = this;\n\n    if (this.$element.is(':hidden')) {\n      Foundation.Motion.animateIn(this.$element, this.animationIn, function() {\n        this.trigger('on.zf.toggler');\n        _this._updateARIA();\n      });\n    }\n    else {\n      Foundation.Motion.animateOut(this.$element, this.animationOut, function() {\n        this.trigger('off.zf.toggler');\n        _this._updateARIA();\n      });\n    }\n  };\n\n  Toggler.prototype._updateARIA = function() {\n    if (this.$element.is(':hidden')) {\n      this.$element.attr('aria-expanded', 'false');\n    }\n    else {\n      this.$element.attr('aria-expanded', 'true');\n    }\n  };\n\n  /**\n   * Destroys the instance of Toggler on the element.\n   * @function\n   */\n  Toggler.prototype.destroy= function() {\n    this.$element.off('.zf.toggler');\n    Foundation.unregisterPlugin(this);\n  };\n\n  Foundation.plugin(Toggler, 'Toggler');\n\n  // Exports for AMD/Browserify\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined')\n    module.exports = Toggler;\n  if (typeof define === 'function')\n    define(['foundation'], function() {\n      return Toggler;\n    });\n\n}(Foundation, jQuery);\n\n/**\n * Tooltip module.\n * @module foundation.tooltip\n * @requires foundation.util.box\n * @requires foundation.util.triggers\n */\n!function($, document, Foundation){\n  'use strict';\n\n  /**\n   * Creates a new instance of a Tooltip.\n   * @class\n   * @fires Tooltip#init\n   * @param {jQuery} element - jQuery object to attach a tooltip to.\n   * @param {Object} options - object to extend the default configuration.\n   */\n  function Tooltip(element, options){\n    this.$element = element;\n    this.options = $.extend({}, Tooltip.defaults, this.$element.data(), options);\n\n    this.isActive = false;\n    this.isClick = false;\n    this._init();\n\n    Foundation.registerPlugin(this);\n  }\n\n  Tooltip.defaults = {\n    disableForTouch: false,\n    /**\n     * Time, in ms, before a tooltip should open on hover.\n     * @option\n     * @example 200\n     */\n    hoverDelay: 200,\n    /**\n     * Time, in ms, a tooltip should take to fade into view.\n     * @option\n     * @example 150\n     */\n    fadeInDuration: 150,\n    /**\n     * Time, in ms, a tooltip should take to fade out of view.\n     * @option\n     * @example 150\n     */\n    fadeOutDuration: 150,\n    /**\n     * Disables hover events from opening the tooltip if set to true\n     * @option\n     * @example false\n     */\n    disableHover: false,\n    /**\n     * Optional addtional classes to apply to the tooltip template on init.\n     * @option\n     * @example 'my-cool-tip-class'\n     */\n    templateClasses: '',\n    /**\n     * Non-optional class added to tooltip templates. Foundation default is 'tooltip'.\n     * @option\n     * @example 'tooltip'\n     */\n    tooltipClass: 'tooltip',\n    /**\n     * Class applied to the tooltip anchor element.\n     * @option\n     * @example 'has-tip'\n     */\n    triggerClass: 'has-tip',\n    /**\n     * Minimum breakpoint size at which to open the tooltip.\n     * @option\n     * @example 'small'\n     */\n    showOn: 'small',\n    /**\n     * Custom template to be used to generate markup for tooltip.\n     * @option\n     * @example '<div class=\"tooltip\"></div>'\n     */\n    template: '',\n    /**\n     * Text displayed in the tooltip template on open.\n     * @option\n     * @example 'Some cool space fact here.'\n     */\n    tipText: '',\n    touchCloseText: 'Tap to close.',\n    /**\n     * Allows the tooltip to remain open if triggered with a click or touch event.\n     * @option\n     * @example true\n     */\n    clickOpen: true,\n    /**\n     * Additional positioning classes, set by the JS\n     * @option\n     * @example 'top'\n     */\n    positionClass: '',\n    /**\n     * Distance, in pixels, the template should push away from the anchor on the Y axis.\n     * @option\n     * @example 10\n     */\n    vOffset: 10,\n    /**\n     * Distance, in pixels, the template should push away from the anchor on the X axis, if aligned to a side.\n     * @option\n     * @example 12\n     */\n    hOffset: 12\n  };\n\n  /**\n   * Initializes the tooltip by setting the creating the tip element, adding it's text, setting private variables and setting attributes on the anchor.\n   * @private\n   */\n  Tooltip.prototype._init = function(){\n    var elemId = this.$element.attr('aria-describedby') || Foundation.GetYoDigits(6, 'tooltip');\n\n    this.options.positionClass = this._getPositionClass(this.$element);\n    this.options.tipText = this.options.tipText || this.$element.attr('title');\n    this.template = this.options.template ? $(this.options.template) : this._buildTemplate(elemId);\n\n    this.template.appendTo(document.body)\n        .text(this.options.tipText)\n        .hide();\n\n    this.$element.attr({\n      'title': '',\n      'aria-describedby': elemId,\n      'data-yeti-box': elemId,\n      'data-toggle': elemId,\n      'data-resize': elemId\n    }).addClass(this.triggerClass);\n\n    //helper variables to track movement on collisions\n    this.usedPositions = [];\n    this.counter = 4;\n    this.classChanged = false;\n\n    this._events();\n  };\n\n  /**\n   * Grabs the current positioning class, if present, and returns the value or an empty string.\n   * @private\n   */\n  Tooltip.prototype._getPositionClass = function(element){\n    if(!element){ return ''; }\n    // var position = element.attr('class').match(/top|left|right/g);\n    var position = element[0].className.match(/(top|left|right)/g);\n        position = position ? position[0] : '';\n    return position;\n  };\n  /**\n   * builds the tooltip element, adds attributes, and returns the template.\n   * @private\n   */\n  Tooltip.prototype._buildTemplate = function(id){\n    var templateClasses = (this.options.tooltipClass + ' ' + this.options.positionClass).trim();\n    var $template =  $('<div></div>').addClass(templateClasses).attr({\n      'role': 'tooltip',\n      'aria-hidden': true,\n      'data-is-active': false,\n      'data-is-focus': false,\n      'id': id\n    });\n    return $template;\n  };\n\n  /**\n   * Function that gets called if a collision event is detected.\n   * @param {String} position - positioning class to try\n   * @private\n   */\n  Tooltip.prototype._reposition = function(position){\n    this.usedPositions.push(position ? position : 'bottom');\n\n    //default, try switching to opposite side\n    if(!position && (this.usedPositions.indexOf('top') < 0)){\n      this.template.addClass('top');\n    }else if(position === 'top' && (this.usedPositions.indexOf('bottom') < 0)){\n      this.template.removeClass(position);\n    }else if(position === 'left' && (this.usedPositions.indexOf('right') < 0)){\n      this.template.removeClass(position)\n          .addClass('right');\n    }else if(position === 'right' && (this.usedPositions.indexOf('left') < 0)){\n      this.template.removeClass(position)\n          .addClass('left');\n    }\n\n    //if default change didn't work, try bottom or left first\n    else if(!position && (this.usedPositions.indexOf('top') > -1) && (this.usedPositions.indexOf('left') < 0)){\n      this.template.addClass('left');\n    }else if(position === 'top' && (this.usedPositions.indexOf('bottom') > -1) && (this.usedPositions.indexOf('left') < 0)){\n      this.template.removeClass(position)\n          .addClass('left');\n    }else if(position === 'left' && (this.usedPositions.indexOf('right') > -1) && (this.usedPositions.indexOf('bottom') < 0)){\n      this.template.removeClass(position);\n    }else if(position === 'right' && (this.usedPositions.indexOf('left') > -1) && (this.usedPositions.indexOf('bottom') < 0)){\n      this.template.removeClass(position);\n    }\n    //if nothing cleared, set to bottom\n    else{\n      this.template.removeClass(position);\n    }\n    this.classChanged = true;\n    this.counter--;\n\n  };\n\n  /**\n   * sets the position class of an element and recursively calls itself until there are no more possible positions to attempt, or the tooltip element is no longer colliding.\n   * if the tooltip is larger than the screen width, default to full width - any user selected margin\n   * @private\n   */\n  Tooltip.prototype._setPosition = function(){\n    var position = this._getPositionClass(this.template),\n        $tipDims = Foundation.Box.GetDimensions(this.template),\n        $anchorDims = Foundation.Box.GetDimensions(this.$element),\n        direction = (position === 'left' ? 'left' : ((position === 'right') ? 'left' : 'top')),\n        param = (direction === 'top') ? 'height' : 'width',\n        offset = (param === 'height') ? this.options.vOffset : this.options.hOffset,\n        _this = this;\n\n    if(($tipDims.width >= $tipDims.windowDims.width) || (!this.counter && !Foundation.Box.ImNotTouchingYou(this.template))){\n      this.template.offset(Foundation.Box.GetOffsets(this.template, this.$element, 'center bottom', this.options.vOffset, this.options.hOffset, true)).css({\n      // this.$element.offset(Foundation.GetOffsets(this.template, this.$element, 'center bottom', this.options.vOffset, this.options.hOffset, true)).css({\n        'width': $anchorDims.windowDims.width - (this.options.hOffset * 2),\n        'height': 'auto'\n      });\n      return false;\n    }\n\n    this.template.offset(Foundation.Box.GetOffsets(this.template, this.$element,'center ' + (position || 'bottom'), this.options.vOffset, this.options.hOffset));\n\n    while(!Foundation.Box.ImNotTouchingYou(this.template) && this.counter){\n      this._reposition(position);\n      this._setPosition();\n    }\n  };\n\n  /**\n   * reveals the tooltip, and fires an event to close any other open tooltips on the page\n   * @fires Closeme#tooltip\n   * @fires Tooltip#show\n   * @function\n   */\n  Tooltip.prototype.show = function(){\n    if(this.options.showOn !== 'all' && !Foundation.MediaQuery.atLeast(this.options.showOn)){\n      // console.error('The screen is too small to display this tooltip');\n      return false;\n    }\n\n    var _this = this;\n    this.template.css('visibility', 'hidden').show();\n    this._setPosition();\n\n    /**\n     * Fires to close all other open tooltips on the page\n     * @event Closeme#tooltip\n     */\n    this.$element.trigger('closeme.zf.tooltip', this.template.attr('id'));\n\n\n    this.template.attr({\n      'data-is-active': true,\n      'aria-hidden': false\n    });\n    _this.isActive = true;\n    // console.log(this.template);\n    this.template.stop().hide().css('visibility', '').fadeIn(this.options.fadeInDuration, function(){\n      //maybe do stuff?\n    });\n    /**\n     * Fires when the tooltip is shown\n     * @event Tooltip#show\n     */\n    this.$element.trigger('show.zf.tooltip');\n  };\n\n  /**\n   * Hides the current tooltip, and resets the positioning class if it was changed due to collision\n   * @fires Tooltip#hide\n   * @function\n   */\n  Tooltip.prototype.hide = function(){\n    // console.log('hiding', this.$element.data('yeti-box'));\n    var _this = this;\n    this.template.stop().attr({\n      'aria-hidden': true,\n      'data-is-active': false\n    }).fadeOut(this.options.fadeOutDuration, function(){\n      _this.isActive = false;\n      _this.isClick = false;\n      if(_this.classChanged){\n        _this.template\n             .removeClass(_this._getPositionClass(_this.template))\n             .addClass(_this.options.positionClass);\n\n       _this.usedPositions = [];\n       _this.counter = 4;\n       _this.classChanged = false;\n      }\n    });\n    /**\n     * fires when the tooltip is hidden\n     * @event Tooltip#hide\n     */\n    this.$element.trigger('hide.zf.tooltip');\n  };\n\n  /**\n   * adds event listeners for the tooltip and its anchor\n   * TODO combine some of the listeners like focus and mouseenter, etc.\n   * @private\n   */\n  Tooltip.prototype._events = function(){\n    var _this = this;\n    var $template = this.template;\n    var isFocus = false;\n\n    if(!this.options.disableHover){\n\n      this.$element\n      .on('mouseenter.zf.tooltip', function(e){\n        if(!_this.isActive){\n          _this.timeout = setTimeout(function(){\n            _this.show();\n          }, _this.options.hoverDelay);\n        }\n      })\n      .on('mouseleave.zf.tooltip', function(e){\n        clearTimeout(_this.timeout);\n        if(!isFocus || (!_this.isClick && _this.options.clickOpen)){\n          _this.hide();\n        }\n      });\n    }\n    if(this.options.clickOpen){\n      this.$element.on('mousedown.zf.tooltip', function(e){\n        e.stopImmediatePropagation();\n        if(_this.isClick){\n          _this.hide();\n          // _this.isClick = false;\n        }else{\n          _this.isClick = true;\n          if((_this.options.disableHover || !_this.$element.attr('tabindex')) && !_this.isActive){\n            _this.show();\n          }\n        }\n      });\n    }\n\n    if(!this.options.disableForTouch){\n      this.$element\n      .on('tap.zf.tooltip touchend.zf.tooltip', function(e){\n        _this.isActive ? _this.hide() : _this.show();\n      });\n    }\n\n    this.$element.on({\n      // 'toggle.zf.trigger': this.toggle.bind(this),\n      // 'close.zf.trigger': this.hide.bind(this)\n      'close.zf.trigger': this.hide.bind(this)\n    });\n\n    this.$element\n      .on('focus.zf.tooltip', function(e){\n        isFocus = true;\n        console.log(_this.isClick);\n        if(_this.isClick){\n          return false;\n        }else{\n          // $(window)\n          _this.show();\n        }\n      })\n\n      .on('focusout.zf.tooltip', function(e){\n        isFocus = false;\n        _this.isClick = false;\n        _this.hide();\n      })\n\n      .on('resizeme.zf.trigger', function(){\n        if(_this.isActive){\n          _this._setPosition();\n        }\n      });\n  };\n  /**\n   * adds a toggle method, in addition to the static show() & hide() functions\n   * @function\n   */\n  Tooltip.prototype.toggle = function(){\n    if(this.isActive){\n      this.hide();\n    }else{\n      this.show();\n    }\n  };\n  /**\n   * Destroys an instance of tooltip, removes template element from the view.\n   * @function\n   */\n  Tooltip.prototype.destroy = function(){\n    this.$element.attr('title', this.template.text())\n                 .off('.zf.trigger .zf.tootip')\n                //  .removeClass('has-tip')\n                 .removeAttr('aria-describedby')\n                 .removeAttr('data-yeti-box')\n                 .removeAttr('data-toggle')\n                 .removeAttr('data-resize');\n\n    this.template.remove();\n\n    Foundation.unregisterPlugin(this);\n  };\n  /**\n   * TODO utilize resize event trigger\n   */\n\n  Foundation.plugin(Tooltip, 'Tooltip');\n}(jQuery, window.document, window.Foundation);\n\n;(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['jquery'], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory(require('jquery'));\n  } else {\n    root.MotionUI = factory(root.jQuery);\n  }\n}(this, function($) {\n'use strict';\n\n// Polyfill for requestAnimationFrame\n(function() {\n  if (!Date.now)\n    Date.now = function() { return new Date().getTime(); };\n\n  var vendors = ['webkit', 'moz'];\n  for (var i = 0; i < vendors.length && !window.requestAnimationFrame; ++i) {\n      var vp = vendors[i];\n      window.requestAnimationFrame = window[vp+'RequestAnimationFrame'];\n      window.cancelAnimationFrame = (window[vp+'CancelAnimationFrame']\n                                 || window[vp+'CancelRequestAnimationFrame']);\n  }\n  if (/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)\n    || !window.requestAnimationFrame || !window.cancelAnimationFrame) {\n    var lastTime = 0;\n    window.requestAnimationFrame = function(callback) {\n        var now = Date.now();\n        var nextTime = Math.max(lastTime + 16, now);\n        return setTimeout(function() { callback(lastTime = nextTime); },\n                          nextTime - now);\n    };\n    window.cancelAnimationFrame = clearTimeout;\n  }\n})();\n\nvar initClasses   = ['mui-enter', 'mui-leave'];\nvar activeClasses = ['mui-enter-active', 'mui-leave-active'];\n\n// Find the right \"transitionend\" event for this browser\nvar endEvent = (function() {\n  var transitions = {\n    'transition': 'transitionend',\n    'WebkitTransition': 'webkitTransitionEnd',\n    'MozTransition': 'transitionend',\n    'OTransition': 'otransitionend'\n  }\n  var elem = window.document.createElement('div');\n\n  for (var t in transitions) {\n    if (typeof elem.style[t] !== 'undefined') {\n      return transitions[t];\n    }\n  }\n\n  return null;\n})();\n\nfunction animate(isIn, element, animation, cb) {\n  element = $(element).eq(0);\n\n  if (!element.length) return;\n\n  if (endEvent === null) {\n    isIn ? element.show() : element.hide();\n    cb();\n    return;\n  }\n\n  var initClass = isIn ? initClasses[0] : initClasses[1];\n  var activeClass = isIn ? activeClasses[0] : activeClasses[1];\n\n  // Set up the animation\n  reset();\n  element.addClass(animation);\n  element.css('transition', 'none');\n  requestAnimationFrame(function() {\n    element.addClass(initClass);\n    if (isIn) element.show();\n  });\n\n  // Start the animation\n  requestAnimationFrame(function() {\n    element[0].offsetWidth;\n    element.css('transition', '');\n    element.addClass(activeClass);\n  });\n\n  // Clean up the animation when it finishes\n  element.one('transitionend', finish);\n\n  // Hides the element (for out animations), resets the element, and runs a callback\n  function finish() {\n    if (!isIn) element.hide();\n    reset();\n    if (cb) cb.apply(element);\n  }\n\n  // Resets transitions and removes motion-specific classes\n  function reset() {\n    element[0].style.transitionDuration = 0;\n    element.removeClass(initClass + ' ' + activeClass + ' ' + animation);\n  }\n}\n\nvar MotionUI = {\n  animateIn: function(element, animation, cb) {\n    animate(true, element, animation, cb);\n  },\n\n  animateOut: function(element, animation, cb) {\n    animate(false, element, animation, cb);\n  }\n}\n\nreturn MotionUI;\n}));\n"]},"hash":"039d3fd9f367fe15844c1f158faee2986a40a219"}
